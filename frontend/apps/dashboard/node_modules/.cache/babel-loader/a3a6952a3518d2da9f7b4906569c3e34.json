{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport _remove from \"lodash/remove\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _clone from \"lodash/clone\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { filterNodesOfTree } from '../utils/treeUtils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction, getDataGroupBy, mergeRefs } from '../utils';\nimport IntlContext from '../IntlProvider/IntlContext';\nimport FormattedMessage from '../IntlProvider/FormattedMessage';\nimport { DropdownMenuCheckItem as DropdownMenuItem, PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, shouldDisplay as _shouldDisplay } from '../Picker';\nimport DropdownMenu, { dropdownMenuPropTypes } from '../Picker/DropdownMenu';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes';\n\nvar CheckPicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(CheckPicker, _React$Component);\n\n  function CheckPicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.positionRef = void 0;\n    _this.menuContainerRef = void 0;\n    _this.toggleRef = void 0;\n    _this.triggerRef = void 0;\n\n    _this.getFocusableMenuItems = function () {\n      var menuItems = _this.menuContainerRef.current.menuItems;\n\n      if (!menuItems) {\n        return [];\n      }\n\n      var items = Object.values(menuItems).map(function (item) {\n        return item.props.getItemData();\n      });\n      return filterNodesOfTree(items, function (item) {\n        return _this.shouldDisplay(item);\n      });\n    };\n\n    _this.setStickyItems = function () {\n      var _this$props = _this.props,\n          sticky = _this$props.sticky,\n          data = _this$props.data,\n          valueKey = _this$props.valueKey;\n\n      var value = _this.getValue();\n\n      if (!sticky) {\n        return;\n      }\n\n      var stickyItems = [];\n\n      if (data && value.length) {\n        stickyItems = data.filter(function (item) {\n          return value.some(function (v) {\n            return v === item[valueKey];\n          });\n        });\n      }\n\n      _this.setState({\n        stickyItems: stickyItems\n      });\n    };\n\n    _this.focusNextMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index + 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.focusPrevMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index - 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.selectFocusMenuItem = function (event) {\n      var value = _this.getValue();\n\n      var _this$props2 = _this.props,\n          data = _this$props2.data,\n          valueKey = _this$props2.valueKey;\n      var focusItemValue = _this.state.focusItemValue;\n\n      if (!focusItemValue) {\n        return;\n      }\n\n      if (!value.some(function (v) {\n        return shallowEqual(v, focusItemValue);\n      })) {\n        value.push(focusItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, focusItemValue);\n        });\n      }\n\n      var focusItem = data.find(function (item) {\n        return shallowEqual(item === null || item === void 0 ? void 0 : item[valueKey], focusItemValue);\n      });\n\n      _this.setState({\n        value: value\n      });\n\n      _this.handleSelect(value, focusItem, event);\n\n      _this.handleChangeValue(value, event);\n    };\n\n    _this.handleKeyDown = function (event) {\n      var _this$toggleRef, _this$toggleRef$curre, _this$toggleRef$curre2;\n\n      var _this$state = _this.state,\n          focusItemValue = _this$state.focusItemValue,\n          active = _this$state.active; // enter\n\n      if ((!focusItemValue || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8 && event.target === ((_this$toggleRef = _this.toggleRef) === null || _this$toggleRef === void 0 ? void 0 : (_this$toggleRef$curre = _this$toggleRef.current) === null || _this$toggleRef$curre === void 0 ? void 0 : (_this$toggleRef$curre2 = _this$toggleRef$curre.getToggleNode) === null || _this$toggleRef$curre2 === void 0 ? void 0 : _this$toggleRef$curre2.call(_this$toggleRef$curre))) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.menuContainerRef.current) {\n        return;\n      }\n\n      onMenuKeyDown(event, {\n        down: _this.focusNextMenuItem,\n        up: _this.focusPrevMenuItem,\n        enter: _this.selectFocusMenuItem,\n        esc: _this.handleCloseDropdown\n      });\n    };\n\n    _this.handleItemSelect = function (nextItemValue, item, event, checked) {\n      var value = _this.getValue();\n\n      if (checked) {\n        value.push(nextItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, nextItemValue);\n        });\n      }\n\n      var nextState = {\n        value: value,\n        focusItemValue: nextItemValue\n      };\n\n      _this.setState(nextState);\n\n      _this.handleSelect(value, item, event);\n\n      _this.handleChangeValue(value, event);\n    };\n\n    _this.handleSelect = function (nextItemValue, item, event) {\n      var _this$props$onSelect, _this$props3;\n\n      (_this$props$onSelect = (_this$props3 = _this.props).onSelect) === null || _this$props$onSelect === void 0 ? void 0 : _this$props$onSelect.call(_this$props3, nextItemValue, item, event);\n    };\n\n    _this.handleChangeValue = function (value, event) {\n      var _this$props$onChange, _this$props4;\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, value, event);\n    };\n\n    _this.handleSearch = function (searchKeyword, event) {\n      var _filteredData$;\n\n      var _this$props5 = _this.props,\n          onSearch = _this$props5.onSearch,\n          valueKey = _this$props5.valueKey,\n          data = _this$props5.data;\n      var filteredData = filterNodesOfTree(data, function (item) {\n        return _this.shouldDisplay(item, searchKeyword);\n      });\n\n      _this.setState({\n        searchKeyword: searchKeyword,\n        focusItemValue: filteredData === null || filteredData === void 0 ? void 0 : (_filteredData$ = filteredData[0]) === null || _filteredData$ === void 0 ? void 0 : _filteredData$[valueKey]\n      });\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      var value = _this.getValue();\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n\n      _this.setState({\n        focusItemValue: value ? value[0] : undefined\n      });\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.handleClean = function (event) {\n      var _this$props6 = _this.props,\n          disabled = _this$props6.disabled,\n          cleanable = _this$props6.cleanable;\n\n      if (disabled || !cleanable) {\n        return;\n      }\n\n      _this.setState({\n        value: []\n      });\n\n      _this.handleChangeValue([], event);\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props7;\n\n      (_this$props$onClose = (_this$props7 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props7);\n\n      _this.setState({\n        searchKeyword: '',\n        focusItemValue: null,\n        active: false\n      });\n    };\n\n    _this.handleOpen = function () {\n      var _this$props$onOpen, _this$props8;\n\n      (_this$props$onOpen = (_this$props8 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props8);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.menuContainer = {\n      menuItems: null\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    var _value = props.value,\n        defaultValue = props.defaultValue,\n        groupBy = props.groupBy,\n        _valueKey = props.valueKey,\n        labelKey = props.labelKey;\n    var nextValue = _clone(_value || defaultValue) || [];\n    _this.state = {\n      value: nextValue,\n      // Used to hover the active item  when trigger `onKeydown`\n      focusItemValue: nextValue ? nextValue[0] : undefined,\n      searchKeyword: ''\n    };\n    _this.positionRef = React.createRef();\n    _this.menuContainerRef = React.createRef();\n    _this.toggleRef = React.createRef();\n    _this.triggerRef = React.createRef();\n\n    if (groupBy === _valueKey || groupBy === labelKey) {\n      throw Error('`groupBy` can not be equal to `valueKey` and `labelKey`');\n    }\n\n    return _this;\n  }\n\n  var _proto = CheckPicker.prototype;\n\n  _proto.getValue = function getValue() {\n    var value = this.props.value;\n    var nextValue = _isUndefined(value) ? this.state.value : value;\n    return _clone(nextValue) || [];\n  };\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n\n\n  _proto.shouldDisplay = function shouldDisplay(item, word) {\n    var _this$props9 = this.props,\n        labelKey = _this$props9.labelKey,\n        searchBy = _this$props9.searchBy;\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n    var searchKeyword = typeof word === 'undefined' ? this.state.searchKeyword : word;\n\n    if (typeof searchBy === 'function') {\n      return searchBy(searchKeyword, label, item);\n    }\n\n    return _shouldDisplay(label, searchKeyword);\n  };\n\n  _proto.findNode = function findNode(focus) {\n    var items = this.getFocusableMenuItems();\n    var valueKey = this.props.valueKey;\n    var focusItemValue = this.state.focusItemValue;\n\n    for (var i = 0; i < items.length; i += 1) {\n      if (shallowEqual(focusItemValue, items[i][valueKey])) {\n        focus(items, i);\n        return;\n      }\n    }\n\n    focus(items, -1);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this4 = this;\n\n    var _this$props10 = this.props,\n        data = _this$props10.data,\n        valueKey = _this$props10.valueKey,\n        groupBy = _this$props10.groupBy,\n        searchable = _this$props10.searchable,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        locale = _this$props10.locale,\n        renderMenu = _this$props10.renderMenu,\n        menuClassName = _this$props10.menuClassName,\n        menuStyle = _this$props10.menuStyle,\n        menuAutoWidth = _this$props10.menuAutoWidth,\n        sort = _this$props10.sort,\n        virtualized = _this$props10.virtualized;\n    var _this$state2 = this.state,\n        focusItemValue = _this$state2.focusItemValue,\n        stickyItems = _this$state2.stickyItems;\n    var classes = classNames(this.addPrefix('check-menu'), menuClassName);\n    var filteredData = [];\n    var filteredStickyItems = [];\n\n    if (stickyItems) {\n      filteredStickyItems = filterNodesOfTree(stickyItems, function (item) {\n        return _this4.shouldDisplay(item);\n      });\n      filteredData = filterNodesOfTree(data, function (item) {\n        return _this4.shouldDisplay(item) && !stickyItems.some(function (v) {\n          return v[valueKey] === item[valueKey];\n        });\n      });\n    } else {\n      filteredData = filterNodesOfTree(data, function (item) {\n        return _this4.shouldDisplay(item);\n      });\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      filteredData = getDataGroupBy(filteredData, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      filteredData = filteredData.sort(sort(false));\n    }\n\n    var menuProps = _pick(this.props, Object.keys(_omit(dropdownMenuPropTypes, ['className', 'style', 'classPrefix'])));\n\n    var menu = filteredData.length || filteredStickyItems.length ? React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: this.addPrefix('check-menu'),\n      dropdownMenuItemComponentClass: DropdownMenuItem,\n      ref: this.menuContainerRef,\n      activeItemValues: this.getValue(),\n      focusItemValue: focusItemValue,\n      data: [].concat(filteredStickyItems, filteredData),\n      group: !_isUndefined(groupBy),\n      onSelect: this.handleItemSelect,\n      virtualized: virtualized\n    })) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText);\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: menuStyle,\n      onKeyDown: this.handleKeyDown,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable && React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: this.handleSearch,\n      value: this.state.searchKeyword\n    }), renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.render = function render() {\n    var _this$props11 = this.props,\n        data = _this$props11.data,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        placeholder = _this$props11.placeholder,\n        renderValue = _this$props11.renderValue,\n        disabled = _this$props11.disabled,\n        cleanable = _this$props11.cleanable,\n        locale = _this$props11.locale,\n        toggleComponentClass = _this$props11.toggleComponentClass,\n        style = _this$props11.style,\n        onEnter = _this$props11.onEnter,\n        onEntered = _this$props11.onEntered,\n        onExited = _this$props11.onExited,\n        onClean = _this$props11.onClean,\n        countable = _this$props11.countable,\n        positionRef = _this$props11.positionRef,\n        rest = _objectWithoutPropertiesLoose(_this$props11, [\"data\", \"valueKey\", \"labelKey\", \"placeholder\", \"renderValue\", \"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onEntered\", \"onExited\", \"onClean\", \"countable\", \"positionRef\"]);\n\n    var unhandled = getUnhandledProps(CheckPicker, rest);\n    var value = this.getValue();\n    var selectedItems = data.filter(function (item) {\n      return value.some(function (val) {\n        return shallowEqual(item[valueKey], val);\n      });\n    }) || [];\n    /**\n     * 1.Have a value and the value is valid.\n     * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n     */\n\n    var hasValue = selectedItems.length > 0 || (value === null || value === void 0 ? void 0 : value.length) > 0 && _isFunction(renderValue);\n\n    var selectedElement = placeholder;\n\n    if (selectedItems.length > 0) {\n      selectedElement = React.createElement(SelectedElement, {\n        selectedItems: selectedItems,\n        countable: countable,\n        valueKey: valueKey,\n        labelKey: labelKey,\n        prefix: this.addPrefix\n      });\n    }\n\n    if ((value === null || value === void 0 ? void 0 : value.length) > 0 && _isFunction(renderValue)) {\n      selectedElement = renderValue(value, selectedItems, selectedElement);\n\n      if (_isNil(selectedElement)) {\n        hasValue = false;\n      }\n    }\n\n    var classes = getToggleWrapperClassName('check', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlContext.Provider, {\n      value: locale\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEnter: createChainedFunction(this.setStickyItems, onEnter),\n      onEntered: createChainedFunction(this.handleOpen, onEntered),\n      onExited: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      onKeyDown: this.handleKeyDown,\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || React.createElement(FormattedMessage, {\n      id: \"placeholder\"\n    })))));\n  };\n\n  return CheckPicker;\n}(React.Component);\n\nCheckPicker.propTypes = _extends({}, listPickerPropTypes, {\n  menuAutoWidth: PropTypes.bool,\n  maxHeight: PropTypes.number,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  searchable: PropTypes.bool,\n  countable: PropTypes.bool,\n  sticky: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchBy: PropTypes.func\n});\nCheckPicker.defaultProps = _extends({}, listPickerDefaultProps, {\n  maxHeight: 320,\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  },\n  searchable: true,\n  countable: true,\n  menuAutoWidth: true,\n  virtualized: true\n});\nexport default defaultProps({\n  classPrefix: 'picker'\n})(CheckPicker);","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isNil","_isFunction","_omit","_pick","_remove","_isUndefined","_clone","React","PropTypes","classNames","shallowEqual","filterNodesOfTree","defaultProps","prefix","getUnhandledProps","createChainedFunction","getDataGroupBy","mergeRefs","IntlContext","FormattedMessage","DropdownMenuCheckItem","DropdownMenuItem","PickerToggle","getToggleWrapperClassName","onMenuKeyDown","MenuWrapper","SearchBar","SelectedElement","PickerToggleTrigger","shouldDisplay","_shouldDisplay","DropdownMenu","dropdownMenuPropTypes","listPickerPropTypes","listPickerDefaultProps","CheckPicker","_React$Component","props","_this","call","positionRef","menuContainerRef","toggleRef","triggerRef","getFocusableMenuItems","menuItems","current","items","Object","values","map","item","getItemData","setStickyItems","_this$props","sticky","data","valueKey","value","getValue","stickyItems","length","filter","some","v","setState","focusNextMenuItem","findNode","index","focusItem","focusItemValue","focusPrevMenuItem","selectFocusMenuItem","event","_this$props2","state","push","itemVal","find","handleSelect","handleChangeValue","handleKeyDown","_this$toggleRef","_this$toggleRef$curre","_this$toggleRef$curre2","_this$state","active","keyCode","handleToggleDropdown","target","getToggleNode","handleClean","down","up","enter","esc","handleCloseDropdown","handleItemSelect","nextItemValue","checked","nextState","_this$props$onSelect","_this$props3","onSelect","_this$props$onChange","_this$props4","onChange","handleSearch","searchKeyword","_filteredData$","_this$props5","onSearch","filteredData","_this$triggerRef$curr","_this$triggerRef$curr2","hide","undefined","handleOpenDropdown","_this$triggerRef$curr3","_this$triggerRef$curr4","show","open","_this$handleOpenDropd","_this2","close","_this$handleCloseDrop","_this3","_this$props6","disabled","cleanable","handleExit","_this$props$onClose","_this$props7","onClose","handleOpen","_this$props$onOpen","_this$props8","onOpen","addPrefix","name","classPrefix","menuContainer","getPositionInstance","getToggleInstance","_value","defaultValue","groupBy","_valueKey","labelKey","nextValue","createRef","Error","_proto","prototype","word","_this$props9","searchBy","label","focus","i","renderDropdownMenu","_this4","_this$props10","searchable","renderExtraFooter","locale","renderMenu","menuClassName","menuStyle","menuAutoWidth","sort","virtualized","_this$state2","classes","filteredStickyItems","menuProps","keys","menu","createElement","dropdownMenuItemComponentClass","ref","activeItemValues","concat","group","className","noResultsText","autoWidth","style","onKeyDown","placeholder","searchPlaceholder","render","_this$props11","renderValue","toggleComponentClass","onEnter","onEntered","onExited","onClean","countable","rest","unhandled","selectedItems","val","hasValue","selectedElement","Provider","pickerProps","speaker","componentClass","id","Component","propTypes","bool","maxHeight","number","func","renderMenuItem","renderMenuGroup","onGroupTitleClick","any"],"sources":["/Users/lixupeng/Local-Work/frontend/node_modules/rsuite/es/CheckPicker/CheckPicker.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport _remove from \"lodash/remove\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _clone from \"lodash/clone\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { filterNodesOfTree } from '../utils/treeUtils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction, getDataGroupBy, mergeRefs } from '../utils';\nimport IntlContext from '../IntlProvider/IntlContext';\nimport FormattedMessage from '../IntlProvider/FormattedMessage';\nimport { DropdownMenuCheckItem as DropdownMenuItem, PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, shouldDisplay as _shouldDisplay } from '../Picker';\nimport DropdownMenu, { dropdownMenuPropTypes } from '../Picker/DropdownMenu';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes';\n\nvar CheckPicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CheckPicker, _React$Component);\n\n  function CheckPicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.positionRef = void 0;\n    _this.menuContainerRef = void 0;\n    _this.toggleRef = void 0;\n    _this.triggerRef = void 0;\n\n    _this.getFocusableMenuItems = function () {\n      var menuItems = _this.menuContainerRef.current.menuItems;\n\n      if (!menuItems) {\n        return [];\n      }\n\n      var items = Object.values(menuItems).map(function (item) {\n        return item.props.getItemData();\n      });\n      return filterNodesOfTree(items, function (item) {\n        return _this.shouldDisplay(item);\n      });\n    };\n\n    _this.setStickyItems = function () {\n      var _this$props = _this.props,\n          sticky = _this$props.sticky,\n          data = _this$props.data,\n          valueKey = _this$props.valueKey;\n\n      var value = _this.getValue();\n\n      if (!sticky) {\n        return;\n      }\n\n      var stickyItems = [];\n\n      if (data && value.length) {\n        stickyItems = data.filter(function (item) {\n          return value.some(function (v) {\n            return v === item[valueKey];\n          });\n        });\n      }\n\n      _this.setState({\n        stickyItems: stickyItems\n      });\n    };\n\n    _this.focusNextMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index + 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.focusPrevMenuItem = function () {\n      var valueKey = _this.props.valueKey;\n\n      _this.findNode(function (items, index) {\n        var focusItem = items[index - 1];\n\n        if (!_isUndefined(focusItem)) {\n          _this.setState({\n            focusItemValue: focusItem[valueKey]\n          });\n        }\n      });\n    };\n\n    _this.selectFocusMenuItem = function (event) {\n      var value = _this.getValue();\n\n      var _this$props2 = _this.props,\n          data = _this$props2.data,\n          valueKey = _this$props2.valueKey;\n      var focusItemValue = _this.state.focusItemValue;\n\n      if (!focusItemValue) {\n        return;\n      }\n\n      if (!value.some(function (v) {\n        return shallowEqual(v, focusItemValue);\n      })) {\n        value.push(focusItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, focusItemValue);\n        });\n      }\n\n      var focusItem = data.find(function (item) {\n        return shallowEqual(item === null || item === void 0 ? void 0 : item[valueKey], focusItemValue);\n      });\n\n      _this.setState({\n        value: value\n      });\n\n      _this.handleSelect(value, focusItem, event);\n\n      _this.handleChangeValue(value, event);\n    };\n\n    _this.handleKeyDown = function (event) {\n      var _this$toggleRef, _this$toggleRef$curre, _this$toggleRef$curre2;\n\n      var _this$state = _this.state,\n          focusItemValue = _this$state.focusItemValue,\n          active = _this$state.active; // enter\n\n      if ((!focusItemValue || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8 && event.target === ((_this$toggleRef = _this.toggleRef) === null || _this$toggleRef === void 0 ? void 0 : (_this$toggleRef$curre = _this$toggleRef.current) === null || _this$toggleRef$curre === void 0 ? void 0 : (_this$toggleRef$curre2 = _this$toggleRef$curre.getToggleNode) === null || _this$toggleRef$curre2 === void 0 ? void 0 : _this$toggleRef$curre2.call(_this$toggleRef$curre))) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.menuContainerRef.current) {\n        return;\n      }\n\n      onMenuKeyDown(event, {\n        down: _this.focusNextMenuItem,\n        up: _this.focusPrevMenuItem,\n        enter: _this.selectFocusMenuItem,\n        esc: _this.handleCloseDropdown\n      });\n    };\n\n    _this.handleItemSelect = function (nextItemValue, item, event, checked) {\n      var value = _this.getValue();\n\n      if (checked) {\n        value.push(nextItemValue);\n      } else {\n        _remove(value, function (itemVal) {\n          return shallowEqual(itemVal, nextItemValue);\n        });\n      }\n\n      var nextState = {\n        value: value,\n        focusItemValue: nextItemValue\n      };\n\n      _this.setState(nextState);\n\n      _this.handleSelect(value, item, event);\n\n      _this.handleChangeValue(value, event);\n    };\n\n    _this.handleSelect = function (nextItemValue, item, event) {\n      var _this$props$onSelect, _this$props3;\n\n      (_this$props$onSelect = (_this$props3 = _this.props).onSelect) === null || _this$props$onSelect === void 0 ? void 0 : _this$props$onSelect.call(_this$props3, nextItemValue, item, event);\n    };\n\n    _this.handleChangeValue = function (value, event) {\n      var _this$props$onChange, _this$props4;\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, value, event);\n    };\n\n    _this.handleSearch = function (searchKeyword, event) {\n      var _filteredData$;\n\n      var _this$props5 = _this.props,\n          onSearch = _this$props5.onSearch,\n          valueKey = _this$props5.valueKey,\n          data = _this$props5.data;\n      var filteredData = filterNodesOfTree(data, function (item) {\n        return _this.shouldDisplay(item, searchKeyword);\n      });\n\n      _this.setState({\n        searchKeyword: searchKeyword,\n        focusItemValue: filteredData === null || filteredData === void 0 ? void 0 : (_filteredData$ = filteredData[0]) === null || _filteredData$ === void 0 ? void 0 : _filteredData$[valueKey]\n      });\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      var value = _this.getValue();\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n\n      _this.setState({\n        focusItemValue: value ? value[0] : undefined\n      });\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.handleClean = function (event) {\n      var _this$props6 = _this.props,\n          disabled = _this$props6.disabled,\n          cleanable = _this$props6.cleanable;\n\n      if (disabled || !cleanable) {\n        return;\n      }\n\n      _this.setState({\n        value: []\n      });\n\n      _this.handleChangeValue([], event);\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props7;\n\n      (_this$props$onClose = (_this$props7 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props7);\n\n      _this.setState({\n        searchKeyword: '',\n        focusItemValue: null,\n        active: false\n      });\n    };\n\n    _this.handleOpen = function () {\n      var _this$props$onOpen, _this$props8;\n\n      (_this$props$onOpen = (_this$props8 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props8);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.menuContainer = {\n      menuItems: null\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    var _value = props.value,\n        defaultValue = props.defaultValue,\n        groupBy = props.groupBy,\n        _valueKey = props.valueKey,\n        labelKey = props.labelKey;\n    var nextValue = _clone(_value || defaultValue) || [];\n    _this.state = {\n      value: nextValue,\n      // Used to hover the active item  when trigger `onKeydown`\n      focusItemValue: nextValue ? nextValue[0] : undefined,\n      searchKeyword: ''\n    };\n    _this.positionRef = React.createRef();\n    _this.menuContainerRef = React.createRef();\n    _this.toggleRef = React.createRef();\n    _this.triggerRef = React.createRef();\n\n    if (groupBy === _valueKey || groupBy === labelKey) {\n      throw Error('`groupBy` can not be equal to `valueKey` and `labelKey`');\n    }\n\n    return _this;\n  }\n\n  var _proto = CheckPicker.prototype;\n\n  _proto.getValue = function getValue() {\n    var value = this.props.value;\n    var nextValue = _isUndefined(value) ? this.state.value : value;\n    return _clone(nextValue) || [];\n  };\n\n  /**\n   * Index of keyword  in `label`\n   * @param {node} label\n   */\n  _proto.shouldDisplay = function shouldDisplay(item, word) {\n    var _this$props9 = this.props,\n        labelKey = _this$props9.labelKey,\n        searchBy = _this$props9.searchBy;\n    var label = item === null || item === void 0 ? void 0 : item[labelKey];\n    var searchKeyword = typeof word === 'undefined' ? this.state.searchKeyword : word;\n\n    if (typeof searchBy === 'function') {\n      return searchBy(searchKeyword, label, item);\n    }\n\n    return _shouldDisplay(label, searchKeyword);\n  };\n\n  _proto.findNode = function findNode(focus) {\n    var items = this.getFocusableMenuItems();\n    var valueKey = this.props.valueKey;\n    var focusItemValue = this.state.focusItemValue;\n\n    for (var i = 0; i < items.length; i += 1) {\n      if (shallowEqual(focusItemValue, items[i][valueKey])) {\n        focus(items, i);\n        return;\n      }\n    }\n\n    focus(items, -1);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this4 = this;\n\n    var _this$props10 = this.props,\n        data = _this$props10.data,\n        valueKey = _this$props10.valueKey,\n        groupBy = _this$props10.groupBy,\n        searchable = _this$props10.searchable,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        locale = _this$props10.locale,\n        renderMenu = _this$props10.renderMenu,\n        menuClassName = _this$props10.menuClassName,\n        menuStyle = _this$props10.menuStyle,\n        menuAutoWidth = _this$props10.menuAutoWidth,\n        sort = _this$props10.sort,\n        virtualized = _this$props10.virtualized;\n    var _this$state2 = this.state,\n        focusItemValue = _this$state2.focusItemValue,\n        stickyItems = _this$state2.stickyItems;\n    var classes = classNames(this.addPrefix('check-menu'), menuClassName);\n    var filteredData = [];\n    var filteredStickyItems = [];\n\n    if (stickyItems) {\n      filteredStickyItems = filterNodesOfTree(stickyItems, function (item) {\n        return _this4.shouldDisplay(item);\n      });\n      filteredData = filterNodesOfTree(data, function (item) {\n        return _this4.shouldDisplay(item) && !stickyItems.some(function (v) {\n          return v[valueKey] === item[valueKey];\n        });\n      });\n    } else {\n      filteredData = filterNodesOfTree(data, function (item) {\n        return _this4.shouldDisplay(item);\n      });\n    } // Create a tree structure data when set `groupBy`\n\n\n    if (groupBy) {\n      filteredData = getDataGroupBy(filteredData, groupBy, sort);\n    } else if (typeof sort === 'function') {\n      filteredData = filteredData.sort(sort(false));\n    }\n\n    var menuProps = _pick(this.props, Object.keys(_omit(dropdownMenuPropTypes, ['className', 'style', 'classPrefix'])));\n\n    var menu = filteredData.length || filteredStickyItems.length ? React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: this.addPrefix('check-menu'),\n      dropdownMenuItemComponentClass: DropdownMenuItem,\n      ref: this.menuContainerRef,\n      activeItemValues: this.getValue(),\n      focusItemValue: focusItemValue,\n      data: [].concat(filteredStickyItems, filteredData),\n      group: !_isUndefined(groupBy),\n      onSelect: this.handleItemSelect,\n      virtualized: virtualized\n    })) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText);\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: menuStyle,\n      onKeyDown: this.handleKeyDown,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable && React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: this.handleSearch,\n      value: this.state.searchKeyword\n    }), renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.render = function render() {\n    var _this$props11 = this.props,\n        data = _this$props11.data,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        placeholder = _this$props11.placeholder,\n        renderValue = _this$props11.renderValue,\n        disabled = _this$props11.disabled,\n        cleanable = _this$props11.cleanable,\n        locale = _this$props11.locale,\n        toggleComponentClass = _this$props11.toggleComponentClass,\n        style = _this$props11.style,\n        onEnter = _this$props11.onEnter,\n        onEntered = _this$props11.onEntered,\n        onExited = _this$props11.onExited,\n        onClean = _this$props11.onClean,\n        countable = _this$props11.countable,\n        positionRef = _this$props11.positionRef,\n        rest = _objectWithoutPropertiesLoose(_this$props11, [\"data\", \"valueKey\", \"labelKey\", \"placeholder\", \"renderValue\", \"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onEntered\", \"onExited\", \"onClean\", \"countable\", \"positionRef\"]);\n\n    var unhandled = getUnhandledProps(CheckPicker, rest);\n    var value = this.getValue();\n    var selectedItems = data.filter(function (item) {\n      return value.some(function (val) {\n        return shallowEqual(item[valueKey], val);\n      });\n    }) || [];\n    /**\n     * 1.Have a value and the value is valid.\n     * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n     */\n\n    var hasValue = selectedItems.length > 0 || (value === null || value === void 0 ? void 0 : value.length) > 0 && _isFunction(renderValue);\n\n    var selectedElement = placeholder;\n\n    if (selectedItems.length > 0) {\n      selectedElement = React.createElement(SelectedElement, {\n        selectedItems: selectedItems,\n        countable: countable,\n        valueKey: valueKey,\n        labelKey: labelKey,\n        prefix: this.addPrefix\n      });\n    }\n\n    if ((value === null || value === void 0 ? void 0 : value.length) > 0 && _isFunction(renderValue)) {\n      selectedElement = renderValue(value, selectedItems, selectedElement);\n\n      if (_isNil(selectedElement)) {\n        hasValue = false;\n      }\n    }\n\n    var classes = getToggleWrapperClassName('check', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlContext.Provider, {\n      value: locale\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEnter: createChainedFunction(this.setStickyItems, onEnter),\n      onEntered: createChainedFunction(this.handleOpen, onEntered),\n      onExited: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      onKeyDown: this.handleKeyDown,\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || React.createElement(FormattedMessage, {\n      id: \"placeholder\"\n    })))));\n  };\n\n  return CheckPicker;\n}(React.Component);\n\nCheckPicker.propTypes = _extends({}, listPickerPropTypes, {\n  menuAutoWidth: PropTypes.bool,\n  maxHeight: PropTypes.number,\n  renderMenu: PropTypes.func,\n  renderMenuItem: PropTypes.func,\n  renderMenuGroup: PropTypes.func,\n  onSelect: PropTypes.func,\n  onGroupTitleClick: PropTypes.func,\n  onSearch: PropTypes.func,\n  groupBy: PropTypes.any,\n  sort: PropTypes.func,\n  searchable: PropTypes.bool,\n  countable: PropTypes.bool,\n  sticky: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchBy: PropTypes.func\n});\nCheckPicker.defaultProps = _extends({}, listPickerDefaultProps, {\n  maxHeight: 320,\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  },\n  searchable: true,\n  countable: true,\n  menuAutoWidth: true,\n  virtualized: true\n});\nexport default defaultProps({\n  classPrefix: 'picker'\n})(CheckPicker);"],"mappings":"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"},"metadata":{},"sourceType":"module"}