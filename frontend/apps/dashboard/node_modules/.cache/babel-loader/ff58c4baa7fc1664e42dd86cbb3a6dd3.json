{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport shallowEqual from '../utils/shallowEqual';\nimport stringToObject from '../utils/stringToObject';\nexport function getDerivedStateForCascade(nextProps, prevState, selectNodeValue, newChildren) {\n  var data = nextProps.data,\n      labelKey = nextProps.labelKey,\n      valueKey = nextProps.valueKey,\n      childrenKey = nextProps.childrenKey,\n      value = nextProps.value;\n  var activeItemValue = selectNodeValue || (typeof value === 'undefined' ? prevState.value : value);\n  var nextItems = [];\n  var nextPathItems = [];\n\n  var findNode = function findNode(items) {\n    var _loop = function _loop(i) {\n      items[i] = stringToObject(items[i], labelKey, valueKey);\n      var children = items[i][childrenKey];\n\n      if (shallowEqual(items[i][valueKey], activeItemValue)) {\n        return {\n          v: {\n            items: items,\n            active: items[i]\n          }\n        };\n      } else if (children) {\n        var v = findNode(children);\n\n        if (v) {\n          nextItems.push(children.map(function (item) {\n            return _extends({}, stringToObject(item, labelKey, valueKey), {\n              parent: items[i]\n            });\n          }));\n          nextPathItems.push(v.active);\n          return {\n            v: {\n              items: items,\n              active: items[i]\n            }\n          };\n        }\n      }\n    };\n\n    for (var i = 0; i < items.length; i += 1) {\n      var _ret = _loop(i);\n\n      if (typeof _ret === \"object\") return _ret.v;\n    }\n\n    return null;\n  };\n\n  var activeItem = findNode(data);\n  nextItems.push(data);\n\n  if (activeItem) {\n    nextPathItems.push(activeItem.active);\n  }\n  /**\n   * 如果是异步更新 data 后，获取到的一个 selectNodeValue，则不更新 activePaths\n   * 但是需要更新 items， 因为这里的目的就是把异步更新后的的数据展示出来\n   */\n\n\n  var cascadePathItems = nextPathItems.reverse();\n\n  if (newChildren) {\n    return {\n      items: [].concat(nextItems.reverse(), [newChildren]),\n      tempActivePaths: cascadePathItems\n    };\n  }\n\n  return {\n    items: nextItems.reverse(),\n    tempActivePaths: null,\n    activePaths: cascadePathItems\n  };\n}","map":{"version":3,"names":["_extends","shallowEqual","stringToObject","getDerivedStateForCascade","nextProps","prevState","selectNodeValue","newChildren","data","labelKey","valueKey","childrenKey","value","activeItemValue","nextItems","nextPathItems","findNode","items","_loop","i","children","v","active","push","map","item","parent","length","_ret","activeItem","cascadePathItems","reverse","concat","tempActivePaths","activePaths"],"sources":["/Users/lixupeng/Local-Work/frontend/node_modules/rsuite/es/Cascader/utils.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport shallowEqual from '../utils/shallowEqual';\nimport stringToObject from '../utils/stringToObject';\nexport function getDerivedStateForCascade(nextProps, prevState, selectNodeValue, newChildren) {\n  var data = nextProps.data,\n      labelKey = nextProps.labelKey,\n      valueKey = nextProps.valueKey,\n      childrenKey = nextProps.childrenKey,\n      value = nextProps.value;\n  var activeItemValue = selectNodeValue || (typeof value === 'undefined' ? prevState.value : value);\n  var nextItems = [];\n  var nextPathItems = [];\n\n  var findNode = function findNode(items) {\n    var _loop = function _loop(i) {\n      items[i] = stringToObject(items[i], labelKey, valueKey);\n      var children = items[i][childrenKey];\n\n      if (shallowEqual(items[i][valueKey], activeItemValue)) {\n        return {\n          v: {\n            items: items,\n            active: items[i]\n          }\n        };\n      } else if (children) {\n        var v = findNode(children);\n\n        if (v) {\n          nextItems.push(children.map(function (item) {\n            return _extends({}, stringToObject(item, labelKey, valueKey), {\n              parent: items[i]\n            });\n          }));\n          nextPathItems.push(v.active);\n          return {\n            v: {\n              items: items,\n              active: items[i]\n            }\n          };\n        }\n      }\n    };\n\n    for (var i = 0; i < items.length; i += 1) {\n      var _ret = _loop(i);\n\n      if (typeof _ret === \"object\") return _ret.v;\n    }\n\n    return null;\n  };\n\n  var activeItem = findNode(data);\n  nextItems.push(data);\n\n  if (activeItem) {\n    nextPathItems.push(activeItem.active);\n  }\n  /**\n   * 如果是异步更新 data 后，获取到的一个 selectNodeValue，则不更新 activePaths\n   * 但是需要更新 items， 因为这里的目的就是把异步更新后的的数据展示出来\n   */\n\n\n  var cascadePathItems = nextPathItems.reverse();\n\n  if (newChildren) {\n    return {\n      items: [].concat(nextItems.reverse(), [newChildren]),\n      tempActivePaths: cascadePathItems\n    };\n  }\n\n  return {\n    items: nextItems.reverse(),\n    tempActivePaths: null,\n    activePaths: cascadePathItems\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}