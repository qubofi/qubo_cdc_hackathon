{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ownerDocument, getContainer, on } from 'dom-lib';\nimport positionUtils from './positionUtils';\nimport shallowEqual from '../utils/shallowEqual';\nimport getDOMNode from '../utils/getDOMNode';\n\nvar Position = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Position, _React$Component);\n\n  function Position(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.utils = null;\n    _this.lastTarget = false;\n    _this.needsFlush = null;\n    _this.container = null;\n    _this.containerScrollListener = null;\n    _this.childRef = void 0;\n\n    _this.updatePosition = function (placementChanged) {\n      if (placementChanged === void 0) {\n        placementChanged = true;\n      }\n\n      var target = _this.getTargetSafe();\n\n      var shouldUpdatePosition = _this.props.shouldUpdatePosition;\n      /**\n       * 如果 target 没有变化，同时不允许更新位置，placement 位置也没有改变，则返回\n       */\n\n      if (target === _this.lastTarget && !shouldUpdatePosition && !placementChanged) {\n        return;\n      }\n\n      _this.lastTarget = target;\n\n      if (!target) {\n        _this.setState({\n          positionLeft: 0,\n          positionTop: 0,\n          arrowOffsetLeft: null,\n          arrowOffsetTop: null\n        });\n\n        return;\n      }\n\n      var overlay = getDOMNode(_assertThisInitialized(_this));\n      var container = getContainer(_this.props.container, ownerDocument(_assertThisInitialized(_this)).body);\n\n      var nextPosition = _this.utils.calcOverlayPosition(overlay, target, container);\n\n      _this.container = container;\n\n      _this.setState(nextPosition);\n    };\n\n    _this.state = {\n      positionLeft: 0,\n      positionTop: 0,\n      arrowOffsetLeft: null,\n      arrowOffsetTop: null\n    };\n    _this.utils = positionUtils({\n      placement: props.placement,\n      preventOverflow: props.preventOverflow,\n      padding: props.containerPadding\n    });\n    _this.childRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = Position.prototype;\n\n  _proto.getHTMLElement = function getHTMLElement() {\n    /**\n     * findDOMNode is deprecated in StrictMode.\n     * Replace findDOMNode with ref. Provided for `Transition` calls.\n     * https://fb.me/react-strict-mode-find-node\n     */\n    return getDOMNode(this.childRef.current);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updatePosition(false);\n\n    if (this.container && this.props.preventOverflow) {\n      this.containerScrollListener = on(this.container.tagName === 'BODY' ? window : this.container, 'scroll', this.updatePosition);\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    if (!shallowEqual(nextProps, this.props)) {\n      this.needsFlush = true;\n      return true;\n    }\n\n    if (!shallowEqual(nextState, this.state)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.needsFlush) {\n      this.needsFlush = false;\n      this.updatePosition(prevProps.placement !== this.props.placement);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this$containerScroll;\n\n    this.lastTarget = null;\n    (_this$containerScroll = this.containerScrollListener) === null || _this$containerScroll === void 0 ? void 0 : _this$containerScroll.off();\n  };\n\n  _proto.getTargetSafe = function getTargetSafe() {\n    var target = this.props.target;\n\n    if (!target) {\n      return null;\n    }\n\n    var targetSafe = target(this.props);\n\n    if (!targetSafe) {\n      return null;\n    }\n\n    return targetSafe;\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        className = _this$props.className,\n        rest = _objectWithoutPropertiesLoose(_this$props, [\"children\", \"className\"]);\n\n    var _this$state = this.state,\n        positionLeft = _this$state.positionLeft,\n        positionTop = _this$state.positionTop,\n        positionClassName = _this$state.positionClassName,\n        arrowPosition = _objectWithoutPropertiesLoose(_this$state, [\"positionLeft\", \"positionTop\", \"positionClassName\"]);\n\n    if (typeof children === 'function') {\n      return children({\n        className: classNames(className, positionClassName),\n        left: positionLeft,\n        top: positionTop\n      }, this.childRef);\n    }\n\n    var child = React.Children.only(children);\n    return React.cloneElement(child, _extends({}, _omit(rest, ['target', 'container', 'containerPadding', 'preventOverflow']), {}, arrowPosition, {\n      positionLeft: positionLeft,\n      positionTop: positionTop,\n      className: classNames(className, positionClassName, child.props.className),\n      htmlElementRef: this.childRef,\n      style: _extends({}, child.props.style, {\n        left: positionLeft,\n        top: positionTop\n      })\n    }));\n  };\n\n  return Position;\n}(React.Component);\n\nPosition.displayName = 'Position';\nPosition.defaultProps = {\n  containerPadding: 0,\n  placement: 'right',\n  shouldUpdatePosition: false\n};\nexport default Position;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_assertThisInitialized","_inheritsLoose","_omit","React","classNames","ownerDocument","getContainer","on","positionUtils","shallowEqual","getDOMNode","Position","_React$Component","props","_this","call","utils","lastTarget","needsFlush","container","containerScrollListener","childRef","updatePosition","placementChanged","target","getTargetSafe","shouldUpdatePosition","setState","positionLeft","positionTop","arrowOffsetLeft","arrowOffsetTop","overlay","body","nextPosition","calcOverlayPosition","state","placement","preventOverflow","padding","containerPadding","createRef","_proto","prototype","getHTMLElement","current","componentDidMount","tagName","window","shouldComponentUpdate","nextProps","nextState","componentDidUpdate","prevProps","componentWillUnmount","_this$containerScroll","off","targetSafe","render","_this$props","children","className","rest","_this$state","positionClassName","arrowPosition","left","top","child","Children","only","cloneElement","htmlElementRef","style","Component","displayName","defaultProps"],"sources":["/Users/lixupeng/Local-Work/frontend/apps/dashboard/node_modules/rsuite/es/Overlay/Position.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ownerDocument, getContainer, on } from 'dom-lib';\nimport positionUtils from './positionUtils';\nimport shallowEqual from '../utils/shallowEqual';\nimport getDOMNode from '../utils/getDOMNode';\n\nvar Position =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Position, _React$Component);\n\n  function Position(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.utils = null;\n    _this.lastTarget = false;\n    _this.needsFlush = null;\n    _this.container = null;\n    _this.containerScrollListener = null;\n    _this.childRef = void 0;\n\n    _this.updatePosition = function (placementChanged) {\n      if (placementChanged === void 0) {\n        placementChanged = true;\n      }\n\n      var target = _this.getTargetSafe();\n\n      var shouldUpdatePosition = _this.props.shouldUpdatePosition;\n      /**\n       * 如果 target 没有变化，同时不允许更新位置，placement 位置也没有改变，则返回\n       */\n\n      if (target === _this.lastTarget && !shouldUpdatePosition && !placementChanged) {\n        return;\n      }\n\n      _this.lastTarget = target;\n\n      if (!target) {\n        _this.setState({\n          positionLeft: 0,\n          positionTop: 0,\n          arrowOffsetLeft: null,\n          arrowOffsetTop: null\n        });\n\n        return;\n      }\n\n      var overlay = getDOMNode(_assertThisInitialized(_this));\n      var container = getContainer(_this.props.container, ownerDocument(_assertThisInitialized(_this)).body);\n\n      var nextPosition = _this.utils.calcOverlayPosition(overlay, target, container);\n\n      _this.container = container;\n\n      _this.setState(nextPosition);\n    };\n\n    _this.state = {\n      positionLeft: 0,\n      positionTop: 0,\n      arrowOffsetLeft: null,\n      arrowOffsetTop: null\n    };\n    _this.utils = positionUtils({\n      placement: props.placement,\n      preventOverflow: props.preventOverflow,\n      padding: props.containerPadding\n    });\n    _this.childRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = Position.prototype;\n\n  _proto.getHTMLElement = function getHTMLElement() {\n    /**\n     * findDOMNode is deprecated in StrictMode.\n     * Replace findDOMNode with ref. Provided for `Transition` calls.\n     * https://fb.me/react-strict-mode-find-node\n     */\n    return getDOMNode(this.childRef.current);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updatePosition(false);\n\n    if (this.container && this.props.preventOverflow) {\n      this.containerScrollListener = on(this.container.tagName === 'BODY' ? window : this.container, 'scroll', this.updatePosition);\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    if (!shallowEqual(nextProps, this.props)) {\n      this.needsFlush = true;\n      return true;\n    }\n\n    if (!shallowEqual(nextState, this.state)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.needsFlush) {\n      this.needsFlush = false;\n      this.updatePosition(prevProps.placement !== this.props.placement);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this$containerScroll;\n\n    this.lastTarget = null;\n    (_this$containerScroll = this.containerScrollListener) === null || _this$containerScroll === void 0 ? void 0 : _this$containerScroll.off();\n  };\n\n  _proto.getTargetSafe = function getTargetSafe() {\n    var target = this.props.target;\n\n    if (!target) {\n      return null;\n    }\n\n    var targetSafe = target(this.props);\n\n    if (!targetSafe) {\n      return null;\n    }\n\n    return targetSafe;\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        className = _this$props.className,\n        rest = _objectWithoutPropertiesLoose(_this$props, [\"children\", \"className\"]);\n\n    var _this$state = this.state,\n        positionLeft = _this$state.positionLeft,\n        positionTop = _this$state.positionTop,\n        positionClassName = _this$state.positionClassName,\n        arrowPosition = _objectWithoutPropertiesLoose(_this$state, [\"positionLeft\", \"positionTop\", \"positionClassName\"]);\n\n    if (typeof children === 'function') {\n      return children({\n        className: classNames(className, positionClassName),\n        left: positionLeft,\n        top: positionTop\n      }, this.childRef);\n    }\n\n    var child = React.Children.only(children);\n    return React.cloneElement(child, _extends({}, _omit(rest, ['target', 'container', 'containerPadding', 'preventOverflow']), {}, arrowPosition, {\n      positionLeft: positionLeft,\n      positionTop: positionTop,\n      className: classNames(className, positionClassName, child.props.className),\n      htmlElementRef: this.childRef,\n      style: _extends({}, child.props.style, {\n        left: positionLeft,\n        top: positionTop\n      })\n    }));\n  };\n\n  return Position;\n}(React.Component);\n\nPosition.displayName = 'Position';\nPosition.defaultProps = {\n  containerPadding: 0,\n  placement: 'right',\n  shouldUpdatePosition: false\n};\nexport default Position;"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,sBAAP,MAAmC,kDAAnC;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,aAAT,EAAwBC,YAAxB,EAAsCC,EAAtC,QAAgD,SAAhD;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;;AAEA,IAAIC,QAAQ,GACZ,aACA,UAAUC,gBAAV,EAA4B;EAC1BX,cAAc,CAACU,QAAD,EAAWC,gBAAX,CAAd;;EAEA,SAASD,QAAT,CAAkBE,KAAlB,EAAyB;IACvB,IAAIC,KAAJ;;IAEAA,KAAK,GAAGF,gBAAgB,CAACG,IAAjB,CAAsB,IAAtB,EAA4BF,KAA5B,KAAsC,IAA9C;IACAC,KAAK,CAACE,KAAN,GAAc,IAAd;IACAF,KAAK,CAACG,UAAN,GAAmB,KAAnB;IACAH,KAAK,CAACI,UAAN,GAAmB,IAAnB;IACAJ,KAAK,CAACK,SAAN,GAAkB,IAAlB;IACAL,KAAK,CAACM,uBAAN,GAAgC,IAAhC;IACAN,KAAK,CAACO,QAAN,GAAiB,KAAK,CAAtB;;IAEAP,KAAK,CAACQ,cAAN,GAAuB,UAAUC,gBAAV,EAA4B;MACjD,IAAIA,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;QAC/BA,gBAAgB,GAAG,IAAnB;MACD;;MAED,IAAIC,MAAM,GAAGV,KAAK,CAACW,aAAN,EAAb;;MAEA,IAAIC,oBAAoB,GAAGZ,KAAK,CAACD,KAAN,CAAYa,oBAAvC;MACA;AACN;AACA;;MAEM,IAAIF,MAAM,KAAKV,KAAK,CAACG,UAAjB,IAA+B,CAACS,oBAAhC,IAAwD,CAACH,gBAA7D,EAA+E;QAC7E;MACD;;MAEDT,KAAK,CAACG,UAAN,GAAmBO,MAAnB;;MAEA,IAAI,CAACA,MAAL,EAAa;QACXV,KAAK,CAACa,QAAN,CAAe;UACbC,YAAY,EAAE,CADD;UAEbC,WAAW,EAAE,CAFA;UAGbC,eAAe,EAAE,IAHJ;UAIbC,cAAc,EAAE;QAJH,CAAf;;QAOA;MACD;;MAED,IAAIC,OAAO,GAAGtB,UAAU,CAACV,sBAAsB,CAACc,KAAD,CAAvB,CAAxB;MACA,IAAIK,SAAS,GAAGb,YAAY,CAACQ,KAAK,CAACD,KAAN,CAAYM,SAAb,EAAwBd,aAAa,CAACL,sBAAsB,CAACc,KAAD,CAAvB,CAAb,CAA6CmB,IAArE,CAA5B;;MAEA,IAAIC,YAAY,GAAGpB,KAAK,CAACE,KAAN,CAAYmB,mBAAZ,CAAgCH,OAAhC,EAAyCR,MAAzC,EAAiDL,SAAjD,CAAnB;;MAEAL,KAAK,CAACK,SAAN,GAAkBA,SAAlB;;MAEAL,KAAK,CAACa,QAAN,CAAeO,YAAf;IACD,CArCD;;IAuCApB,KAAK,CAACsB,KAAN,GAAc;MACZR,YAAY,EAAE,CADF;MAEZC,WAAW,EAAE,CAFD;MAGZC,eAAe,EAAE,IAHL;MAIZC,cAAc,EAAE;IAJJ,CAAd;IAMAjB,KAAK,CAACE,KAAN,GAAcR,aAAa,CAAC;MAC1B6B,SAAS,EAAExB,KAAK,CAACwB,SADS;MAE1BC,eAAe,EAAEzB,KAAK,CAACyB,eAFG;MAG1BC,OAAO,EAAE1B,KAAK,CAAC2B;IAHW,CAAD,CAA3B;IAKA1B,KAAK,CAACO,QAAN,GAAiBlB,KAAK,CAACsC,SAAN,EAAjB;IACA,OAAO3B,KAAP;EACD;;EAED,IAAI4B,MAAM,GAAG/B,QAAQ,CAACgC,SAAtB;;EAEAD,MAAM,CAACE,cAAP,GAAwB,SAASA,cAAT,GAA0B;IAChD;AACJ;AACA;AACA;AACA;IACI,OAAOlC,UAAU,CAAC,KAAKW,QAAL,CAAcwB,OAAf,CAAjB;EACD,CAPD;;EASAH,MAAM,CAACI,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;IACtD,KAAKxB,cAAL,CAAoB,KAApB;;IAEA,IAAI,KAAKH,SAAL,IAAkB,KAAKN,KAAL,CAAWyB,eAAjC,EAAkD;MAChD,KAAKlB,uBAAL,GAA+Bb,EAAE,CAAC,KAAKY,SAAL,CAAe4B,OAAf,KAA2B,MAA3B,GAAoCC,MAApC,GAA6C,KAAK7B,SAAnD,EAA8D,QAA9D,EAAwE,KAAKG,cAA7E,CAAjC;IACD;EACF,CAND;;EAQAoB,MAAM,CAACO,qBAAP,GAA+B,SAASA,qBAAT,CAA+BC,SAA/B,EAA0CC,SAA1C,EAAqD;IAClF,IAAI,CAAC1C,YAAY,CAACyC,SAAD,EAAY,KAAKrC,KAAjB,CAAjB,EAA0C;MACxC,KAAKK,UAAL,GAAkB,IAAlB;MACA,OAAO,IAAP;IACD;;IAED,IAAI,CAACT,YAAY,CAAC0C,SAAD,EAAY,KAAKf,KAAjB,CAAjB,EAA0C;MACxC,OAAO,IAAP;IACD;;IAED,OAAO,KAAP;EACD,CAXD;;EAaAM,MAAM,CAACU,kBAAP,GAA4B,SAASA,kBAAT,CAA4BC,SAA5B,EAAuC;IACjE,IAAI,KAAKnC,UAAT,EAAqB;MACnB,KAAKA,UAAL,GAAkB,KAAlB;MACA,KAAKI,cAAL,CAAoB+B,SAAS,CAAChB,SAAV,KAAwB,KAAKxB,KAAL,CAAWwB,SAAvD;IACD;EACF,CALD;;EAOAK,MAAM,CAACY,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;IAC5D,IAAIC,qBAAJ;;IAEA,KAAKtC,UAAL,GAAkB,IAAlB;IACA,CAACsC,qBAAqB,GAAG,KAAKnC,uBAA9B,MAA2D,IAA3D,IAAmEmC,qBAAqB,KAAK,KAAK,CAAlG,GAAsG,KAAK,CAA3G,GAA+GA,qBAAqB,CAACC,GAAtB,EAA/G;EACD,CALD;;EAOAd,MAAM,CAACjB,aAAP,GAAuB,SAASA,aAAT,GAAyB;IAC9C,IAAID,MAAM,GAAG,KAAKX,KAAL,CAAWW,MAAxB;;IAEA,IAAI,CAACA,MAAL,EAAa;MACX,OAAO,IAAP;IACD;;IAED,IAAIiC,UAAU,GAAGjC,MAAM,CAAC,KAAKX,KAAN,CAAvB;;IAEA,IAAI,CAAC4C,UAAL,EAAiB;MACf,OAAO,IAAP;IACD;;IAED,OAAOA,UAAP;EACD,CAdD;;EAgBAf,MAAM,CAACgB,MAAP,GAAgB,SAASA,MAAT,GAAkB;IAChC,IAAIC,WAAW,GAAG,KAAK9C,KAAvB;IAAA,IACI+C,QAAQ,GAAGD,WAAW,CAACC,QAD3B;IAAA,IAEIC,SAAS,GAAGF,WAAW,CAACE,SAF5B;IAAA,IAGIC,IAAI,GAAG/D,6BAA6B,CAAC4D,WAAD,EAAc,CAAC,UAAD,EAAa,WAAb,CAAd,CAHxC;;IAKA,IAAII,WAAW,GAAG,KAAK3B,KAAvB;IAAA,IACIR,YAAY,GAAGmC,WAAW,CAACnC,YAD/B;IAAA,IAEIC,WAAW,GAAGkC,WAAW,CAAClC,WAF9B;IAAA,IAGImC,iBAAiB,GAAGD,WAAW,CAACC,iBAHpC;IAAA,IAIIC,aAAa,GAAGlE,6BAA6B,CAACgE,WAAD,EAAc,CAAC,cAAD,EAAiB,aAAjB,EAAgC,mBAAhC,CAAd,CAJjD;;IAMA,IAAI,OAAOH,QAAP,KAAoB,UAAxB,EAAoC;MAClC,OAAOA,QAAQ,CAAC;QACdC,SAAS,EAAEzD,UAAU,CAACyD,SAAD,EAAYG,iBAAZ,CADP;QAEdE,IAAI,EAAEtC,YAFQ;QAGduC,GAAG,EAAEtC;MAHS,CAAD,EAIZ,KAAKR,QAJO,CAAf;IAKD;;IAED,IAAI+C,KAAK,GAAGjE,KAAK,CAACkE,QAAN,CAAeC,IAAf,CAAoBV,QAApB,CAAZ;IACA,OAAOzD,KAAK,CAACoE,YAAN,CAAmBH,KAAnB,EAA0BtE,QAAQ,CAAC,EAAD,EAAKI,KAAK,CAAC4D,IAAD,EAAO,CAAC,QAAD,EAAW,WAAX,EAAwB,kBAAxB,EAA4C,iBAA5C,CAAP,CAAV,EAAkF,EAAlF,EAAsFG,aAAtF,EAAqG;MAC5IrC,YAAY,EAAEA,YAD8H;MAE5IC,WAAW,EAAEA,WAF+H;MAG5IgC,SAAS,EAAEzD,UAAU,CAACyD,SAAD,EAAYG,iBAAZ,EAA+BI,KAAK,CAACvD,KAAN,CAAYgD,SAA3C,CAHuH;MAI5IW,cAAc,EAAE,KAAKnD,QAJuH;MAK5IoD,KAAK,EAAE3E,QAAQ,CAAC,EAAD,EAAKsE,KAAK,CAACvD,KAAN,CAAY4D,KAAjB,EAAwB;QACrCP,IAAI,EAAEtC,YAD+B;QAErCuC,GAAG,EAAEtC;MAFgC,CAAxB;IAL6H,CAArG,CAAlC,CAAP;EAUD,CA/BD;;EAiCA,OAAOlB,QAAP;AACD,CApKD,CAoKER,KAAK,CAACuE,SApKR,CAFA;;AAwKA/D,QAAQ,CAACgE,WAAT,GAAuB,UAAvB;AACAhE,QAAQ,CAACiE,YAAT,GAAwB;EACtBpC,gBAAgB,EAAE,CADI;EAEtBH,SAAS,EAAE,OAFW;EAGtBX,oBAAoB,EAAE;AAHA,CAAxB;AAKA,eAAef,QAAf"},"metadata":{},"sourceType":"module"}