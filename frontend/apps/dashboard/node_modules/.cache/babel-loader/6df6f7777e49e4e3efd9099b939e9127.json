{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isArray from \"lodash/isArray\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport List from 'react-virtualized/dist/commonjs/List';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { CellMeasurerCache, CellMeasurer } from 'react-virtualized/dist/commonjs/CellMeasurer';\nimport { polyfill } from 'react-lifecycles-compat';\nimport shallowEqual from '../utils/shallowEqual';\nimport CheckTreeNode from './CheckTreeNode';\nimport { CHECK_STATE } from '../constants';\nimport { clone, defaultProps, prefix, defaultClassPrefix, getUnhandledProps, createChainedFunction, mergeRefs } from '../utils';\nimport { PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction, shouldDisplay } from '../Picker';\nimport { isEveryChildChecked, isSomeChildChecked, isSomeNodeHasChildren, getSiblingNodeUncheckable, getEveryFisrtLevelNodeUncheckable, getUncheckableState, getFormattedTree, getDisabledState } from './utils';\nimport { compareArray, shouldShowNodeByExpanded, flattenTree, getNodeParents, hasVisibleChildren, treeDeprecatedWarning, getExpandItemValues, getExpandAll, getExpandState, getExpandWhenSearching } from '../utils/treeUtils';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes'; // default value for virtualized\n\nvar defaultHeight = 360;\nvar defaultWidth = 200;\n\nvar CheckTreePicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(CheckTreePicker, _React$Component);\n\n  function CheckTreePicker(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.menuRef = void 0;\n    _this.treeViewRef = void 0;\n    _this.positionRef = void 0;\n    _this.listRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n\n    _this.getValue = function (props) {\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      var _props2 = props,\n          value = _props2.value,\n          defaultValue = _props2.defaultValue,\n          _props2$uncheckableIt = _props2.uncheckableItemValues,\n          uncheckableItemValues = _props2$uncheckableIt === void 0 ? [] : _props2$uncheckableIt;\n\n      if (value && value.length) {\n        return value.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      if (defaultValue && defaultValue.length > 0) {\n        return defaultValue.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      return [];\n    };\n\n    _this.getElementByDataKey = function (dataKey) {\n      var ele = _this.nodeRefs[dataKey];\n\n      if (ele instanceof Element) {\n        return ele.querySelector(\".\" + _this.addTreePrefix('node-label'));\n      }\n\n      return null;\n    };\n\n    _this.getFocusableMenuItems = function () {\n      var filterData = _this.state.filterData;\n      var childrenKey = _this.props.childrenKey;\n      var items = [];\n\n      var loop = function loop(treeNodes) {\n        treeNodes.forEach(function (node) {\n          var nodeData = _extends({}, node, {}, _this.nodes[node.refKey]);\n\n          if (!getDisabledState(_this.nodes, node, _this.props) && node.visible) {\n            items.push(node);\n          }\n\n          if (node[childrenKey] && getExpandState(nodeData, _this.props)) {\n            loop(node[childrenKey]);\n          }\n        });\n      };\n\n      loop(filterData);\n      return items;\n    };\n\n    _this.nodes = {};\n    _this.activeNode = null;\n    _this.cache = new CellMeasurerCache({\n      fixedWidth: true,\n      minHeight: 20\n    });\n    _this.nodeRefs = {};\n\n    _this.bindNodeRefs = function (refKey, ref) {\n      _this.nodeRefs[refKey] = ref;\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.selectActiveItem = function (event) {\n      var _this$getActiveItem = _this.getActiveItem(),\n          nodeData = _this$getActiveItem.nodeData;\n\n      _this.handleSelect(nodeData, event);\n    };\n\n    _this.focusNextItem = function () {\n      var _node$focus;\n\n      var _this$getItemsAndActi = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi.items,\n          activeIndex = _this$getItemsAndActi.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n\n      var node = _this.getElementByDataKey(items[nextIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus = node.focus) === null || _node$focus === void 0 ? void 0 : _node$focus.call(node);\n    };\n\n    _this.focusPreviousItem = function () {\n      var _node$focus2;\n\n      var _this$getItemsAndActi2 = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi2.items,\n          activeIndex = _this$getItemsAndActi2.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var prevIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n      prevIndex = prevIndex >= 0 ? prevIndex : 0;\n\n      var node = _this.getElementByDataKey(items[prevIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus2 = node.focus) === null || _node$focus2 === void 0 ? void 0 : _node$focus2.call(node);\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.everyChildChecked = function (nodes, node) {\n      var list = [];\n      Object.keys(nodes).forEach(function (refKey) {\n        var _curNode$parentNode;\n\n        var curNode = nodes[refKey];\n\n        if (((_curNode$parentNode = curNode.parentNode) === null || _curNode$parentNode === void 0 ? void 0 : _curNode$parentNode.refKey) === node.refKey && !curNode.uncheckable) {\n          list.push(curNode);\n        }\n      });\n      return list.every(function (l) {\n        return l.check;\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.addTreePrefix = function (name) {\n      return prefix(defaultClassPrefix('check-tree'))(name);\n    };\n\n    _this.handleSelect = function (activeNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          value = _this$props.value;\n\n      var selectedValues = _this.toggleChecked(activeNode, !_this.nodes[activeNode.refKey].check);\n\n      if (!_isUndefined(value)) {\n        _this.activeNode = activeNode;\n      } else {\n        _this.unserializeLists({\n          check: selectedValues\n        });\n\n        _this.setState({\n          activeNode: activeNode,\n          selectedValues: selectedValues,\n          hasValue: !!selectedValues.length\n        });\n      }\n\n      onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(activeNode, selectedValues, event);\n    };\n\n    _this.handleToggle = function (node) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          childrenKey = _this$props2.childrenKey,\n          onExpand = _this$props2.onExpand,\n          expandItemValues = _this$props2.expandItemValues;\n\n      var nextExpandItemValues = _this.toggleExpand(node, !node.expand);\n\n      if (_isUndefined(expandItemValues)) {\n        _this.unserializeLists({\n          expand: nextExpandItemValues\n        });\n\n        _this.setState({\n          expandItemValues: nextExpandItemValues\n        });\n      }\n\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n    };\n\n    _this.handleKeyDown = function (event) {\n      onMenuKeyDown(event, {\n        down: _this.focusNextItem,\n        up: _this.focusPreviousItem,\n        enter: _this.selectActiveItem,\n        del: _this.handleClean\n      });\n    };\n\n    _this.handleToggleKeyDown = function (event) {\n      var _this$state = _this.state,\n          activeNode = _this$state.activeNode,\n          active = _this$state.active; // enter\n\n      if ((!activeNode || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.treeViewRef.current) {\n        return;\n      }\n\n      if (event.target instanceof HTMLElement) {\n        var className = event.target.className;\n\n        if (className.includes(_this.addPrefix('toggle')) || className.includes(_this.addPrefix('toggle-custom')) || className.includes(_this.addPrefix('search-bar-input'))) {\n          onMenuKeyDown(event, {\n            down: _this.focusNextItem\n          });\n        }\n      }\n    };\n\n    _this.handleSearch = function (value, event) {\n      var filterData = _this.state.filterData;\n      var _this$props3 = _this.props,\n          onSearch = _this$props3.onSearch,\n          searchKeyword = _this$props3.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData(value, filterData),\n          searchKeyword: value\n        });\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    };\n\n    _this.handleClean = function (evnet) {\n      var _this$props$onChange, _this$props4;\n\n      _this.setState({\n        selectedValues: [],\n        hasValue: false,\n        activeNode: {}\n      });\n\n      _this.unserializeLists({\n        check: []\n      });\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, [], evnet);\n    };\n\n    _this.handleOnOpen = function () {\n      var _this$props$onOpen, _this$props5;\n\n      var activeNode = _this.state.activeNode;\n\n      if (activeNode) {\n        var _node$focus3;\n\n        var node = _this.getElementByDataKey(activeNode.refKey);\n\n        node === null || node === void 0 ? void 0 : (_node$focus3 = node.focus) === null || _node$focus3 === void 0 ? void 0 : _node$focus3.call(node);\n      }\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleOnClose = function () {\n      var filterData = _this.state.filterData;\n      var _this$props6 = _this.props,\n          onClose = _this$props6.onClose,\n          searchKeyword = _this$props6.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData('', filterData),\n          searchKeyword: ''\n        });\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState({\n        active: false\n      });\n    };\n\n    _this.measureRowRenderer = function (nodes) {\n      return function (_ref) {\n        var key = _ref.key,\n            index = _ref.index,\n            style = _ref.style,\n            parent = _ref.parent;\n        var node = nodes[index];\n        return React.createElement(CellMeasurer, {\n          cache: _this.cache,\n          columnIndex: 0,\n          key: key,\n          rowIndex: index,\n          parent: parent\n        }, function () {\n          return _this.renderVirtualNode(node, {\n            key: key,\n            style: style\n          });\n        });\n      };\n    };\n\n    var _value = _props.value,\n        data = _props.data,\n        cascade = _props.cascade,\n        _childrenKey = _props.childrenKey,\n        _searchKeyword = _props.searchKeyword;\n    _this.nodes = {};\n\n    var nextValue = _this.getValue(_props);\n\n    var _nextExpandItemValues = getExpandItemValues(_props);\n\n    var nextData = [].concat(data);\n\n    _this.flattenNodes(nextData, _props);\n\n    _this.unserializeLists({\n      check: nextValue,\n      expand: _nextExpandItemValues\n    }, _props, true);\n\n    _this.state = {\n      data: data,\n      value: _value,\n      cascade: cascade,\n      hasValue: _this.hasValue(nextValue),\n      expandAll: getExpandAll(_props),\n      filterData: _this.getFilterData(_searchKeyword, nextData, _props),\n      searchKeyword: _searchKeyword || '',\n      selectedValues: nextValue,\n      expandItemValues: _this.serializeList('expand'),\n      uncheckableItemValues: _props.uncheckableItemValues,\n      isSomeNodeHasChildren: isSomeNodeHasChildren(data, _childrenKey)\n    };\n    _this.treeViewRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.listRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef(); // for test\n\n    _this.menuRef = React.createRef();\n    treeDeprecatedWarning(_props, ['expandAll']);\n    return _this;\n  }\n\n  CheckTreePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        cascade = nextProps.cascade,\n        expandAll = nextProps.expandAll,\n        searchKeyword = nextProps.searchKeyword,\n        uncheckableItemValues = nextProps.uncheckableItemValues,\n        expandItemValues = nextProps.expandItemValues;\n    var nextState = {};\n\n    if (_isArray(data) && _isArray(prevState.data) && prevState.data !== data) {\n      nextState.data = data;\n    }\n\n    if (compareArray(value, prevState.value)) {\n      nextState.value = value;\n    }\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      nextState.expandItemValues = expandItemValues;\n    }\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      nextState.uncheckableItemValues = uncheckableItemValues;\n    }\n\n    if (!_isUndefined(searchKeyword) && searchKeyword !== prevState.searchKeyword) {\n      nextState.searchKeyword = searchKeyword;\n    }\n\n    if (cascade !== prevState.cascade) {\n      nextState.cascade = cascade;\n    }\n\n    if (expandAll !== prevState.expandAll) {\n      nextState.expandAll = expandAll;\n    }\n\n    return Object.keys(nextState).length ? nextState : null;\n  };\n\n  var _proto = CheckTreePicker.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {\n    this.updateDataChange(prevState);\n    this.updateValueChange(prevState);\n    this.updateExpandItemValuesChange(prevState);\n    this.updateUncheckableItemValuesChange(prevState);\n    this.updateCascadeChange(prevState);\n    this.updateSearchKeywordChange(prevState);\n\n    if (this.listRef.current) {\n      this.listRef.current.forceUpdateGrid();\n    }\n  };\n\n  _proto.updateDataChange = function updateDataChange(prevState) {\n    var searchKeyword = this.state.searchKeyword;\n    var _this$props7 = this.props,\n        _this$props7$data = _this$props7.data,\n        data = _this$props7$data === void 0 ? [] : _this$props7$data,\n        childrenKey = _this$props7.childrenKey;\n\n    if (prevState.data !== data) {\n      var nextData = [].concat(data);\n      this.nodes = {};\n      this.flattenNodes(nextData);\n      this.unserializeLists({\n        check: this.getValue()\n      });\n      this.setState({\n        data: nextData,\n        filterData: this.getFilterData(searchKeyword, nextData),\n        isSomeNodeHasChildren: isSomeNodeHasChildren(nextData, childrenKey),\n        hasValue: this.hasValue(),\n        expandItemValues: this.serializeList('expand')\n      });\n    }\n  };\n\n  _proto.updateValueChange = function updateValueChange(prevState) {\n    var expandItemValues = this.state.expandItemValues;\n    var value = this.props.value;\n\n    if (compareArray(value, prevState.value)) {\n      this.unserializeLists({\n        check: value !== null && value !== void 0 ? value : [],\n        expand: expandItemValues\n      });\n      this.setState({\n        selectedValues: value,\n        hasValue: this.hasValue(value),\n        activeNode: value.length ? this.activeNode : null\n      });\n    }\n  };\n\n  _proto.updateExpandItemValuesChange = function updateExpandItemValuesChange(prevState) {\n    var expandItemValues = this.props.expandItemValues;\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      this.unserializeLists({\n        expand: expandItemValues\n      });\n      this.setState({\n        expandItemValues: expandItemValues\n      });\n    }\n  };\n\n  _proto.updateUncheckableItemValuesChange = function updateUncheckableItemValuesChange(prevState) {\n    var _this$state2 = this.state,\n        data = _this$state2.data,\n        selectedValues = _this$state2.selectedValues,\n        expandItemValues = _this$state2.expandItemValues;\n    var uncheckableItemValues = this.props.uncheckableItemValues;\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        hasValue: this.hasValue()\n      });\n    }\n  };\n\n  _proto.updateCascadeChange = function updateCascadeChange(prevState) {\n    var _this$state3 = this.state,\n        data = _this$state3.data,\n        selectedValues = _this$state3.selectedValues,\n        expandItemValues = _this$state3.expandItemValues;\n    var cascade = this.props.cascade; // cascade 改变时，重新初始化\n\n    if (cascade !== prevState.cascade && cascade) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        cascade: cascade\n      });\n    }\n  };\n\n  _proto.updateSearchKeywordChange = function updateSearchKeywordChange(prevState) {\n    var filterData = this.state.filterData;\n    var searchKeyword = this.props.searchKeyword;\n\n    if (!_isUndefined(searchKeyword) && prevState.searchKeyword !== searchKeyword) {\n      this.setState({\n        filterData: this.getFilterData(searchKeyword, filterData)\n      });\n    }\n  };\n\n  _proto.getNodeCheckState = function getNodeCheckState(node, cascade) {\n    var childrenKey = this.props.childrenKey;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      this.nodes[node.refKey].checkAll = false;\n      return node.check ? CHECK_STATE.CHECK : CHECK_STATE.UNCHECK;\n    }\n\n    if (isEveryChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = true;\n      this.nodes[node.refKey].check = true;\n      return CHECK_STATE.CHECK;\n    }\n\n    if (isSomeChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = false;\n      return CHECK_STATE.INDETERMINATE;\n    }\n\n    return CHECK_STATE.UNCHECK;\n  };\n\n  _proto.getFilterData = function getFilterData(searchKeyword, data, props) {\n    if (searchKeyword === void 0) {\n      searchKeyword = '';\n    }\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props3 = props,\n        labelKey = _props3.labelKey,\n        childrenKey = _props3.childrenKey,\n        searchBy = _props3.searchBy;\n\n    var setVisible = function setVisible(nodes) {\n      if (nodes === void 0) {\n        nodes = [];\n      }\n\n      return nodes.forEach(function (item) {\n        item.visible = searchBy ? searchBy(searchKeyword, item[labelKey], item) : shouldDisplay(item[labelKey], searchKeyword);\n\n        if (_isArray(item[childrenKey])) {\n          setVisible(item[childrenKey]);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n\n    setVisible(data);\n    return data;\n  };\n\n  _proto.getActiveElementOption = function getActiveElementOption(options, refKey) {\n    var childrenKey = this.props.childrenKey;\n\n    for (var i = 0; i < options.length; i += 1) {\n      var _options$i$childrenKe;\n\n      if (options[i].refKey === refKey) {\n        return options[i];\n      } else if ((_options$i$childrenKe = options[i][childrenKey]) === null || _options$i$childrenKe === void 0 ? void 0 : _options$i$childrenKe.length) {\n        var active = this.getActiveElementOption(options[i][childrenKey], refKey);\n\n        if (!_isEmpty(active)) {\n          return active;\n        }\n      }\n    }\n\n    return {};\n  };\n\n  _proto.getFlattenTreeData = function getFlattenTreeData(nodes) {\n    var _this4 = this;\n\n    var expandItemValues = this.state.expandItemValues;\n    var _this$props8 = this.props,\n        childrenKey = _this$props8.childrenKey,\n        valueKey = _this$props8.valueKey;\n    return flattenTree(nodes, childrenKey, function (node) {\n      var formatted = {};\n      var curNode = _this4.nodes[node.refKey];\n      var parentKeys = getNodeParents(curNode, 'parentNode', valueKey);\n\n      if (curNode) {\n        formatted = _extends({}, node, {\n          check: curNode.check,\n          expand: curNode.expand,\n          uncheckable: curNode.uncheckable,\n          layer: curNode.layer,\n          parentNode: curNode.parentNode,\n          showNode: shouldShowNodeByExpanded(expandItemValues, parentKeys)\n        });\n      }\n\n      return formatted;\n    });\n  };\n\n  _proto.getItemsAndActiveIndex = function getItemsAndActiveIndex() {\n    var items = this.getFocusableMenuItems();\n    var activeIndex = -1;\n    items.forEach(function (item, index) {\n      if (document.activeElement !== null) {\n        if (item.refKey === document.activeElement.getAttribute('data-key')) {\n          activeIndex = index;\n        }\n      }\n    });\n    return {\n      items: items,\n      activeIndex: activeIndex\n    };\n  };\n\n  _proto.getActiveItem = function getActiveItem() {\n    var filterData = this.state.filterData;\n    var activeItem = document.activeElement;\n\n    if (activeItem !== null) {\n      var _activeItem$dataset, _activeItem$dataset2, _this$nodes$nodeData$, _this$nodes$nodeData$2;\n\n      var key = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n      var layer = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset2 = activeItem.dataset) === null || _activeItem$dataset2 === void 0 ? void 0 : _activeItem$dataset2.layer;\n      var nodeData = this.getActiveElementOption(filterData, key);\n      nodeData.check = !((_this$nodes$nodeData$ = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$ === void 0 ? void 0 : _this$nodes$nodeData$.check);\n      nodeData.parentNode = (_this$nodes$nodeData$2 = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$2 === void 0 ? void 0 : _this$nodes$nodeData$2.parentNode;\n      return {\n        nodeData: nodeData,\n        layer: layer\n      };\n    }\n\n    return {};\n  }\n  /**\n   * 获取已选择的items，用于显示在placeholder\n   */\n  ;\n\n  _proto.getSelectedItems = function getSelectedItems(selectedValues) {\n    var _this5 = this;\n\n    var valueKey = this.props.valueKey;\n    var checkItems = [];\n    Object.keys(this.nodes).map(function (refKey) {\n      var node = _this5.nodes[refKey];\n\n      if (selectedValues.some(function (value) {\n        return shallowEqual(node[valueKey], value);\n      })) {\n        checkItems.push(node);\n      }\n    });\n    return checkItems;\n  }\n  /**\n   * 判断传入的 value 是否存在于data 中\n   * @param {*} values\n   */\n  ;\n\n  _proto.hasValue = function hasValue(values) {\n    var _this6 = this;\n\n    if (values === void 0) {\n      values = this.state.selectedValues;\n    }\n\n    var valueKey = this.props.valueKey;\n    var selectedValues = Object.keys(this.nodes).map(function (refKey) {\n      return _this6.nodes[refKey][valueKey];\n    }).filter(function (item) {\n      return values.some(function (v) {\n        return shallowEqual(v, item);\n      });\n    });\n    return !!selectedValues.length;\n  }\n  /**\n   * 拍平数组，将tree 转换为一维对象\n   * @param {*} nodes tree data\n   * @param {*} ref 当前层级\n   */\n  ;\n\n  _proto.flattenNodes = function flattenNodes(nodes, props, ref, parentNode, layer) {\n    var _this7 = this;\n\n    if (ref === void 0) {\n      ref = '0';\n    }\n\n    if (layer === void 0) {\n      layer = 0;\n    }\n\n    var _ref2 = props || this.props,\n        labelKey = _ref2.labelKey,\n        valueKey = _ref2.valueKey,\n        childrenKey = _ref2.childrenKey;\n\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      return;\n    }\n\n    nodes.forEach(function (node, index) {\n      var _this7$nodes$refKey;\n\n      var refKey = ref + \"-\" + index;\n      node.refKey = refKey;\n      _this7.nodes[refKey] = (_this7$nodes$refKey = {\n        layer: layer\n      }, _this7$nodes$refKey[labelKey] = node[labelKey], _this7$nodes$refKey[valueKey] = node[valueKey], _this7$nodes$refKey.expand = getExpandState(node, props || _this7.props), _this7$nodes$refKey.uncheckable = getUncheckableState(node, props || _this7.props), _this7$nodes$refKey.refKey = refKey, _this7$nodes$refKey);\n\n      if (parentNode) {\n        _this7.nodes[refKey].parentNode = parentNode;\n      }\n\n      _this7.flattenNodes(node[childrenKey], props, refKey, _this7.nodes[refKey], layer + 1);\n    });\n  }\n  /**\n   * 过滤选中的 values 中不包含 uncheckableItemValues 的那些值\n   * @param {*} values\n   */\n  ;\n\n  _proto.filterSelectedValues = function filterSelectedValues(values) {\n    var _this$props$uncheckab = this.props.uncheckableItemValues,\n        uncheckableItemValues = _this$props$uncheckab === void 0 ? [] : _this$props$uncheckab;\n    return values.filter(function (value) {\n      return !uncheckableItemValues.includes(value);\n    });\n  };\n\n  _proto.serializeList = function serializeList(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      if (nodes[refKey][key]) {\n        list.push(nodes[refKey][valueKey]);\n      }\n    });\n    return list;\n  };\n\n  _proto.serializeListOnlyParent = function serializeListOnlyParent(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      var currentNode = nodes[refKey];\n\n      if (currentNode.parentNode) {\n        var _currentNode$parentNo;\n\n        var parentNode = nodes[(_currentNode$parentNo = currentNode.parentNode) === null || _currentNode$parentNo === void 0 ? void 0 : _currentNode$parentNo.refKey];\n\n        if (currentNode[key]) {\n          if (!(parentNode === null || parentNode === void 0 ? void 0 : parentNode.checkAll)) {\n            list.push(nodes[refKey][valueKey]);\n          } else if (parentNode === null || parentNode === void 0 ? void 0 : parentNode.uncheckable) {\n            list.push(nodes[refKey][valueKey]);\n          }\n        }\n      } else {\n        if (currentNode[key]) {\n          list.push(nodes[refKey][valueKey]);\n        }\n      }\n    });\n    return list;\n  };\n\n  _proto.unserializeLists = function unserializeLists(lists, nextProps, initial) {\n    var _this8 = this;\n\n    if (nextProps === void 0) {\n      nextProps = this.props;\n    }\n\n    if (initial === void 0) {\n      initial = false;\n    }\n\n    var _nextProps = nextProps,\n        valueKey = _nextProps.valueKey,\n        cascade = _nextProps.cascade,\n        _nextProps$uncheckabl = _nextProps.uncheckableItemValues,\n        uncheckableItemValues = _nextProps$uncheckabl === void 0 ? [] : _nextProps$uncheckabl;\n    var expandAll = getExpandAll(nextProps); // Reset values to false\n\n    Object.keys(this.nodes).forEach(function (refKey) {\n      Object.keys(lists).forEach(function (listKey) {\n        if (listKey === 'check') {\n          var node = _this8.nodes[refKey];\n\n          if (cascade && 'parentNode' in node) {\n            node[listKey] = node.parentNode[listKey];\n          } else {\n            node[listKey] = false;\n          }\n\n          lists[listKey].forEach(function (value) {\n            if (shallowEqual(_this8.nodes[refKey][valueKey], value) && !uncheckableItemValues.some(function (uncheckableValue) {\n              return shallowEqual(value, uncheckableValue);\n            })) {\n              _this8.nodes[refKey][listKey] = true;\n            }\n          });\n        }\n\n        if (listKey === 'expand') {\n          _this8.nodes[refKey][listKey] = false;\n\n          if (lists[listKey].length) {\n            lists[listKey].forEach(function (value) {\n              if (shallowEqual(_this8.nodes[refKey][valueKey], value)) {\n                _this8.nodes[refKey][listKey] = true;\n              }\n            });\n          } else {\n            _this8.nodes[refKey][listKey] = initial ? expandAll : false;\n          }\n        }\n      });\n    });\n  };\n\n  _proto.toggleChecked = function toggleChecked(node, isChecked) {\n    var nodes = clone(this.nodes);\n    this.toggleDownChecked(nodes, node, isChecked);\n    node.parentNode && this.toggleUpChecked(nodes, node.parentNode, isChecked);\n    var values = this.serializeListOnlyParent('check', nodes);\n    return this.filterSelectedValues(values);\n  };\n\n  _proto.toggleUpChecked = function toggleUpChecked(nodes, node, checked) {\n    var cascade = this.props.cascade;\n    var currentNode = nodes[node.refKey];\n\n    if (cascade) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (this.everyChildChecked(nodes, node)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n\n      if (node.parentNode) {\n        this.toggleUpChecked(nodes, node.parentNode, checked);\n      }\n    }\n  };\n\n  _proto.toggleDownChecked = function toggleDownChecked(nodes, node, isChecked) {\n    var _this9 = this;\n\n    var _this$props9 = this.props,\n        childrenKey = _this$props9.childrenKey,\n        cascade = _this$props9.cascade;\n    nodes[node.refKey].check = isChecked;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      nodes[node.refKey].checkAll = false;\n    } else {\n      nodes[node.refKey].checkAll = isChecked;\n      node[childrenKey].forEach(function (child) {\n        _this9.toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  };\n\n  _proto.toggleNode = function toggleNode(key, node, toggleValue) {\n    // 如果该节点处于 disabledCheckbox，则忽略该值\n    if (!node.uncheckable) {\n      this.nodes[node.refKey][key] = toggleValue;\n    }\n  };\n\n  _proto.toggleExpand = function toggleExpand(node, isExpand) {\n    var valueKey = this.props.valueKey;\n    var expandItemValues = new Set(this.serializeList('expand'));\n\n    if (isExpand) {\n      expandItemValues.add(node[valueKey]);\n    } else {\n      expandItemValues.delete(node[valueKey]);\n    }\n\n    return Array.from(expandItemValues);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props10 = this.props,\n        locale = _this$props10.locale,\n        menuStyle = _this$props10.menuStyle,\n        searchable = _this$props10.searchable,\n        renderMenu = _this$props10.renderMenu,\n        searchKeyword = _this$props10.searchKeyword,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        menuClassName = _this$props10.menuClassName,\n        menuAutoWidth = _this$props10.menuAutoWidth;\n    var keyword = !_isUndefined(searchKeyword) ? searchKeyword : this.state.searchKeyword;\n    var classes = classNames(menuClassName, this.addPrefix('check-tree-menu'));\n    var menu = this.renderCheckTree();\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: menuStyle,\n      ref: this.menuRef,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable ? React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      key: \"searchBar\",\n      onChange: this.handleSearch,\n      value: keyword\n    }) : null, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderNode = function renderNode(node, layer) {\n    var _this10 = this;\n\n    var _this$state4 = this.state,\n        activeNode = _this$state4.activeNode,\n        searchKeyword = _this$state4.searchKeyword;\n    var _this$props11 = this.props,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        childrenKey = _this$props11.childrenKey,\n        renderTreeNode = _this$props11.renderTreeNode,\n        renderTreeIcon = _this$props11.renderTreeIcon,\n        cascade = _this$props11.cascade,\n        locale = _this$props11.locale;\n    var visible = node.visible,\n        refKey = node.refKey; // 当处于搜索时，需要将所有节点都展开\n\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n\n    if (!visible) {\n      return null;\n    }\n\n    var key = _isString(node[valueKey]) || _isNumber(node[valueKey]) ? node[valueKey] : refKey;\n    var children = node[childrenKey]; // 当用户进行搜索时，hasChildren的判断要变成判断是否存在 visible 为 true 的子节点\n\n    var visibleChildren = _isUndefined(searchKeyword) || searchKeyword.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      checkState: this.getNodeCheckState(node, cascade),\n      hasChildren: visibleChildren,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n\n    if (props.hasChildren) {\n      var _classNames;\n\n      layer += 1; // 是否展开树节点且子节点不为空\n\n      var openClass = this.addTreePrefix('open');\n      var childrenClass = classNames(this.addTreePrefix('node-children'), (_classNames = {}, _classNames[openClass] = expand && visibleChildren, _classNames));\n      var nodes = children || [];\n      return React.createElement(\"div\", {\n        className: childrenClass,\n        key: key,\n        ref: this.bindNodeRefs.bind(this, refKey)\n      }, React.createElement(CheckTreeNode, props), React.createElement(\"div\", {\n        className: this.addTreePrefix('children')\n      }, nodes.map(function (child) {\n        return _this10.renderNode(child, layer);\n      })));\n    }\n\n    return React.createElement(CheckTreeNode, _extends({\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderVirtualNode = function renderVirtualNode(node, options) {\n    var _this$state5 = this.state,\n        activeNode = _this$state5.activeNode,\n        expandAll = _this$state5.expandAll,\n        searchKeyword = _this$state5.searchKeyword;\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        childrenKey = _this$props12.childrenKey,\n        renderTreeNode = _this$props12.renderTreeNode,\n        renderTreeIcon = _this$props12.renderTreeIcon,\n        cascade = _this$props12.cascade,\n        locale = _this$props12.locale;\n    var key = options.key,\n        style = options.style;\n    var layer = node.layer,\n        refKey = node.refKey,\n        showNode = node.showNode;\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n    var children = node[childrenKey];\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      children: children,\n      expandAll: expandAll,\n      checkState: this.getNodeCheckState(node, cascade),\n      parentNode: node.parentNode,\n      hasChildren: !!children,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n    return showNode && React.createElement(CheckTreeNode, _extends({\n      style: style,\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderCheckTree = function renderCheckTree() {\n    var _classNames2,\n        _this11 = this,\n        _classNames3;\n\n    var _this$state6 = this.state,\n        filterData = _this$state6.filterData,\n        isSomeNodeHasChildren = _this$state6.isSomeNodeHasChildren;\n    var _this$props13 = this.props,\n        inline = _this$props13.inline,\n        style = _this$props13.style,\n        height = _this$props13.height,\n        className = _this$props13.className,\n        onScroll = _this$props13.onScroll,\n        locale = _this$props13.locale,\n        virtualized = _this$props13.virtualized; // 树节点的层级\n\n    var layer = 0;\n    var classes = classNames(defaultClassPrefix('check-tree'), (_classNames2 = {}, _classNames2[className] = inline, _classNames2['without-children'] = !isSomeNodeHasChildren, _classNames2));\n    var formattedNodes = [];\n\n    if (!virtualized) {\n      formattedNodes = getFormattedTree(filterData, this.nodes, this.props).map(function (node) {\n        return _this11.renderNode(node, layer);\n      });\n\n      if (!formattedNodes.some(function (v) {\n        return v !== null;\n      })) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } else {\n      formattedNodes = this.getFlattenTreeData(filterData).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n\n      if (!formattedNodes.length) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } // The height of virtualized tree should be subtract the value of paddingBottom\n\n\n    var treeHeight = height - 12;\n    var treeWidth = _isUndefined(style === null || style === void 0 ? void 0 : style.width) ? defaultWidth : style.width;\n    var listStyles = inline ? _extends({\n      height: height\n    }, style) : style;\n    var treeNodesClass = classNames(this.addTreePrefix('nodes'), (_classNames3 = {}, _classNames3[this.addTreePrefix('all-uncheckable')] = getEveryFisrtLevelNodeUncheckable(this.nodes), _classNames3));\n    return React.createElement(\"div\", {\n      ref: this.treeViewRef,\n      className: classes,\n      style: listStyles,\n      onScroll: onScroll,\n      onKeyDown: this.handleKeyDown\n    }, React.createElement(\"div\", {\n      className: treeNodesClass\n    }, virtualized ? React.createElement(AutoSizer, {\n      defaultHeight: treeHeight,\n      defaultWidth: treeWidth,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref3) {\n      var height = _ref3.height,\n          width = _ref3.width;\n      return React.createElement(List, {\n        ref: _this11.listRef,\n        width: width || treeWidth,\n        height: height,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: _this11.measureRowRenderer(formattedNodes)\n      });\n    }) : formattedNodes));\n  };\n\n  _proto.render = function render() {\n    var _this$props14 = this.props,\n        cascade = _this$props14.cascade,\n        style = _this$props14.style,\n        locale = _this$props14.locale,\n        inline = _this$props14.inline,\n        disabled = _this$props14.disabled,\n        valueKey = _this$props14.valueKey,\n        labelKey = _this$props14.labelKey,\n        cleanable = _this$props14.cleanable,\n        countable = _this$props14.countable,\n        placeholder = _this$props14.placeholder,\n        toggleComponentClass = _this$props14.toggleComponentClass,\n        onExited = _this$props14.onExited,\n        onEntered = _this$props14.onEntered,\n        onClean = _this$props14.onClean,\n        renderValue = _this$props14.renderValue,\n        positionRef = _this$props14.positionRef,\n        rest = _objectWithoutPropertiesLoose(_this$props14, [\"cascade\", \"style\", \"locale\", \"inline\", \"disabled\", \"valueKey\", \"labelKey\", \"cleanable\", \"countable\", \"placeholder\", \"toggleComponentClass\", \"onExited\", \"onEntered\", \"onClean\", \"renderValue\", \"positionRef\"]);\n\n    var _this$state7 = this.state,\n        hasValue = _this$state7.hasValue,\n        selectedValues = _this$state7.selectedValues;\n\n    var hasValidValue = hasValue || selectedValues.length > 0 && _isFunction(renderValue);\n\n    var selectedItems = this.getSelectedItems(selectedValues);\n    var selectedElement = placeholder;\n    /**\n     * if value is invalid and renderValue is undefined, then using placeholder.\n     * if value is valid and renderValue is't undefined, then using renderValue()\n     */\n\n    if (selectedValues.length) {\n      if (hasValue) {\n        selectedElement = React.createElement(SelectedElement, {\n          selectedItems: selectedItems,\n          countable: countable,\n          valueKey: valueKey,\n          labelKey: labelKey,\n          prefix: this.addPrefix,\n          cascade: cascade,\n          locale: locale\n        });\n      }\n\n      if (_isFunction(renderValue)) {\n        selectedElement = renderValue(selectedValues, selectedItems, selectedElement);\n\n        if (_isNil(selectedElement)) {\n          hasValidValue = false;\n        }\n      }\n    }\n\n    var unhandled = getUnhandledProps(CheckTreePicker, rest);\n    var classes = getToggleWrapperClassName('check-tree', this.addPrefix, this.props, hasValidValue);\n\n    if (inline) {\n      return this.renderCheckTree();\n    }\n\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEntered: createChainedFunction(this.handleOnOpen, onEntered),\n      onExited: createChainedFunction(this.handleOnClose, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onKeyDown: this.handleToggleKeyDown,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValidValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || locale.placeholder)));\n  };\n\n  return CheckTreePicker;\n}(React.Component);\n\nCheckTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  cascade: PropTypes.bool,\n  countable: PropTypes.bool,\n  expandAll: PropTypes.bool,\n  searchable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  onScroll: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  searchBy: PropTypes.func\n});\nCheckTreePicker.defaultProps = _extends({}, listPickerDefaultProps, {\n  height: defaultHeight,\n  cascade: true,\n  countable: true,\n  searchable: true,\n  menuAutoWidth: true,\n  defaultValue: [],\n  uncheckableItemValues: [],\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found',\n    checkAll: 'All'\n  }\n});\npolyfill(CheckTreePicker);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(CheckTreePicker);","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isNil","_isFunction","_isNumber","_isString","_isEmpty","_isUndefined","_isArray","React","PropTypes","classNames","List","AutoSizer","CellMeasurerCache","CellMeasurer","polyfill","shallowEqual","CheckTreeNode","CHECK_STATE","clone","defaultProps","prefix","defaultClassPrefix","getUnhandledProps","createChainedFunction","mergeRefs","PickerToggle","getToggleWrapperClassName","onMenuKeyDown","MenuWrapper","SearchBar","SelectedElement","PickerToggleTrigger","createConcatChildrenFunction","shouldDisplay","isEveryChildChecked","isSomeChildChecked","isSomeNodeHasChildren","getSiblingNodeUncheckable","getEveryFisrtLevelNodeUncheckable","getUncheckableState","getFormattedTree","getDisabledState","compareArray","shouldShowNodeByExpanded","flattenTree","getNodeParents","hasVisibleChildren","treeDeprecatedWarning","getExpandItemValues","getExpandAll","getExpandState","getExpandWhenSearching","listPickerPropTypes","listPickerDefaultProps","defaultHeight","defaultWidth","CheckTreePicker","_React$Component","_props","_this","call","menuRef","treeViewRef","positionRef","listRef","triggerRef","toggleRef","getValue","props","_props2","value","defaultValue","_props2$uncheckableIt","uncheckableItemValues","length","filter","v","includes","getElementByDataKey","dataKey","ele","nodeRefs","Element","querySelector","addTreePrefix","getFocusableMenuItems","filterData","state","childrenKey","items","loop","treeNodes","forEach","node","nodeData","nodes","refKey","visible","push","activeNode","cache","fixedWidth","minHeight","bindNodeRefs","ref","getPositionInstance","current","getToggleInstance","selectActiveItem","event","_this$getActiveItem","getActiveItem","handleSelect","focusNextItem","_node$focus","_this$getItemsAndActi","getItemsAndActiveIndex","activeIndex","nextIndex","focus","focusPreviousItem","_node$focus2","_this$getItemsAndActi2","prevIndex","handleCloseDropdown","_this$triggerRef$curr","_this$triggerRef$curr2","hide","handleOpenDropdown","_this$triggerRef$curr3","_this$triggerRef$curr4","show","open","_this$handleOpenDropd","_this2","close","_this$handleCloseDrop","_this3","handleToggleDropdown","active","everyChildChecked","list","Object","keys","_curNode$parentNode","curNode","parentNode","uncheckable","every","l","check","addPrefix","name","classPrefix","_this$props","onChange","onSelect","selectedValues","toggleChecked","unserializeLists","setState","hasValue","handleToggle","_this$props2","valueKey","onExpand","expandItemValues","nextExpandItemValues","toggleExpand","expand","handleKeyDown","down","up","enter","del","handleClean","handleToggleKeyDown","_this$state","keyCode","target","HTMLElement","className","handleSearch","_this$props3","onSearch","searchKeyword","getFilterData","evnet","_this$props$onChange","_this$props4","handleOnOpen","_this$props$onOpen","_this$props5","_node$focus3","onOpen","handleOnClose","_this$props6","onClose","measureRowRenderer","_ref","key","index","style","parent","createElement","columnIndex","rowIndex","renderVirtualNode","_value","data","cascade","_childrenKey","_searchKeyword","nextValue","_nextExpandItemValues","nextData","concat","flattenNodes","expandAll","serializeList","createRef","getDerivedStateFromProps","nextProps","prevState","nextState","_proto","prototype","componentDidUpdate","_prevProps","updateDataChange","updateValueChange","updateExpandItemValuesChange","updateUncheckableItemValuesChange","updateCascadeChange","updateSearchKeywordChange","forceUpdateGrid","_this$props7","_this$props7$data","_this$state2","_this$state3","getNodeCheckState","checkAll","CHECK","UNCHECK","INDETERMINATE","_props3","labelKey","searchBy","setVisible","item","child","getActiveElementOption","options","i","_options$i$childrenKe","getFlattenTreeData","_this4","_this$props8","formatted","parentKeys","layer","showNode","document","activeElement","getAttribute","activeItem","_activeItem$dataset","_activeItem$dataset2","_this$nodes$nodeData$","_this$nodes$nodeData$2","dataset","getSelectedItems","_this5","checkItems","map","some","values","_this6","_this7","_ref2","Array","isArray","_this7$nodes$refKey","filterSelectedValues","_this$props$uncheckab","serializeListOnlyParent","currentNode","_currentNode$parentNo","lists","initial","_this8","_nextProps","_nextProps$uncheckabl","listKey","uncheckableValue","isChecked","toggleDownChecked","toggleUpChecked","checked","_this9","_this$props9","toggleNode","toggleValue","isExpand","Set","add","delete","from","renderDropdownMenu","_this$props10","locale","menuStyle","searchable","renderMenu","renderExtraFooter","menuClassName","menuAutoWidth","keyword","classes","menu","renderCheckTree","autoWidth","placeholder","searchPlaceholder","renderNode","_this10","_this$state4","_this$props11","renderTreeNode","renderTreeIcon","children","visibleChildren","label","rtl","disabled","checkState","hasChildren","allUncheckable","onTreeToggle","onRenderTreeNode","onRenderTreeIcon","_classNames","openClass","childrenClass","bind","innerRef","_this$state5","_this$props12","_classNames2","_this11","_classNames3","_this$state6","_this$props13","inline","height","onScroll","virtualized","formattedNodes","noResultsText","n","treeHeight","treeWidth","width","listStyles","treeNodesClass","onKeyDown","_ref3","rowHeight","rowCount","rowRenderer","render","_this$props14","cleanable","countable","toggleComponentClass","onExited","onEntered","onClean","renderValue","rest","_this$state7","hasValidValue","selectedItems","selectedElement","unhandled","pickerProps","speaker","componentClass","Component","propTypes","number","bool","string","defaultExpandAll","containerPadding","disabledItemValues","array","defaultExpandItemValues","func"],"sources":["/Users/lixupeng/Local-Work/frontend/apps/dashboard/node_modules/rsuite/es/CheckTreePicker/CheckTreePicker.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isNil from \"lodash/isNil\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isString from \"lodash/isString\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _isArray from \"lodash/isArray\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport List from 'react-virtualized/dist/commonjs/List';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { CellMeasurerCache, CellMeasurer } from 'react-virtualized/dist/commonjs/CellMeasurer';\nimport { polyfill } from 'react-lifecycles-compat';\nimport shallowEqual from '../utils/shallowEqual';\nimport CheckTreeNode from './CheckTreeNode';\nimport { CHECK_STATE } from '../constants';\nimport { clone, defaultProps, prefix, defaultClassPrefix, getUnhandledProps, createChainedFunction, mergeRefs } from '../utils';\nimport { PickerToggle, getToggleWrapperClassName, onMenuKeyDown, MenuWrapper, SearchBar, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction, shouldDisplay } from '../Picker';\nimport { isEveryChildChecked, isSomeChildChecked, isSomeNodeHasChildren, getSiblingNodeUncheckable, getEveryFisrtLevelNodeUncheckable, getUncheckableState, getFormattedTree, getDisabledState } from './utils';\nimport { compareArray, shouldShowNodeByExpanded, flattenTree, getNodeParents, hasVisibleChildren, treeDeprecatedWarning, getExpandItemValues, getExpandAll, getExpandState, getExpandWhenSearching } from '../utils/treeUtils';\nimport { listPickerPropTypes, listPickerDefaultProps } from '../Picker/propTypes'; // default value for virtualized\n\nvar defaultHeight = 360;\nvar defaultWidth = 200;\n\nvar CheckTreePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CheckTreePicker, _React$Component);\n\n  function CheckTreePicker(_props) {\n    var _this;\n\n    _this = _React$Component.call(this, _props) || this;\n    _this.menuRef = void 0;\n    _this.treeViewRef = void 0;\n    _this.positionRef = void 0;\n    _this.listRef = void 0;\n    _this.triggerRef = void 0;\n    _this.toggleRef = void 0;\n\n    _this.getValue = function (props) {\n      if (props === void 0) {\n        props = _this.props;\n      }\n\n      var _props2 = props,\n          value = _props2.value,\n          defaultValue = _props2.defaultValue,\n          _props2$uncheckableIt = _props2.uncheckableItemValues,\n          uncheckableItemValues = _props2$uncheckableIt === void 0 ? [] : _props2$uncheckableIt;\n\n      if (value && value.length) {\n        return value.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      if (defaultValue && defaultValue.length > 0) {\n        return defaultValue.filter(function (v) {\n          return !uncheckableItemValues.includes(v);\n        });\n      }\n\n      return [];\n    };\n\n    _this.getElementByDataKey = function (dataKey) {\n      var ele = _this.nodeRefs[dataKey];\n\n      if (ele instanceof Element) {\n        return ele.querySelector(\".\" + _this.addTreePrefix('node-label'));\n      }\n\n      return null;\n    };\n\n    _this.getFocusableMenuItems = function () {\n      var filterData = _this.state.filterData;\n      var childrenKey = _this.props.childrenKey;\n      var items = [];\n\n      var loop = function loop(treeNodes) {\n        treeNodes.forEach(function (node) {\n          var nodeData = _extends({}, node, {}, _this.nodes[node.refKey]);\n\n          if (!getDisabledState(_this.nodes, node, _this.props) && node.visible) {\n            items.push(node);\n          }\n\n          if (node[childrenKey] && getExpandState(nodeData, _this.props)) {\n            loop(node[childrenKey]);\n          }\n        });\n      };\n\n      loop(filterData);\n      return items;\n    };\n\n    _this.nodes = {};\n    _this.activeNode = null;\n    _this.cache = new CellMeasurerCache({\n      fixedWidth: true,\n      minHeight: 20\n    });\n    _this.nodeRefs = {};\n\n    _this.bindNodeRefs = function (refKey, ref) {\n      _this.nodeRefs[refKey] = ref;\n    };\n\n    _this.getPositionInstance = function () {\n      return _this.positionRef.current;\n    };\n\n    _this.getToggleInstance = function () {\n      return _this.toggleRef.current;\n    };\n\n    _this.selectActiveItem = function (event) {\n      var _this$getActiveItem = _this.getActiveItem(),\n          nodeData = _this$getActiveItem.nodeData;\n\n      _this.handleSelect(nodeData, event);\n    };\n\n    _this.focusNextItem = function () {\n      var _node$focus;\n\n      var _this$getItemsAndActi = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi.items,\n          activeIndex = _this$getItemsAndActi.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n\n      var node = _this.getElementByDataKey(items[nextIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus = node.focus) === null || _node$focus === void 0 ? void 0 : _node$focus.call(node);\n    };\n\n    _this.focusPreviousItem = function () {\n      var _node$focus2;\n\n      var _this$getItemsAndActi2 = _this.getItemsAndActiveIndex(),\n          items = _this$getItemsAndActi2.items,\n          activeIndex = _this$getItemsAndActi2.activeIndex;\n\n      if (items.length === 0) {\n        return;\n      }\n\n      var prevIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n      prevIndex = prevIndex >= 0 ? prevIndex : 0;\n\n      var node = _this.getElementByDataKey(items[prevIndex].refKey);\n\n      node === null || node === void 0 ? void 0 : (_node$focus2 = node.focus) === null || _node$focus2 === void 0 ? void 0 : _node$focus2.call(node);\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleToggleDropdown = function () {\n      var active = _this.state.active;\n\n      if (active) {\n        _this.handleCloseDropdown();\n\n        return;\n      }\n\n      _this.handleOpenDropdown();\n    };\n\n    _this.everyChildChecked = function (nodes, node) {\n      var list = [];\n      Object.keys(nodes).forEach(function (refKey) {\n        var _curNode$parentNode;\n\n        var curNode = nodes[refKey];\n\n        if (((_curNode$parentNode = curNode.parentNode) === null || _curNode$parentNode === void 0 ? void 0 : _curNode$parentNode.refKey) === node.refKey && !curNode.uncheckable) {\n          list.push(curNode);\n        }\n      });\n      return list.every(function (l) {\n        return l.check;\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.addTreePrefix = function (name) {\n      return prefix(defaultClassPrefix('check-tree'))(name);\n    };\n\n    _this.handleSelect = function (activeNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          value = _this$props.value;\n\n      var selectedValues = _this.toggleChecked(activeNode, !_this.nodes[activeNode.refKey].check);\n\n      if (!_isUndefined(value)) {\n        _this.activeNode = activeNode;\n      } else {\n        _this.unserializeLists({\n          check: selectedValues\n        });\n\n        _this.setState({\n          activeNode: activeNode,\n          selectedValues: selectedValues,\n          hasValue: !!selectedValues.length\n        });\n      }\n\n      onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(activeNode, selectedValues, event);\n    };\n\n    _this.handleToggle = function (node) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          childrenKey = _this$props2.childrenKey,\n          onExpand = _this$props2.onExpand,\n          expandItemValues = _this$props2.expandItemValues;\n\n      var nextExpandItemValues = _this.toggleExpand(node, !node.expand);\n\n      if (_isUndefined(expandItemValues)) {\n        _this.unserializeLists({\n          expand: nextExpandItemValues\n        });\n\n        _this.setState({\n          expandItemValues: nextExpandItemValues\n        });\n      }\n\n      onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }));\n    };\n\n    _this.handleKeyDown = function (event) {\n      onMenuKeyDown(event, {\n        down: _this.focusNextItem,\n        up: _this.focusPreviousItem,\n        enter: _this.selectActiveItem,\n        del: _this.handleClean\n      });\n    };\n\n    _this.handleToggleKeyDown = function (event) {\n      var _this$state = _this.state,\n          activeNode = _this$state.activeNode,\n          active = _this$state.active; // enter\n\n      if ((!activeNode || !active) && event.keyCode === 13) {\n        _this.handleToggleDropdown();\n      } // delete\n\n\n      if (event.keyCode === 8) {\n        _this.handleClean(event);\n      }\n\n      if (!_this.treeViewRef.current) {\n        return;\n      }\n\n      if (event.target instanceof HTMLElement) {\n        var className = event.target.className;\n\n        if (className.includes(_this.addPrefix('toggle')) || className.includes(_this.addPrefix('toggle-custom')) || className.includes(_this.addPrefix('search-bar-input'))) {\n          onMenuKeyDown(event, {\n            down: _this.focusNextItem\n          });\n        }\n      }\n    };\n\n    _this.handleSearch = function (value, event) {\n      var filterData = _this.state.filterData;\n      var _this$props3 = _this.props,\n          onSearch = _this$props3.onSearch,\n          searchKeyword = _this$props3.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData(value, filterData),\n          searchKeyword: value\n        });\n      }\n\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n    };\n\n    _this.handleClean = function (evnet) {\n      var _this$props$onChange, _this$props4;\n\n      _this.setState({\n        selectedValues: [],\n        hasValue: false,\n        activeNode: {}\n      });\n\n      _this.unserializeLists({\n        check: []\n      });\n\n      (_this$props$onChange = (_this$props4 = _this.props).onChange) === null || _this$props$onChange === void 0 ? void 0 : _this$props$onChange.call(_this$props4, [], evnet);\n    };\n\n    _this.handleOnOpen = function () {\n      var _this$props$onOpen, _this$props5;\n\n      var activeNode = _this.state.activeNode;\n\n      if (activeNode) {\n        var _node$focus3;\n\n        var node = _this.getElementByDataKey(activeNode.refKey);\n\n        node === null || node === void 0 ? void 0 : (_node$focus3 = node.focus) === null || _node$focus3 === void 0 ? void 0 : _node$focus3.call(node);\n      }\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleOnClose = function () {\n      var filterData = _this.state.filterData;\n      var _this$props6 = _this.props,\n          onClose = _this$props6.onClose,\n          searchKeyword = _this$props6.searchKeyword;\n\n      if (_isUndefined(searchKeyword)) {\n        _this.setState({\n          filterData: _this.getFilterData('', filterData),\n          searchKeyword: ''\n        });\n      }\n\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n\n      _this.setState({\n        active: false\n      });\n    };\n\n    _this.measureRowRenderer = function (nodes) {\n      return function (_ref) {\n        var key = _ref.key,\n            index = _ref.index,\n            style = _ref.style,\n            parent = _ref.parent;\n        var node = nodes[index];\n        return React.createElement(CellMeasurer, {\n          cache: _this.cache,\n          columnIndex: 0,\n          key: key,\n          rowIndex: index,\n          parent: parent\n        }, function () {\n          return _this.renderVirtualNode(node, {\n            key: key,\n            style: style\n          });\n        });\n      };\n    };\n\n    var _value = _props.value,\n        data = _props.data,\n        cascade = _props.cascade,\n        _childrenKey = _props.childrenKey,\n        _searchKeyword = _props.searchKeyword;\n    _this.nodes = {};\n\n    var nextValue = _this.getValue(_props);\n\n    var _nextExpandItemValues = getExpandItemValues(_props);\n\n    var nextData = [].concat(data);\n\n    _this.flattenNodes(nextData, _props);\n\n    _this.unserializeLists({\n      check: nextValue,\n      expand: _nextExpandItemValues\n    }, _props, true);\n\n    _this.state = {\n      data: data,\n      value: _value,\n      cascade: cascade,\n      hasValue: _this.hasValue(nextValue),\n      expandAll: getExpandAll(_props),\n      filterData: _this.getFilterData(_searchKeyword, nextData, _props),\n      searchKeyword: _searchKeyword || '',\n      selectedValues: nextValue,\n      expandItemValues: _this.serializeList('expand'),\n      uncheckableItemValues: _props.uncheckableItemValues,\n      isSomeNodeHasChildren: isSomeNodeHasChildren(data, _childrenKey)\n    };\n    _this.treeViewRef = React.createRef();\n    _this.positionRef = React.createRef();\n    _this.listRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    _this.toggleRef = React.createRef(); // for test\n\n    _this.menuRef = React.createRef();\n    treeDeprecatedWarning(_props, ['expandAll']);\n    return _this;\n  }\n\n  CheckTreePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        cascade = nextProps.cascade,\n        expandAll = nextProps.expandAll,\n        searchKeyword = nextProps.searchKeyword,\n        uncheckableItemValues = nextProps.uncheckableItemValues,\n        expandItemValues = nextProps.expandItemValues;\n    var nextState = {};\n\n    if (_isArray(data) && _isArray(prevState.data) && prevState.data !== data) {\n      nextState.data = data;\n    }\n\n    if (compareArray(value, prevState.value)) {\n      nextState.value = value;\n    }\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      nextState.expandItemValues = expandItemValues;\n    }\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      nextState.uncheckableItemValues = uncheckableItemValues;\n    }\n\n    if (!_isUndefined(searchKeyword) && searchKeyword !== prevState.searchKeyword) {\n      nextState.searchKeyword = searchKeyword;\n    }\n\n    if (cascade !== prevState.cascade) {\n      nextState.cascade = cascade;\n    }\n\n    if (expandAll !== prevState.expandAll) {\n      nextState.expandAll = expandAll;\n    }\n\n    return Object.keys(nextState).length ? nextState : null;\n  };\n\n  var _proto = CheckTreePicker.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {\n    this.updateDataChange(prevState);\n    this.updateValueChange(prevState);\n    this.updateExpandItemValuesChange(prevState);\n    this.updateUncheckableItemValuesChange(prevState);\n    this.updateCascadeChange(prevState);\n    this.updateSearchKeywordChange(prevState);\n\n    if (this.listRef.current) {\n      this.listRef.current.forceUpdateGrid();\n    }\n  };\n\n  _proto.updateDataChange = function updateDataChange(prevState) {\n    var searchKeyword = this.state.searchKeyword;\n    var _this$props7 = this.props,\n        _this$props7$data = _this$props7.data,\n        data = _this$props7$data === void 0 ? [] : _this$props7$data,\n        childrenKey = _this$props7.childrenKey;\n\n    if (prevState.data !== data) {\n      var nextData = [].concat(data);\n      this.nodes = {};\n      this.flattenNodes(nextData);\n      this.unserializeLists({\n        check: this.getValue()\n      });\n      this.setState({\n        data: nextData,\n        filterData: this.getFilterData(searchKeyword, nextData),\n        isSomeNodeHasChildren: isSomeNodeHasChildren(nextData, childrenKey),\n        hasValue: this.hasValue(),\n        expandItemValues: this.serializeList('expand')\n      });\n    }\n  };\n\n  _proto.updateValueChange = function updateValueChange(prevState) {\n    var expandItemValues = this.state.expandItemValues;\n    var value = this.props.value;\n\n    if (compareArray(value, prevState.value)) {\n      this.unserializeLists({\n        check: value !== null && value !== void 0 ? value : [],\n        expand: expandItemValues\n      });\n      this.setState({\n        selectedValues: value,\n        hasValue: this.hasValue(value),\n        activeNode: value.length ? this.activeNode : null\n      });\n    }\n  };\n\n  _proto.updateExpandItemValuesChange = function updateExpandItemValuesChange(prevState) {\n    var expandItemValues = this.props.expandItemValues;\n\n    if (compareArray(expandItemValues, prevState.expandItemValues) && _isArray(expandItemValues)) {\n      this.unserializeLists({\n        expand: expandItemValues\n      });\n      this.setState({\n        expandItemValues: expandItemValues\n      });\n    }\n  };\n\n  _proto.updateUncheckableItemValuesChange = function updateUncheckableItemValuesChange(prevState) {\n    var _this$state2 = this.state,\n        data = _this$state2.data,\n        selectedValues = _this$state2.selectedValues,\n        expandItemValues = _this$state2.expandItemValues;\n    var uncheckableItemValues = this.props.uncheckableItemValues;\n\n    if (compareArray(uncheckableItemValues, prevState.uncheckableItemValues) && _isArray(uncheckableItemValues)) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        hasValue: this.hasValue()\n      });\n    }\n  };\n\n  _proto.updateCascadeChange = function updateCascadeChange(prevState) {\n    var _this$state3 = this.state,\n        data = _this$state3.data,\n        selectedValues = _this$state3.selectedValues,\n        expandItemValues = _this$state3.expandItemValues;\n    var cascade = this.props.cascade; // cascade 改变时，重新初始化\n\n    if (cascade !== prevState.cascade && cascade) {\n      this.flattenNodes(data);\n      this.unserializeLists({\n        check: selectedValues,\n        expand: expandItemValues\n      });\n      this.setState({\n        cascade: cascade\n      });\n    }\n  };\n\n  _proto.updateSearchKeywordChange = function updateSearchKeywordChange(prevState) {\n    var filterData = this.state.filterData;\n    var searchKeyword = this.props.searchKeyword;\n\n    if (!_isUndefined(searchKeyword) && prevState.searchKeyword !== searchKeyword) {\n      this.setState({\n        filterData: this.getFilterData(searchKeyword, filterData)\n      });\n    }\n  };\n\n  _proto.getNodeCheckState = function getNodeCheckState(node, cascade) {\n    var childrenKey = this.props.childrenKey;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      this.nodes[node.refKey].checkAll = false;\n      return node.check ? CHECK_STATE.CHECK : CHECK_STATE.UNCHECK;\n    }\n\n    if (isEveryChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = true;\n      this.nodes[node.refKey].check = true;\n      return CHECK_STATE.CHECK;\n    }\n\n    if (isSomeChildChecked(node, this.nodes, this.props)) {\n      this.nodes[node.refKey].checkAll = false;\n      return CHECK_STATE.INDETERMINATE;\n    }\n\n    return CHECK_STATE.UNCHECK;\n  };\n\n  _proto.getFilterData = function getFilterData(searchKeyword, data, props) {\n    if (searchKeyword === void 0) {\n      searchKeyword = '';\n    }\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props3 = props,\n        labelKey = _props3.labelKey,\n        childrenKey = _props3.childrenKey,\n        searchBy = _props3.searchBy;\n\n    var setVisible = function setVisible(nodes) {\n      if (nodes === void 0) {\n        nodes = [];\n      }\n\n      return nodes.forEach(function (item) {\n        item.visible = searchBy ? searchBy(searchKeyword, item[labelKey], item) : shouldDisplay(item[labelKey], searchKeyword);\n\n        if (_isArray(item[childrenKey])) {\n          setVisible(item[childrenKey]);\n          item[childrenKey].forEach(function (child) {\n            if (child.visible) {\n              item.visible = child.visible;\n            }\n          });\n        }\n      });\n    };\n\n    setVisible(data);\n    return data;\n  };\n\n  _proto.getActiveElementOption = function getActiveElementOption(options, refKey) {\n    var childrenKey = this.props.childrenKey;\n\n    for (var i = 0; i < options.length; i += 1) {\n      var _options$i$childrenKe;\n\n      if (options[i].refKey === refKey) {\n        return options[i];\n      } else if ((_options$i$childrenKe = options[i][childrenKey]) === null || _options$i$childrenKe === void 0 ? void 0 : _options$i$childrenKe.length) {\n        var active = this.getActiveElementOption(options[i][childrenKey], refKey);\n\n        if (!_isEmpty(active)) {\n          return active;\n        }\n      }\n    }\n\n    return {};\n  };\n\n  _proto.getFlattenTreeData = function getFlattenTreeData(nodes) {\n    var _this4 = this;\n\n    var expandItemValues = this.state.expandItemValues;\n    var _this$props8 = this.props,\n        childrenKey = _this$props8.childrenKey,\n        valueKey = _this$props8.valueKey;\n    return flattenTree(nodes, childrenKey, function (node) {\n      var formatted = {};\n      var curNode = _this4.nodes[node.refKey];\n      var parentKeys = getNodeParents(curNode, 'parentNode', valueKey);\n\n      if (curNode) {\n        formatted = _extends({}, node, {\n          check: curNode.check,\n          expand: curNode.expand,\n          uncheckable: curNode.uncheckable,\n          layer: curNode.layer,\n          parentNode: curNode.parentNode,\n          showNode: shouldShowNodeByExpanded(expandItemValues, parentKeys)\n        });\n      }\n\n      return formatted;\n    });\n  };\n\n  _proto.getItemsAndActiveIndex = function getItemsAndActiveIndex() {\n    var items = this.getFocusableMenuItems();\n    var activeIndex = -1;\n    items.forEach(function (item, index) {\n      if (document.activeElement !== null) {\n        if (item.refKey === document.activeElement.getAttribute('data-key')) {\n          activeIndex = index;\n        }\n      }\n    });\n    return {\n      items: items,\n      activeIndex: activeIndex\n    };\n  };\n\n  _proto.getActiveItem = function getActiveItem() {\n    var filterData = this.state.filterData;\n    var activeItem = document.activeElement;\n\n    if (activeItem !== null) {\n      var _activeItem$dataset, _activeItem$dataset2, _this$nodes$nodeData$, _this$nodes$nodeData$2;\n\n      var key = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset = activeItem.dataset) === null || _activeItem$dataset === void 0 ? void 0 : _activeItem$dataset.key;\n      var layer = activeItem === null || activeItem === void 0 ? void 0 : (_activeItem$dataset2 = activeItem.dataset) === null || _activeItem$dataset2 === void 0 ? void 0 : _activeItem$dataset2.layer;\n      var nodeData = this.getActiveElementOption(filterData, key);\n      nodeData.check = !((_this$nodes$nodeData$ = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$ === void 0 ? void 0 : _this$nodes$nodeData$.check);\n      nodeData.parentNode = (_this$nodes$nodeData$2 = this.nodes[nodeData.refKey]) === null || _this$nodes$nodeData$2 === void 0 ? void 0 : _this$nodes$nodeData$2.parentNode;\n      return {\n        nodeData: nodeData,\n        layer: layer\n      };\n    }\n\n    return {};\n  }\n  /**\n   * 获取已选择的items，用于显示在placeholder\n   */\n  ;\n\n  _proto.getSelectedItems = function getSelectedItems(selectedValues) {\n    var _this5 = this;\n\n    var valueKey = this.props.valueKey;\n    var checkItems = [];\n    Object.keys(this.nodes).map(function (refKey) {\n      var node = _this5.nodes[refKey];\n\n      if (selectedValues.some(function (value) {\n        return shallowEqual(node[valueKey], value);\n      })) {\n        checkItems.push(node);\n      }\n    });\n    return checkItems;\n  }\n  /**\n   * 判断传入的 value 是否存在于data 中\n   * @param {*} values\n   */\n  ;\n\n  _proto.hasValue = function hasValue(values) {\n    var _this6 = this;\n\n    if (values === void 0) {\n      values = this.state.selectedValues;\n    }\n\n    var valueKey = this.props.valueKey;\n    var selectedValues = Object.keys(this.nodes).map(function (refKey) {\n      return _this6.nodes[refKey][valueKey];\n    }).filter(function (item) {\n      return values.some(function (v) {\n        return shallowEqual(v, item);\n      });\n    });\n    return !!selectedValues.length;\n  }\n  /**\n   * 拍平数组，将tree 转换为一维对象\n   * @param {*} nodes tree data\n   * @param {*} ref 当前层级\n   */\n  ;\n\n  _proto.flattenNodes = function flattenNodes(nodes, props, ref, parentNode, layer) {\n    var _this7 = this;\n\n    if (ref === void 0) {\n      ref = '0';\n    }\n\n    if (layer === void 0) {\n      layer = 0;\n    }\n\n    var _ref2 = props || this.props,\n        labelKey = _ref2.labelKey,\n        valueKey = _ref2.valueKey,\n        childrenKey = _ref2.childrenKey;\n\n    if (!Array.isArray(nodes) || nodes.length === 0) {\n      return;\n    }\n\n    nodes.forEach(function (node, index) {\n      var _this7$nodes$refKey;\n\n      var refKey = ref + \"-\" + index;\n      node.refKey = refKey;\n      _this7.nodes[refKey] = (_this7$nodes$refKey = {\n        layer: layer\n      }, _this7$nodes$refKey[labelKey] = node[labelKey], _this7$nodes$refKey[valueKey] = node[valueKey], _this7$nodes$refKey.expand = getExpandState(node, props || _this7.props), _this7$nodes$refKey.uncheckable = getUncheckableState(node, props || _this7.props), _this7$nodes$refKey.refKey = refKey, _this7$nodes$refKey);\n\n      if (parentNode) {\n        _this7.nodes[refKey].parentNode = parentNode;\n      }\n\n      _this7.flattenNodes(node[childrenKey], props, refKey, _this7.nodes[refKey], layer + 1);\n    });\n  }\n  /**\n   * 过滤选中的 values 中不包含 uncheckableItemValues 的那些值\n   * @param {*} values\n   */\n  ;\n\n  _proto.filterSelectedValues = function filterSelectedValues(values) {\n    var _this$props$uncheckab = this.props.uncheckableItemValues,\n        uncheckableItemValues = _this$props$uncheckab === void 0 ? [] : _this$props$uncheckab;\n    return values.filter(function (value) {\n      return !uncheckableItemValues.includes(value);\n    });\n  };\n\n  _proto.serializeList = function serializeList(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      if (nodes[refKey][key]) {\n        list.push(nodes[refKey][valueKey]);\n      }\n    });\n    return list;\n  };\n\n  _proto.serializeListOnlyParent = function serializeListOnlyParent(key, nodes) {\n    if (nodes === void 0) {\n      nodes = this.nodes;\n    }\n\n    var valueKey = this.props.valueKey;\n    var list = [];\n    Object.keys(nodes).forEach(function (refKey) {\n      var currentNode = nodes[refKey];\n\n      if (currentNode.parentNode) {\n        var _currentNode$parentNo;\n\n        var parentNode = nodes[(_currentNode$parentNo = currentNode.parentNode) === null || _currentNode$parentNo === void 0 ? void 0 : _currentNode$parentNo.refKey];\n\n        if (currentNode[key]) {\n          if (!(parentNode === null || parentNode === void 0 ? void 0 : parentNode.checkAll)) {\n            list.push(nodes[refKey][valueKey]);\n          } else if (parentNode === null || parentNode === void 0 ? void 0 : parentNode.uncheckable) {\n            list.push(nodes[refKey][valueKey]);\n          }\n        }\n      } else {\n        if (currentNode[key]) {\n          list.push(nodes[refKey][valueKey]);\n        }\n      }\n    });\n    return list;\n  };\n\n  _proto.unserializeLists = function unserializeLists(lists, nextProps, initial) {\n    var _this8 = this;\n\n    if (nextProps === void 0) {\n      nextProps = this.props;\n    }\n\n    if (initial === void 0) {\n      initial = false;\n    }\n\n    var _nextProps = nextProps,\n        valueKey = _nextProps.valueKey,\n        cascade = _nextProps.cascade,\n        _nextProps$uncheckabl = _nextProps.uncheckableItemValues,\n        uncheckableItemValues = _nextProps$uncheckabl === void 0 ? [] : _nextProps$uncheckabl;\n    var expandAll = getExpandAll(nextProps); // Reset values to false\n\n    Object.keys(this.nodes).forEach(function (refKey) {\n      Object.keys(lists).forEach(function (listKey) {\n        if (listKey === 'check') {\n          var node = _this8.nodes[refKey];\n\n          if (cascade && 'parentNode' in node) {\n            node[listKey] = node.parentNode[listKey];\n          } else {\n            node[listKey] = false;\n          }\n\n          lists[listKey].forEach(function (value) {\n            if (shallowEqual(_this8.nodes[refKey][valueKey], value) && !uncheckableItemValues.some(function (uncheckableValue) {\n              return shallowEqual(value, uncheckableValue);\n            })) {\n              _this8.nodes[refKey][listKey] = true;\n            }\n          });\n        }\n\n        if (listKey === 'expand') {\n          _this8.nodes[refKey][listKey] = false;\n\n          if (lists[listKey].length) {\n            lists[listKey].forEach(function (value) {\n              if (shallowEqual(_this8.nodes[refKey][valueKey], value)) {\n                _this8.nodes[refKey][listKey] = true;\n              }\n            });\n          } else {\n            _this8.nodes[refKey][listKey] = initial ? expandAll : false;\n          }\n        }\n      });\n    });\n  };\n\n  _proto.toggleChecked = function toggleChecked(node, isChecked) {\n    var nodes = clone(this.nodes);\n    this.toggleDownChecked(nodes, node, isChecked);\n    node.parentNode && this.toggleUpChecked(nodes, node.parentNode, isChecked);\n    var values = this.serializeListOnlyParent('check', nodes);\n    return this.filterSelectedValues(values);\n  };\n\n  _proto.toggleUpChecked = function toggleUpChecked(nodes, node, checked) {\n    var cascade = this.props.cascade;\n    var currentNode = nodes[node.refKey];\n\n    if (cascade) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (this.everyChildChecked(nodes, node)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n\n      if (node.parentNode) {\n        this.toggleUpChecked(nodes, node.parentNode, checked);\n      }\n    }\n  };\n\n  _proto.toggleDownChecked = function toggleDownChecked(nodes, node, isChecked) {\n    var _this9 = this;\n\n    var _this$props9 = this.props,\n        childrenKey = _this$props9.childrenKey,\n        cascade = _this$props9.cascade;\n    nodes[node.refKey].check = isChecked;\n\n    if (!node[childrenKey] || !node[childrenKey].length || !cascade) {\n      nodes[node.refKey].checkAll = false;\n    } else {\n      nodes[node.refKey].checkAll = isChecked;\n      node[childrenKey].forEach(function (child) {\n        _this9.toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  };\n\n  _proto.toggleNode = function toggleNode(key, node, toggleValue) {\n    // 如果该节点处于 disabledCheckbox，则忽略该值\n    if (!node.uncheckable) {\n      this.nodes[node.refKey][key] = toggleValue;\n    }\n  };\n\n  _proto.toggleExpand = function toggleExpand(node, isExpand) {\n    var valueKey = this.props.valueKey;\n    var expandItemValues = new Set(this.serializeList('expand'));\n\n    if (isExpand) {\n      expandItemValues.add(node[valueKey]);\n    } else {\n      expandItemValues.delete(node[valueKey]);\n    }\n\n    return Array.from(expandItemValues);\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _this$props10 = this.props,\n        locale = _this$props10.locale,\n        menuStyle = _this$props10.menuStyle,\n        searchable = _this$props10.searchable,\n        renderMenu = _this$props10.renderMenu,\n        searchKeyword = _this$props10.searchKeyword,\n        renderExtraFooter = _this$props10.renderExtraFooter,\n        menuClassName = _this$props10.menuClassName,\n        menuAutoWidth = _this$props10.menuAutoWidth;\n    var keyword = !_isUndefined(searchKeyword) ? searchKeyword : this.state.searchKeyword;\n    var classes = classNames(menuClassName, this.addPrefix('check-tree-menu'));\n    var menu = this.renderCheckTree();\n    return React.createElement(MenuWrapper, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: menuStyle,\n      ref: this.menuRef,\n      getToggleInstance: this.getToggleInstance,\n      getPositionInstance: this.getPositionInstance\n    }, searchable ? React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      key: \"searchBar\",\n      onChange: this.handleSearch,\n      value: keyword\n    }) : null, renderMenu ? renderMenu(menu) : menu, renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.renderNode = function renderNode(node, layer) {\n    var _this10 = this;\n\n    var _this$state4 = this.state,\n        activeNode = _this$state4.activeNode,\n        searchKeyword = _this$state4.searchKeyword;\n    var _this$props11 = this.props,\n        valueKey = _this$props11.valueKey,\n        labelKey = _this$props11.labelKey,\n        childrenKey = _this$props11.childrenKey,\n        renderTreeNode = _this$props11.renderTreeNode,\n        renderTreeIcon = _this$props11.renderTreeIcon,\n        cascade = _this$props11.cascade,\n        locale = _this$props11.locale;\n    var visible = node.visible,\n        refKey = node.refKey; // 当处于搜索时，需要将所有节点都展开\n\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n\n    if (!visible) {\n      return null;\n    }\n\n    var key = _isString(node[valueKey]) || _isNumber(node[valueKey]) ? node[valueKey] : refKey;\n    var children = node[childrenKey]; // 当用户进行搜索时，hasChildren的判断要变成判断是否存在 visible 为 true 的子节点\n\n    var visibleChildren = _isUndefined(searchKeyword) || searchKeyword.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      checkState: this.getNodeCheckState(node, cascade),\n      hasChildren: visibleChildren,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n\n    if (props.hasChildren) {\n      var _classNames;\n\n      layer += 1; // 是否展开树节点且子节点不为空\n\n      var openClass = this.addTreePrefix('open');\n      var childrenClass = classNames(this.addTreePrefix('node-children'), (_classNames = {}, _classNames[openClass] = expand && visibleChildren, _classNames));\n      var nodes = children || [];\n      return React.createElement(\"div\", {\n        className: childrenClass,\n        key: key,\n        ref: this.bindNodeRefs.bind(this, refKey)\n      }, React.createElement(CheckTreeNode, props), React.createElement(\"div\", {\n        className: this.addTreePrefix('children')\n      }, nodes.map(function (child) {\n        return _this10.renderNode(child, layer);\n      })));\n    }\n\n    return React.createElement(CheckTreeNode, _extends({\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderVirtualNode = function renderVirtualNode(node, options) {\n    var _this$state5 = this.state,\n        activeNode = _this$state5.activeNode,\n        expandAll = _this$state5.expandAll,\n        searchKeyword = _this$state5.searchKeyword;\n    var _this$props12 = this.props,\n        valueKey = _this$props12.valueKey,\n        labelKey = _this$props12.labelKey,\n        childrenKey = _this$props12.childrenKey,\n        renderTreeNode = _this$props12.renderTreeNode,\n        renderTreeIcon = _this$props12.renderTreeIcon,\n        cascade = _this$props12.cascade,\n        locale = _this$props12.locale;\n    var key = options.key,\n        style = options.style;\n    var layer = node.layer,\n        refKey = node.refKey,\n        showNode = node.showNode;\n    var expand = getExpandWhenSearching(searchKeyword, node.expand);\n    var children = node[childrenKey];\n    var props = {\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      expand: expand,\n      rtl: locale.rtl,\n      focus: activeNode ? shallowEqual(activeNode[valueKey], node[valueKey]) : false,\n      visible: node.visible,\n      disabled: getDisabledState(this.nodes, node, this.props),\n      nodeData: node,\n      children: children,\n      expandAll: expandAll,\n      checkState: this.getNodeCheckState(node, cascade),\n      parentNode: node.parentNode,\n      hasChildren: !!children,\n      uncheckable: node.uncheckable,\n      allUncheckable: getSiblingNodeUncheckable(node, this.nodes),\n      onSelect: this.handleSelect,\n      onTreeToggle: this.handleToggle,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n    return showNode && React.createElement(CheckTreeNode, _extends({\n      style: style,\n      key: key,\n      innerRef: this.bindNodeRefs.bind(this, refKey)\n    }, props));\n  };\n\n  _proto.renderCheckTree = function renderCheckTree() {\n    var _classNames2,\n        _this11 = this,\n        _classNames3;\n\n    var _this$state6 = this.state,\n        filterData = _this$state6.filterData,\n        isSomeNodeHasChildren = _this$state6.isSomeNodeHasChildren;\n    var _this$props13 = this.props,\n        inline = _this$props13.inline,\n        style = _this$props13.style,\n        height = _this$props13.height,\n        className = _this$props13.className,\n        onScroll = _this$props13.onScroll,\n        locale = _this$props13.locale,\n        virtualized = _this$props13.virtualized; // 树节点的层级\n\n    var layer = 0;\n    var classes = classNames(defaultClassPrefix('check-tree'), (_classNames2 = {}, _classNames2[className] = inline, _classNames2['without-children'] = !isSomeNodeHasChildren, _classNames2));\n    var formattedNodes = [];\n\n    if (!virtualized) {\n      formattedNodes = getFormattedTree(filterData, this.nodes, this.props).map(function (node) {\n        return _this11.renderNode(node, layer);\n      });\n\n      if (!formattedNodes.some(function (v) {\n        return v !== null;\n      })) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } else {\n      formattedNodes = this.getFlattenTreeData(filterData).filter(function (n) {\n        return n.showNode && n.visible;\n      });\n\n      if (!formattedNodes.length) {\n        return React.createElement(\"div\", {\n          className: this.addPrefix('none')\n        }, locale.noResultsText);\n      }\n    } // The height of virtualized tree should be subtract the value of paddingBottom\n\n\n    var treeHeight = height - 12;\n    var treeWidth = _isUndefined(style === null || style === void 0 ? void 0 : style.width) ? defaultWidth : style.width;\n    var listStyles = inline ? _extends({\n      height: height\n    }, style) : style;\n    var treeNodesClass = classNames(this.addTreePrefix('nodes'), (_classNames3 = {}, _classNames3[this.addTreePrefix('all-uncheckable')] = getEveryFisrtLevelNodeUncheckable(this.nodes), _classNames3));\n    return React.createElement(\"div\", {\n      ref: this.treeViewRef,\n      className: classes,\n      style: listStyles,\n      onScroll: onScroll,\n      onKeyDown: this.handleKeyDown\n    }, React.createElement(\"div\", {\n      className: treeNodesClass\n    }, virtualized ? React.createElement(AutoSizer, {\n      defaultHeight: treeHeight,\n      defaultWidth: treeWidth,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref3) {\n      var height = _ref3.height,\n          width = _ref3.width;\n      return React.createElement(List, {\n        ref: _this11.listRef,\n        width: width || treeWidth,\n        height: height,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: _this11.measureRowRenderer(formattedNodes)\n      });\n    }) : formattedNodes));\n  };\n\n  _proto.render = function render() {\n    var _this$props14 = this.props,\n        cascade = _this$props14.cascade,\n        style = _this$props14.style,\n        locale = _this$props14.locale,\n        inline = _this$props14.inline,\n        disabled = _this$props14.disabled,\n        valueKey = _this$props14.valueKey,\n        labelKey = _this$props14.labelKey,\n        cleanable = _this$props14.cleanable,\n        countable = _this$props14.countable,\n        placeholder = _this$props14.placeholder,\n        toggleComponentClass = _this$props14.toggleComponentClass,\n        onExited = _this$props14.onExited,\n        onEntered = _this$props14.onEntered,\n        onClean = _this$props14.onClean,\n        renderValue = _this$props14.renderValue,\n        positionRef = _this$props14.positionRef,\n        rest = _objectWithoutPropertiesLoose(_this$props14, [\"cascade\", \"style\", \"locale\", \"inline\", \"disabled\", \"valueKey\", \"labelKey\", \"cleanable\", \"countable\", \"placeholder\", \"toggleComponentClass\", \"onExited\", \"onEntered\", \"onClean\", \"renderValue\", \"positionRef\"]);\n\n    var _this$state7 = this.state,\n        hasValue = _this$state7.hasValue,\n        selectedValues = _this$state7.selectedValues;\n\n    var hasValidValue = hasValue || selectedValues.length > 0 && _isFunction(renderValue);\n\n    var selectedItems = this.getSelectedItems(selectedValues);\n    var selectedElement = placeholder;\n    /**\n     * if value is invalid and renderValue is undefined, then using placeholder.\n     * if value is valid and renderValue is't undefined, then using renderValue()\n     */\n\n    if (selectedValues.length) {\n      if (hasValue) {\n        selectedElement = React.createElement(SelectedElement, {\n          selectedItems: selectedItems,\n          countable: countable,\n          valueKey: valueKey,\n          labelKey: labelKey,\n          prefix: this.addPrefix,\n          cascade: cascade,\n          locale: locale\n        });\n      }\n\n      if (_isFunction(renderValue)) {\n        selectedElement = renderValue(selectedValues, selectedItems, selectedElement);\n\n        if (_isNil(selectedElement)) {\n          hasValidValue = false;\n        }\n      }\n    }\n\n    var unhandled = getUnhandledProps(CheckTreePicker, rest);\n    var classes = getToggleWrapperClassName('check-tree', this.addPrefix, this.props, hasValidValue);\n\n    if (inline) {\n      return this.renderCheckTree();\n    }\n\n    return React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: mergeRefs(this.positionRef, positionRef),\n      onEntered: createChainedFunction(this.handleOnOpen, onEntered),\n      onExited: createChainedFunction(this.handleOnClose, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      ref: this.toggleRef,\n      onKeyDown: this.handleToggleKeyDown,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      componentClass: toggleComponentClass,\n      cleanable: cleanable && !disabled,\n      hasValue: hasValidValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), selectedElement || locale.placeholder)));\n  };\n\n  return CheckTreePicker;\n}(React.Component);\n\nCheckTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  height: PropTypes.number,\n  inline: PropTypes.bool,\n  cascade: PropTypes.bool,\n  countable: PropTypes.bool,\n  expandAll: PropTypes.bool,\n  searchable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  onScroll: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  searchBy: PropTypes.func\n});\nCheckTreePicker.defaultProps = _extends({}, listPickerDefaultProps, {\n  height: defaultHeight,\n  cascade: true,\n  countable: true,\n  searchable: true,\n  menuAutoWidth: true,\n  defaultValue: [],\n  uncheckableItemValues: [],\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found',\n    checkAll: 'All'\n  }\n});\npolyfill(CheckTreePicker);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(CheckTreePicker);"],"mappings":"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"},"metadata":{},"sourceType":"module"}