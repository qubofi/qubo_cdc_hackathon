{"ast":null,"code":"function getResponse(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function ajaxUpload(options) {\n  var name = options.name,\n      timeout = options.timeout,\n      _options$headers = options.headers,\n      headers = _options$headers === void 0 ? {} : _options$headers,\n      _options$data = options.data,\n      data = _options$data === void 0 ? {} : _options$data,\n      onError = options.onError,\n      onSuccess = options.onSuccess,\n      onProgress = options.onProgress,\n      file = options.file,\n      url = options.url,\n      withCredentials = options.withCredentials;\n  var xhr = new XMLHttpRequest();\n  var formData = new FormData();\n  formData.append(name, file, file.name);\n  xhr.open('POST', url, true);\n  Object.keys(data).forEach(function (key) {\n    return formData.append(key, data[key]);\n  });\n  Object.keys(headers).forEach(function (key) {\n    if (headers[key] !== null) {\n      xhr.setRequestHeader(key, headers[key]);\n    }\n  });\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  if (timeout) {\n    xhr.timeout = timeout;\n\n    xhr.ontimeout = function (event) {\n      onError({\n        type: 'timeout'\n      }, event, xhr);\n    };\n  }\n\n  if (withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onload = function (event) {\n    var resp = getResponse(xhr);\n\n    if (xhr.status < 200 || xhr.status >= 300) {\n      onError({\n        type: 'server_error',\n        response: resp\n      }, event, xhr);\n      return;\n    }\n\n    onSuccess(resp, event, xhr);\n  };\n\n  if (xhr.upload) {\n    xhr.upload.onprogress = function (event) {\n      var percent = 0;\n\n      if (event.lengthComputable) {\n        percent = event.loaded / event.total * 100;\n      }\n\n      onProgress(percent, event, xhr);\n    };\n  }\n\n  xhr.onerror = function (event) {\n    onError({\n      type: 'xhr_error'\n    }, event, xhr);\n  };\n\n  xhr.send(formData);\n  return xhr;\n}","map":{"version":3,"names":["getResponse","xhr","text","responseText","response","JSON","parse","e","ajaxUpload","options","name","timeout","_options$headers","headers","_options$data","data","onError","onSuccess","onProgress","file","url","withCredentials","XMLHttpRequest","formData","FormData","append","open","Object","keys","forEach","key","setRequestHeader","ontimeout","event","type","onload","resp","status","upload","onprogress","percent","lengthComputable","loaded","total","onerror","send"],"sources":["/Users/lixupeng/Local-Work/frontend/apps/dashboard/node_modules/rsuite/es/utils/ajaxUpload.js"],"sourcesContent":["function getResponse(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function ajaxUpload(options) {\n  var name = options.name,\n      timeout = options.timeout,\n      _options$headers = options.headers,\n      headers = _options$headers === void 0 ? {} : _options$headers,\n      _options$data = options.data,\n      data = _options$data === void 0 ? {} : _options$data,\n      onError = options.onError,\n      onSuccess = options.onSuccess,\n      onProgress = options.onProgress,\n      file = options.file,\n      url = options.url,\n      withCredentials = options.withCredentials;\n  var xhr = new XMLHttpRequest();\n  var formData = new FormData();\n  formData.append(name, file, file.name);\n  xhr.open('POST', url, true);\n  Object.keys(data).forEach(function (key) {\n    return formData.append(key, data[key]);\n  });\n  Object.keys(headers).forEach(function (key) {\n    if (headers[key] !== null) {\n      xhr.setRequestHeader(key, headers[key]);\n    }\n  });\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  if (timeout) {\n    xhr.timeout = timeout;\n\n    xhr.ontimeout = function (event) {\n      onError({\n        type: 'timeout'\n      }, event, xhr);\n    };\n  }\n\n  if (withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onload = function (event) {\n    var resp = getResponse(xhr);\n\n    if (xhr.status < 200 || xhr.status >= 300) {\n      onError({\n        type: 'server_error',\n        response: resp\n      }, event, xhr);\n      return;\n    }\n\n    onSuccess(resp, event, xhr);\n  };\n\n  if (xhr.upload) {\n    xhr.upload.onprogress = function (event) {\n      var percent = 0;\n\n      if (event.lengthComputable) {\n        percent = event.loaded / event.total * 100;\n      }\n\n      onProgress(percent, event, xhr);\n    };\n  }\n\n  xhr.onerror = function (event) {\n    onError({\n      type: 'xhr_error'\n    }, event, xhr);\n  };\n\n  xhr.send(formData);\n  return xhr;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}