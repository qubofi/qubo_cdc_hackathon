{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compareAsc from \"date-fns/compare_asc\";\nimport endOfMonth from \"date-fns/end_of_month\";\nimport startOfMonth from \"date-fns/start_of_month\";\nimport endOfWeek from \"date-fns/end_of_week\";\nimport startOfWeek from \"date-fns/start_of_week\";\nimport endOfISOWeek from \"date-fns/end_of_iso_week\";\nimport startOfISOWeek from \"date-fns/start_of_iso_week\";\nimport addMonths from \"date-fns/add_months\";\nimport isSameMonth from \"date-fns/is_same_month\";\nimport isSameDay from \"date-fns/is_same_day\";\nimport isAfter from \"date-fns/is_after\";\nimport isBefore from \"date-fns/is_before\";\nimport addDays from \"date-fns/add_days\";\nimport IntlContext from '../IntlProvider/IntlContext';\nimport FormattedDate from '../IntlProvider/FormattedDate';\nimport Toolbar from './Toolbar';\nimport DatePicker from './DatePicker';\nimport { setTimingMargin, getCalendarDate } from './utils';\nimport { defaultProps, getUnhandledProps, prefix, createChainedFunction } from '../utils';\nimport { PickerToggle, MenuWrapper, PickerToggleTrigger, getToggleWrapperClassName } from '../Picker';\nimport { DATERANGE_DISABLED_TARGET } from '../constants';\nimport { pickerPropTypes, pickerDefaultProps } from '../Picker/propTypes';\n\nvar DateRangePicker = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(DateRangePicker, _React$Component);\n\n  DateRangePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value;\n\n    if (typeof value === 'undefined') {\n      return null;\n    }\n\n    if (value[0] && !isSameDay(value[0], prevState.value[0]) || value[1] && !isSameDay(value[1], prevState.value[1])) {\n      return {\n        value: value,\n        selectValue: value,\n        calendarDate: getCalendarDate(value)\n      };\n    }\n\n    return null;\n  };\n\n  function DateRangePicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.menuContainerRef = void 0;\n    _this.triggerRef = void 0;\n\n    _this.getValue = function () {\n      var value = _this.props.value;\n\n      if (typeof value !== 'undefined') {\n        return value;\n      }\n\n      return _this.state.value || [];\n    };\n\n    _this.getWeekHoverRange = function (date) {\n      var isoWeek = _this.props.isoWeek;\n\n      if (isoWeek) {\n        // set to the first day of this week according to ISO 8601, 12:00 am\n        return [startOfISOWeek(date), endOfISOWeek(date)];\n      }\n\n      return [startOfWeek(date), endOfWeek(date)];\n    };\n\n    _this.getMonthHoverRange = function (date) {\n      return [startOfMonth(date), endOfMonth(date)];\n    };\n\n    _this.handleChangeCalendarDate = function (index, date) {\n      var calendarDate = _this.state.calendarDate;\n      calendarDate[index] = date;\n\n      _this.setState({\n        calendarDate: calendarDate\n      });\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleShortcutPageDate = function (value, closeOverlay, event) {\n      _this.updateValue(event, value, closeOverlay);\n    };\n\n    _this.handleOK = function (event) {\n      var _this$props$onOk, _this$props;\n\n      _this.updateValue(event);\n\n      (_this$props$onOk = (_this$props = _this.props).onOk) === null || _this$props$onOk === void 0 ? void 0 : _this$props$onOk.call(_this$props, _this.state.selectValue, event);\n    };\n\n    _this.handleChangeSelectValue = function (date, event) {\n      var _this$state = _this.state,\n          selectValue = _this$state.selectValue,\n          doneSelected = _this$state.doneSelected;\n      var _this$props2 = _this.props,\n          onSelect = _this$props2.onSelect,\n          oneTap = _this$props2.oneTap;\n      var nextValue = [];\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected) {\n        if (nextHoverValue.length) {\n          nextValue = [nextHoverValue[0], nextHoverValue[1], date];\n          nextHoverValue = [nextHoverValue[0], nextHoverValue[1], date];\n        } else {\n          nextValue = [date, undefined, date];\n        }\n      } else {\n        if (nextHoverValue.length) {\n          nextValue = [selectValue[0], selectValue[1]];\n        } else {\n          nextValue = [selectValue[0], date];\n        }\n\n        if (isAfter(nextValue[0], nextValue[1])) {\n          nextValue.reverse();\n        }\n\n        nextValue[0] = setTimingMargin(nextValue[0]);\n        nextValue[1] = setTimingMargin(nextValue[1]);\n\n        _this.setState({\n          calendarDate: getCalendarDate(nextValue)\n        });\n      }\n\n      var nextState = {\n        doneSelected: !doneSelected,\n        selectValue: nextValue,\n        hoverValue: nextHoverValue\n      };\n      event.persist();\n\n      _this.setState(nextState, function () {\n        // 如果是单击模式，并且是第一次点选，再触发一次点击\n        if (oneTap && !_this.state.doneSelected) {\n          _this.handleChangeSelectValue(date, event);\n        } // 如果是单击模式，并且是第二次点选，更新值，并关闭面板\n\n\n        if (oneTap && _this.state.doneSelected) {\n          _this.updateValue(event);\n        }\n\n        onSelect === null || onSelect === void 0 ? void 0 : onSelect(date, event);\n      });\n    };\n\n    _this.handleMouseMoveSelectValue = function (date) {\n      var _this$state2 = _this.state,\n          doneSelected = _this$state2.doneSelected,\n          selectValue = _this$state2.selectValue,\n          hoverValue = _this$state2.hoverValue,\n          currentHoverDate = _this$state2.currentHoverDate;\n      var hoverRange = _this.props.hoverRange;\n\n      if (currentHoverDate && isSameDay(date, currentHoverDate)) {\n        return;\n      }\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected && !_isUndefined(hoverRange)) {\n        _this.setState({\n          currentHoverDate: date,\n          hoverValue: nextHoverValue\n        });\n\n        return;\n      } else if (doneSelected) {\n        return;\n      }\n\n      var nextValue = selectValue;\n\n      if (!nextHoverValue.length) {\n        nextValue[1] = date;\n      } else if (hoverValue) {\n        nextValue = [isBefore(nextHoverValue[0], hoverValue[0]) ? nextHoverValue[0] : hoverValue[0], isAfter(nextHoverValue[1], hoverValue[1]) ? nextHoverValue[1] : hoverValue[1], nextValue[2]];\n      } // If `nextValue[0]` is greater than `nextValue[1]` then reverse order\n\n\n      if (isAfter(nextValue[0], nextValue[1])) {\n        nextValue.reverse();\n      }\n\n      _this.setState({\n        currentHoverDate: date,\n        selectValue: nextValue\n      });\n    };\n\n    _this.handleClean = function (event) {\n      _this.setState({\n        calendarDate: getCalendarDate()\n      });\n\n      _this.updateValue(event, []);\n    };\n\n    _this.handleEnter = function () {\n      var value = _this.getValue();\n\n      var calendarDate;\n\n      if (value && value.length) {\n        var startDate = value[0],\n            endData = value[1];\n        calendarDate = [startDate, isSameMonth(startDate, endData) ? addMonths(endData, 1) : endData];\n      } else {\n        calendarDate = getCalendarDate(_this.props.defaultCalendarValue);\n      }\n\n      _this.setState({\n        selectValue: value,\n        calendarDate: calendarDate,\n        active: true\n      });\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props3;\n\n      (_this$props$onOpen = (_this$props3 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props3);\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props4;\n\n      _this.setState({\n        active: false,\n        doneSelected: true\n      });\n\n      (_this$props$onClose = (_this$props4 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props4);\n    };\n\n    _this.disabledOkButton = function () {\n      var _this$state3 = _this.state,\n          selectValue = _this$state3.selectValue,\n          doneSelected = _this$state3.doneSelected;\n\n      if (!selectValue[0] || !selectValue[1] || !doneSelected) {\n        return true;\n      }\n\n      return _this.disabledByBetween(selectValue[0], selectValue[1], DATERANGE_DISABLED_TARGET.TOOLBAR_BUTTON_OK);\n    };\n\n    _this.disabledShortcutButton = function (value) {\n      if (value === void 0) {\n        value = [];\n      }\n\n      if (!value[0] || !value[1]) {\n        return true;\n      }\n\n      return _this.disabledByBetween(value[0], value[1], DATERANGE_DISABLED_TARGET.TOOLBAR_SHORTCUT);\n    };\n\n    _this.handleDisabledDate = function (date, values, type) {\n      var disabledDate = _this.props.disabledDate;\n      var doneSelected = _this.state.doneSelected;\n\n      if (disabledDate) {\n        return disabledDate(date, values, doneSelected, type);\n      }\n\n      return false;\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    var defaultValue = props.defaultValue,\n        _value = props.value,\n        defaultCalendarValue = props.defaultCalendarValue;\n    var activeValue = _value || defaultValue || [];\n\n    var _calendarDate = getCalendarDate(_value || defaultCalendarValue);\n\n    _this.state = {\n      value: activeValue,\n      selectValue: activeValue,\n      doneSelected: true,\n      calendarDate: _calendarDate,\n      hoverValue: [],\n      currentHoverDate: null\n    }; // for test\n\n    _this.menuContainerRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = DateRangePicker.prototype;\n\n  _proto.getDateString = function getDateString(value) {\n    var _this$props5 = this.props,\n        placeholder = _this$props5.placeholder,\n        formatType = _this$props5.format,\n        renderValue = _this$props5.renderValue;\n    var nextValue = value || this.getValue();\n    var startDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[0];\n    var endDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[1];\n\n    if (startDate && endDate) {\n      var displayValue = [startDate, endDate].sort(compareAsc);\n      return renderValue ? renderValue(displayValue, formatType) : React.createElement(React.Fragment, null, React.createElement(FormattedDate, {\n        date: displayValue[0],\n        formatStr: formatType\n      }), \" ~\", ' ', React.createElement(FormattedDate, {\n        date: displayValue[1],\n        formatStr: formatType\n      }));\n    }\n\n    return placeholder || formatType + \" ~ \" + formatType;\n  } // hover range presets\n  ;\n\n  _proto.getHoverRange = function getHoverRange(date) {\n    var hoverRange = this.props.hoverRange;\n\n    if (!hoverRange) {\n      return [];\n    }\n\n    var hoverRangeFunc = hoverRange;\n\n    if (hoverRange === 'week') {\n      hoverRangeFunc = this.getWeekHoverRange;\n    }\n\n    if (hoverRangeFunc === 'month') {\n      hoverRangeFunc = this.getMonthHoverRange;\n    }\n\n    if (typeof hoverRangeFunc !== 'function') {\n      return [];\n    }\n\n    var hoverValues = hoverRangeFunc(date);\n    var isHoverRangeValid = hoverValues instanceof Array && hoverValues.length === 2;\n\n    if (!isHoverRangeValid) {\n      return [];\n    }\n\n    if (isAfter(hoverValues[0], hoverValues[1])) {\n      hoverValues.reverse();\n    }\n\n    return hoverValues;\n  };\n\n  _proto.resetPageDate = function resetPageDate() {\n    var selectValue = this.getValue();\n    var calendarDate = getCalendarDate(selectValue);\n    this.setState({\n      selectValue: selectValue,\n      calendarDate: calendarDate\n    });\n  }\n  /**\n   * Toolbar operation callback function\n   */\n  ;\n\n  _proto.updateValue = function updateValue(event, nextSelectValue, closeOverlay) {\n    if (closeOverlay === void 0) {\n      closeOverlay = true;\n    }\n\n    var _this$state4 = this.state,\n        value = _this$state4.value,\n        selectValue = _this$state4.selectValue;\n    var onChange = this.props.onChange;\n    var nextValue = !_isUndefined(nextSelectValue) ? nextSelectValue : selectValue;\n    this.setState({\n      selectValue: nextValue || [],\n      value: nextValue\n    });\n\n    if (onChange && (!isSameDay(nextValue[0], value[0]) || !isSameDay(nextValue[1], value[1]))) {\n      onChange(nextValue, event);\n    } // `closeOverlay` default value is `true`\n\n\n    if (closeOverlay !== false) {\n      this.handleCloseDropdown();\n    }\n  };\n\n  _proto.disabledByBetween = function disabledByBetween(start, end, type) {\n    var disabledDate = this.props.disabledDate;\n    var _this$state5 = this.state,\n        selectValue = _this$state5.selectValue,\n        doneSelected = _this$state5.doneSelected;\n    var selectStartDate = selectValue[0];\n    var selectEndDate = selectValue[1];\n    var nextSelectValue = [selectStartDate, selectEndDate]; // If the date is between the start and the end\n    // the button is disabled\n\n    while (isBefore(start, end) || isSameDay(start, end)) {\n      if (disabledDate === null || disabledDate === void 0 ? void 0 : disabledDate(start, nextSelectValue, doneSelected, type)) {\n        return true;\n      }\n\n      start = addDays(start, 1);\n    }\n\n    return false;\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _classNames;\n\n    var _this$props6 = this.props,\n        menuClassName = _this$props6.menuClassName,\n        ranges = _this$props6.ranges,\n        isoWeek = _this$props6.isoWeek,\n        limitEndYear = _this$props6.limitEndYear,\n        oneTap = _this$props6.oneTap,\n        showWeekNumbers = _this$props6.showWeekNumbers,\n        showOneCalendar = _this$props6.showOneCalendar;\n    var _this$state6 = this.state,\n        calendarDate = _this$state6.calendarDate,\n        selectValue = _this$state6.selectValue,\n        hoverValue = _this$state6.hoverValue,\n        doneSelected = _this$state6.doneSelected;\n    var classes = classNames(this.addPrefix('daterange-menu'), menuClassName);\n    var panelClasses = classNames(this.addPrefix('daterange-panel'), (_classNames = {}, _classNames[this.addPrefix('daterange-panel-show-one-calendar')] = showOneCalendar, _classNames));\n    var pickerProps = {\n      isoWeek: isoWeek,\n      doneSelected: doneSelected,\n      hoverValue: hoverValue,\n      calendarDate: calendarDate,\n      limitEndYear: limitEndYear,\n      showWeekNumbers: showWeekNumbers,\n      value: selectValue,\n      disabledDate: this.handleDisabledDate,\n      onSelect: this.handleChangeSelectValue,\n      onMouseMove: this.handleMouseMoveSelectValue,\n      onChangeCalendarDate: this.handleChangeCalendarDate,\n      showOneCalendar: showOneCalendar\n    };\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      ref: this.menuContainerRef\n    }, React.createElement(\"div\", {\n      className: panelClasses\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-content')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-header')\n    }, this.getDateString(selectValue)), React.createElement(\"div\", {\n      className: this.addPrefix(\"daterange-calendar-\" + (showOneCalendar ? 'single' : 'group'))\n    }, React.createElement(DatePicker, _extends({\n      index: 0\n    }, pickerProps)), !showOneCalendar && React.createElement(DatePicker, _extends({\n      index: 1\n    }, pickerProps)))), React.createElement(Toolbar, {\n      ranges: ranges,\n      selectValue: selectValue,\n      disabledOkButton: this.disabledOkButton,\n      disabledShortcutButton: this.disabledShortcutButton,\n      onShortcut: this.handleShortcutPageDate,\n      onOk: this.handleOK,\n      hideOkButton: oneTap\n    })));\n  };\n\n  _proto.render = function render() {\n    var _this$props7 = this.props,\n        disabled = _this$props7.disabled,\n        cleanable = _this$props7.cleanable,\n        locale = _this$props7.locale,\n        toggleComponentClass = _this$props7.toggleComponentClass,\n        style = _this$props7.style,\n        onEntered = _this$props7.onEntered,\n        onEnter = _this$props7.onEnter,\n        onExited = _this$props7.onExited,\n        onClean = _this$props7.onClean,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEntered\", \"onEnter\", \"onExited\", \"onClean\"]);\n\n    var value = this.getValue();\n    var unhandled = getUnhandledProps(DateRangePicker, rest);\n    var hasValue = value && value.length > 1;\n    var classes = getToggleWrapperClassName('daterange', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlContext.Provider, {\n      value: locale\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      onEnter: createChainedFunction(this.handleEnter, onEnter),\n      onEntered: createChainedFunction(this.handleEntered, onEntered),\n      onExited: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), this.getDateString()))));\n  };\n\n  return DateRangePicker;\n}(React.Component);\n\nDateRangePicker.propTypes = _extends({}, pickerPropTypes, {\n  ranges: PropTypes.array,\n  value: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultCalendarValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  hoverRange: PropTypes.oneOfType([PropTypes.oneOf(['week', 'month']), PropTypes.func]),\n  format: PropTypes.string,\n  isoWeek: PropTypes.bool,\n  oneTap: PropTypes.bool,\n  limitEndYear: PropTypes.number,\n  showWeekNumbers: PropTypes.bool,\n  onChange: PropTypes.func,\n  onOk: PropTypes.func,\n  disabledDate: PropTypes.func,\n  onSelect: PropTypes.func,\n  showOneCalendar: PropTypes.bool\n});\nDateRangePicker.defaultProps = _extends({}, pickerDefaultProps, {\n  limitEndYear: 1000,\n  format: 'YYYY-MM-DD',\n  placeholder: '',\n  showOneCalendar: false,\n  locale: {\n    sunday: 'Su',\n    monday: 'Mo',\n    tuesday: 'Tu',\n    wednesday: 'We',\n    thursday: 'Th',\n    friday: 'Fr',\n    saturday: 'Sa',\n    ok: 'OK',\n    today: 'Today',\n    yesterday: 'Yesterday',\n    last7Days: 'Last 7 Days',\n    hours: 'Hours',\n    minutes: 'Minutes',\n    seconds: 'Seconds'\n  }\n});\nexport default defaultProps({\n  classPrefix: 'picker'\n})(DateRangePicker);","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_isUndefined","React","PropTypes","classNames","compareAsc","endOfMonth","startOfMonth","endOfWeek","startOfWeek","endOfISOWeek","startOfISOWeek","addMonths","isSameMonth","isSameDay","isAfter","isBefore","addDays","IntlContext","FormattedDate","Toolbar","DatePicker","setTimingMargin","getCalendarDate","defaultProps","getUnhandledProps","prefix","createChainedFunction","PickerToggle","MenuWrapper","PickerToggleTrigger","getToggleWrapperClassName","DATERANGE_DISABLED_TARGET","pickerPropTypes","pickerDefaultProps","DateRangePicker","_React$Component","getDerivedStateFromProps","nextProps","prevState","value","selectValue","calendarDate","props","_this","call","menuContainerRef","triggerRef","getValue","state","getWeekHoverRange","date","isoWeek","getMonthHoverRange","handleChangeCalendarDate","index","setState","handleCloseDropdown","_this$triggerRef$curr","_this$triggerRef$curr2","current","hide","handleOpenDropdown","_this$triggerRef$curr3","_this$triggerRef$curr4","show","open","_this$handleOpenDropd","_this2","close","_this$handleCloseDrop","_this3","handleShortcutPageDate","closeOverlay","event","updateValue","handleOK","_this$props$onOk","_this$props","onOk","handleChangeSelectValue","_this$state","doneSelected","_this$props2","onSelect","oneTap","nextValue","nextHoverValue","getHoverRange","length","undefined","reverse","nextState","hoverValue","persist","handleMouseMoveSelectValue","_this$state2","currentHoverDate","hoverRange","handleClean","handleEnter","startDate","endData","defaultCalendarValue","active","handleEntered","_this$props$onOpen","_this$props3","onOpen","handleExit","_this$props$onClose","_this$props4","onClose","disabledOkButton","_this$state3","disabledByBetween","TOOLBAR_BUTTON_OK","disabledShortcutButton","TOOLBAR_SHORTCUT","handleDisabledDate","values","type","disabledDate","addPrefix","name","classPrefix","defaultValue","_value","activeValue","_calendarDate","createRef","_proto","prototype","getDateString","_this$props5","placeholder","formatType","format","renderValue","endDate","displayValue","sort","createElement","Fragment","formatStr","hoverRangeFunc","hoverValues","isHoverRangeValid","Array","resetPageDate","nextSelectValue","_this$state4","onChange","start","end","_this$state5","selectStartDate","selectEndDate","renderDropdownMenu","_classNames","_this$props6","menuClassName","ranges","limitEndYear","showWeekNumbers","showOneCalendar","_this$state6","classes","panelClasses","pickerProps","onMouseMove","onChangeCalendarDate","className","ref","onShortcut","hideOkButton","render","_this$props7","disabled","cleanable","locale","toggleComponentClass","style","onEntered","onEnter","onExited","onClean","rest","unhandled","hasValue","Provider","speaker","componentClass","Component","propTypes","array","arrayOf","instanceOf","Date","oneOfType","oneOf","func","string","bool","number","sunday","monday","tuesday","wednesday","thursday","friday","saturday","ok","today","yesterday","last7Days","hours","minutes","seconds"],"sources":["/Users/lixupeng/Local-Work/frontend/apps/dashboard/node_modules/rsuite/es/DateRangePicker/DateRangePicker.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport compareAsc from \"date-fns/compare_asc\";\nimport endOfMonth from \"date-fns/end_of_month\";\nimport startOfMonth from \"date-fns/start_of_month\";\nimport endOfWeek from \"date-fns/end_of_week\";\nimport startOfWeek from \"date-fns/start_of_week\";\nimport endOfISOWeek from \"date-fns/end_of_iso_week\";\nimport startOfISOWeek from \"date-fns/start_of_iso_week\";\nimport addMonths from \"date-fns/add_months\";\nimport isSameMonth from \"date-fns/is_same_month\";\nimport isSameDay from \"date-fns/is_same_day\";\nimport isAfter from \"date-fns/is_after\";\nimport isBefore from \"date-fns/is_before\";\nimport addDays from \"date-fns/add_days\";\nimport IntlContext from '../IntlProvider/IntlContext';\nimport FormattedDate from '../IntlProvider/FormattedDate';\nimport Toolbar from './Toolbar';\nimport DatePicker from './DatePicker';\nimport { setTimingMargin, getCalendarDate } from './utils';\nimport { defaultProps, getUnhandledProps, prefix, createChainedFunction } from '../utils';\nimport { PickerToggle, MenuWrapper, PickerToggleTrigger, getToggleWrapperClassName } from '../Picker';\nimport { DATERANGE_DISABLED_TARGET } from '../constants';\nimport { pickerPropTypes, pickerDefaultProps } from '../Picker/propTypes';\n\nvar DateRangePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(DateRangePicker, _React$Component);\n\n  DateRangePicker.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value;\n\n    if (typeof value === 'undefined') {\n      return null;\n    }\n\n    if (value[0] && !isSameDay(value[0], prevState.value[0]) || value[1] && !isSameDay(value[1], prevState.value[1])) {\n      return {\n        value: value,\n        selectValue: value,\n        calendarDate: getCalendarDate(value)\n      };\n    }\n\n    return null;\n  };\n\n  function DateRangePicker(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.menuContainerRef = void 0;\n    _this.triggerRef = void 0;\n\n    _this.getValue = function () {\n      var value = _this.props.value;\n\n      if (typeof value !== 'undefined') {\n        return value;\n      }\n\n      return _this.state.value || [];\n    };\n\n    _this.getWeekHoverRange = function (date) {\n      var isoWeek = _this.props.isoWeek;\n\n      if (isoWeek) {\n        // set to the first day of this week according to ISO 8601, 12:00 am\n        return [startOfISOWeek(date), endOfISOWeek(date)];\n      }\n\n      return [startOfWeek(date), endOfWeek(date)];\n    };\n\n    _this.getMonthHoverRange = function (date) {\n      return [startOfMonth(date), endOfMonth(date)];\n    };\n\n    _this.handleChangeCalendarDate = function (index, date) {\n      var calendarDate = _this.state.calendarDate;\n      calendarDate[index] = date;\n\n      _this.setState({\n        calendarDate: calendarDate\n      });\n    };\n\n    _this.handleCloseDropdown = function () {\n      var _this$triggerRef$curr, _this$triggerRef$curr2;\n\n      (_this$triggerRef$curr = _this.triggerRef.current) === null || _this$triggerRef$curr === void 0 ? void 0 : (_this$triggerRef$curr2 = _this$triggerRef$curr.hide) === null || _this$triggerRef$curr2 === void 0 ? void 0 : _this$triggerRef$curr2.call(_this$triggerRef$curr);\n    };\n\n    _this.handleOpenDropdown = function () {\n      var _this$triggerRef$curr3, _this$triggerRef$curr4;\n\n      (_this$triggerRef$curr3 = _this.triggerRef.current) === null || _this$triggerRef$curr3 === void 0 ? void 0 : (_this$triggerRef$curr4 = _this$triggerRef$curr3.show) === null || _this$triggerRef$curr4 === void 0 ? void 0 : _this$triggerRef$curr4.call(_this$triggerRef$curr3);\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleShortcutPageDate = function (value, closeOverlay, event) {\n      _this.updateValue(event, value, closeOverlay);\n    };\n\n    _this.handleOK = function (event) {\n      var _this$props$onOk, _this$props;\n\n      _this.updateValue(event);\n\n      (_this$props$onOk = (_this$props = _this.props).onOk) === null || _this$props$onOk === void 0 ? void 0 : _this$props$onOk.call(_this$props, _this.state.selectValue, event);\n    };\n\n    _this.handleChangeSelectValue = function (date, event) {\n      var _this$state = _this.state,\n          selectValue = _this$state.selectValue,\n          doneSelected = _this$state.doneSelected;\n      var _this$props2 = _this.props,\n          onSelect = _this$props2.onSelect,\n          oneTap = _this$props2.oneTap;\n      var nextValue = [];\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected) {\n        if (nextHoverValue.length) {\n          nextValue = [nextHoverValue[0], nextHoverValue[1], date];\n          nextHoverValue = [nextHoverValue[0], nextHoverValue[1], date];\n        } else {\n          nextValue = [date, undefined, date];\n        }\n      } else {\n        if (nextHoverValue.length) {\n          nextValue = [selectValue[0], selectValue[1]];\n        } else {\n          nextValue = [selectValue[0], date];\n        }\n\n        if (isAfter(nextValue[0], nextValue[1])) {\n          nextValue.reverse();\n        }\n\n        nextValue[0] = setTimingMargin(nextValue[0]);\n        nextValue[1] = setTimingMargin(nextValue[1]);\n\n        _this.setState({\n          calendarDate: getCalendarDate(nextValue)\n        });\n      }\n\n      var nextState = {\n        doneSelected: !doneSelected,\n        selectValue: nextValue,\n        hoverValue: nextHoverValue\n      };\n      event.persist();\n\n      _this.setState(nextState, function () {\n        // 如果是单击模式，并且是第一次点选，再触发一次点击\n        if (oneTap && !_this.state.doneSelected) {\n          _this.handleChangeSelectValue(date, event);\n        } // 如果是单击模式，并且是第二次点选，更新值，并关闭面板\n\n\n        if (oneTap && _this.state.doneSelected) {\n          _this.updateValue(event);\n        }\n\n        onSelect === null || onSelect === void 0 ? void 0 : onSelect(date, event);\n      });\n    };\n\n    _this.handleMouseMoveSelectValue = function (date) {\n      var _this$state2 = _this.state,\n          doneSelected = _this$state2.doneSelected,\n          selectValue = _this$state2.selectValue,\n          hoverValue = _this$state2.hoverValue,\n          currentHoverDate = _this$state2.currentHoverDate;\n      var hoverRange = _this.props.hoverRange;\n\n      if (currentHoverDate && isSameDay(date, currentHoverDate)) {\n        return;\n      }\n\n      var nextHoverValue = _this.getHoverRange(date);\n\n      if (doneSelected && !_isUndefined(hoverRange)) {\n        _this.setState({\n          currentHoverDate: date,\n          hoverValue: nextHoverValue\n        });\n\n        return;\n      } else if (doneSelected) {\n        return;\n      }\n\n      var nextValue = selectValue;\n\n      if (!nextHoverValue.length) {\n        nextValue[1] = date;\n      } else if (hoverValue) {\n        nextValue = [isBefore(nextHoverValue[0], hoverValue[0]) ? nextHoverValue[0] : hoverValue[0], isAfter(nextHoverValue[1], hoverValue[1]) ? nextHoverValue[1] : hoverValue[1], nextValue[2]];\n      } // If `nextValue[0]` is greater than `nextValue[1]` then reverse order\n\n\n      if (isAfter(nextValue[0], nextValue[1])) {\n        nextValue.reverse();\n      }\n\n      _this.setState({\n        currentHoverDate: date,\n        selectValue: nextValue\n      });\n    };\n\n    _this.handleClean = function (event) {\n      _this.setState({\n        calendarDate: getCalendarDate()\n      });\n\n      _this.updateValue(event, []);\n    };\n\n    _this.handleEnter = function () {\n      var value = _this.getValue();\n\n      var calendarDate;\n\n      if (value && value.length) {\n        var startDate = value[0],\n            endData = value[1];\n        calendarDate = [startDate, isSameMonth(startDate, endData) ? addMonths(endData, 1) : endData];\n      } else {\n        calendarDate = getCalendarDate(_this.props.defaultCalendarValue);\n      }\n\n      _this.setState({\n        selectValue: value,\n        calendarDate: calendarDate,\n        active: true\n      });\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props3;\n\n      (_this$props$onOpen = (_this$props3 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props3);\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props4;\n\n      _this.setState({\n        active: false,\n        doneSelected: true\n      });\n\n      (_this$props$onClose = (_this$props4 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props4);\n    };\n\n    _this.disabledOkButton = function () {\n      var _this$state3 = _this.state,\n          selectValue = _this$state3.selectValue,\n          doneSelected = _this$state3.doneSelected;\n\n      if (!selectValue[0] || !selectValue[1] || !doneSelected) {\n        return true;\n      }\n\n      return _this.disabledByBetween(selectValue[0], selectValue[1], DATERANGE_DISABLED_TARGET.TOOLBAR_BUTTON_OK);\n    };\n\n    _this.disabledShortcutButton = function (value) {\n      if (value === void 0) {\n        value = [];\n      }\n\n      if (!value[0] || !value[1]) {\n        return true;\n      }\n\n      return _this.disabledByBetween(value[0], value[1], DATERANGE_DISABLED_TARGET.TOOLBAR_SHORTCUT);\n    };\n\n    _this.handleDisabledDate = function (date, values, type) {\n      var disabledDate = _this.props.disabledDate;\n      var doneSelected = _this.state.doneSelected;\n\n      if (disabledDate) {\n        return disabledDate(date, values, doneSelected, type);\n      }\n\n      return false;\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    var defaultValue = props.defaultValue,\n        _value = props.value,\n        defaultCalendarValue = props.defaultCalendarValue;\n    var activeValue = _value || defaultValue || [];\n\n    var _calendarDate = getCalendarDate(_value || defaultCalendarValue);\n\n    _this.state = {\n      value: activeValue,\n      selectValue: activeValue,\n      doneSelected: true,\n      calendarDate: _calendarDate,\n      hoverValue: [],\n      currentHoverDate: null\n    }; // for test\n\n    _this.menuContainerRef = React.createRef();\n    _this.triggerRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = DateRangePicker.prototype;\n\n  _proto.getDateString = function getDateString(value) {\n    var _this$props5 = this.props,\n        placeholder = _this$props5.placeholder,\n        formatType = _this$props5.format,\n        renderValue = _this$props5.renderValue;\n    var nextValue = value || this.getValue();\n    var startDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[0];\n    var endDate = nextValue === null || nextValue === void 0 ? void 0 : nextValue[1];\n\n    if (startDate && endDate) {\n      var displayValue = [startDate, endDate].sort(compareAsc);\n      return renderValue ? renderValue(displayValue, formatType) : React.createElement(React.Fragment, null, React.createElement(FormattedDate, {\n        date: displayValue[0],\n        formatStr: formatType\n      }), \" ~\", ' ', React.createElement(FormattedDate, {\n        date: displayValue[1],\n        formatStr: formatType\n      }));\n    }\n\n    return placeholder || formatType + \" ~ \" + formatType;\n  } // hover range presets\n  ;\n\n  _proto.getHoverRange = function getHoverRange(date) {\n    var hoverRange = this.props.hoverRange;\n\n    if (!hoverRange) {\n      return [];\n    }\n\n    var hoverRangeFunc = hoverRange;\n\n    if (hoverRange === 'week') {\n      hoverRangeFunc = this.getWeekHoverRange;\n    }\n\n    if (hoverRangeFunc === 'month') {\n      hoverRangeFunc = this.getMonthHoverRange;\n    }\n\n    if (typeof hoverRangeFunc !== 'function') {\n      return [];\n    }\n\n    var hoverValues = hoverRangeFunc(date);\n    var isHoverRangeValid = hoverValues instanceof Array && hoverValues.length === 2;\n\n    if (!isHoverRangeValid) {\n      return [];\n    }\n\n    if (isAfter(hoverValues[0], hoverValues[1])) {\n      hoverValues.reverse();\n    }\n\n    return hoverValues;\n  };\n\n  _proto.resetPageDate = function resetPageDate() {\n    var selectValue = this.getValue();\n    var calendarDate = getCalendarDate(selectValue);\n    this.setState({\n      selectValue: selectValue,\n      calendarDate: calendarDate\n    });\n  }\n  /**\n   * Toolbar operation callback function\n   */\n  ;\n\n  _proto.updateValue = function updateValue(event, nextSelectValue, closeOverlay) {\n    if (closeOverlay === void 0) {\n      closeOverlay = true;\n    }\n\n    var _this$state4 = this.state,\n        value = _this$state4.value,\n        selectValue = _this$state4.selectValue;\n    var onChange = this.props.onChange;\n    var nextValue = !_isUndefined(nextSelectValue) ? nextSelectValue : selectValue;\n    this.setState({\n      selectValue: nextValue || [],\n      value: nextValue\n    });\n\n    if (onChange && (!isSameDay(nextValue[0], value[0]) || !isSameDay(nextValue[1], value[1]))) {\n      onChange(nextValue, event);\n    } // `closeOverlay` default value is `true`\n\n\n    if (closeOverlay !== false) {\n      this.handleCloseDropdown();\n    }\n  };\n\n  _proto.disabledByBetween = function disabledByBetween(start, end, type) {\n    var disabledDate = this.props.disabledDate;\n    var _this$state5 = this.state,\n        selectValue = _this$state5.selectValue,\n        doneSelected = _this$state5.doneSelected;\n    var selectStartDate = selectValue[0];\n    var selectEndDate = selectValue[1];\n    var nextSelectValue = [selectStartDate, selectEndDate]; // If the date is between the start and the end\n    // the button is disabled\n\n    while (isBefore(start, end) || isSameDay(start, end)) {\n      if (disabledDate === null || disabledDate === void 0 ? void 0 : disabledDate(start, nextSelectValue, doneSelected, type)) {\n        return true;\n      }\n\n      start = addDays(start, 1);\n    }\n\n    return false;\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _classNames;\n\n    var _this$props6 = this.props,\n        menuClassName = _this$props6.menuClassName,\n        ranges = _this$props6.ranges,\n        isoWeek = _this$props6.isoWeek,\n        limitEndYear = _this$props6.limitEndYear,\n        oneTap = _this$props6.oneTap,\n        showWeekNumbers = _this$props6.showWeekNumbers,\n        showOneCalendar = _this$props6.showOneCalendar;\n    var _this$state6 = this.state,\n        calendarDate = _this$state6.calendarDate,\n        selectValue = _this$state6.selectValue,\n        hoverValue = _this$state6.hoverValue,\n        doneSelected = _this$state6.doneSelected;\n    var classes = classNames(this.addPrefix('daterange-menu'), menuClassName);\n    var panelClasses = classNames(this.addPrefix('daterange-panel'), (_classNames = {}, _classNames[this.addPrefix('daterange-panel-show-one-calendar')] = showOneCalendar, _classNames));\n    var pickerProps = {\n      isoWeek: isoWeek,\n      doneSelected: doneSelected,\n      hoverValue: hoverValue,\n      calendarDate: calendarDate,\n      limitEndYear: limitEndYear,\n      showWeekNumbers: showWeekNumbers,\n      value: selectValue,\n      disabledDate: this.handleDisabledDate,\n      onSelect: this.handleChangeSelectValue,\n      onMouseMove: this.handleMouseMoveSelectValue,\n      onChangeCalendarDate: this.handleChangeCalendarDate,\n      showOneCalendar: showOneCalendar\n    };\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      ref: this.menuContainerRef\n    }, React.createElement(\"div\", {\n      className: panelClasses\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-content')\n    }, React.createElement(\"div\", {\n      className: this.addPrefix('daterange-header')\n    }, this.getDateString(selectValue)), React.createElement(\"div\", {\n      className: this.addPrefix(\"daterange-calendar-\" + (showOneCalendar ? 'single' : 'group'))\n    }, React.createElement(DatePicker, _extends({\n      index: 0\n    }, pickerProps)), !showOneCalendar && React.createElement(DatePicker, _extends({\n      index: 1\n    }, pickerProps)))), React.createElement(Toolbar, {\n      ranges: ranges,\n      selectValue: selectValue,\n      disabledOkButton: this.disabledOkButton,\n      disabledShortcutButton: this.disabledShortcutButton,\n      onShortcut: this.handleShortcutPageDate,\n      onOk: this.handleOK,\n      hideOkButton: oneTap\n    })));\n  };\n\n  _proto.render = function render() {\n    var _this$props7 = this.props,\n        disabled = _this$props7.disabled,\n        cleanable = _this$props7.cleanable,\n        locale = _this$props7.locale,\n        toggleComponentClass = _this$props7.toggleComponentClass,\n        style = _this$props7.style,\n        onEntered = _this$props7.onEntered,\n        onEnter = _this$props7.onEnter,\n        onExited = _this$props7.onExited,\n        onClean = _this$props7.onClean,\n        rest = _objectWithoutPropertiesLoose(_this$props7, [\"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEntered\", \"onEnter\", \"onExited\", \"onClean\"]);\n\n    var value = this.getValue();\n    var unhandled = getUnhandledProps(DateRangePicker, rest);\n    var hasValue = value && value.length > 1;\n    var classes = getToggleWrapperClassName('daterange', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlContext.Provider, {\n      value: locale\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      onEnter: createChainedFunction(this.handleEnter, onEnter),\n      onEntered: createChainedFunction(this.handleEntered, onEntered),\n      onExited: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: this.state.active,\n      \"aria-disabled\": disabled\n    }), this.getDateString()))));\n  };\n\n  return DateRangePicker;\n}(React.Component);\n\nDateRangePicker.propTypes = _extends({}, pickerPropTypes, {\n  ranges: PropTypes.array,\n  value: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  defaultCalendarValue: PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n  hoverRange: PropTypes.oneOfType([PropTypes.oneOf(['week', 'month']), PropTypes.func]),\n  format: PropTypes.string,\n  isoWeek: PropTypes.bool,\n  oneTap: PropTypes.bool,\n  limitEndYear: PropTypes.number,\n  showWeekNumbers: PropTypes.bool,\n  onChange: PropTypes.func,\n  onOk: PropTypes.func,\n  disabledDate: PropTypes.func,\n  onSelect: PropTypes.func,\n  showOneCalendar: PropTypes.bool\n});\nDateRangePicker.defaultProps = _extends({}, pickerDefaultProps, {\n  limitEndYear: 1000,\n  format: 'YYYY-MM-DD',\n  placeholder: '',\n  showOneCalendar: false,\n  locale: {\n    sunday: 'Su',\n    monday: 'Mo',\n    tuesday: 'Tu',\n    wednesday: 'We',\n    thursday: 'Th',\n    friday: 'Fr',\n    saturday: 'Sa',\n    ok: 'OK',\n    today: 'Today',\n    yesterday: 'Yesterday',\n    last7Days: 'Last 7 Days',\n    hours: 'Hours',\n    minutes: 'Minutes',\n    seconds: 'Seconds'\n  }\n});\nexport default defaultProps({\n  classPrefix: 'picker'\n})(DateRangePicker);"],"mappings":"AAAA,OAAOA,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,aAAP,MAA0B,+BAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,eAAT,EAA0BC,eAA1B,QAAiD,SAAjD;AACA,SAASC,YAAT,EAAuBC,iBAAvB,EAA0CC,MAA1C,EAAkDC,qBAAlD,QAA+E,UAA/E;AACA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,mBAApC,EAAyDC,yBAAzD,QAA0F,WAA1F;AACA,SAASC,yBAAT,QAA0C,cAA1C;AACA,SAASC,eAAT,EAA0BC,kBAA1B,QAAoD,qBAApD;;AAEA,IAAIC,eAAe,GACnB,aACA,UAAUC,gBAAV,EAA4B;EAC1BpC,cAAc,CAACmC,eAAD,EAAkBC,gBAAlB,CAAd;;EAEAD,eAAe,CAACE,wBAAhB,GAA2C,SAASA,wBAAT,CAAkCC,SAAlC,EAA6CC,SAA7C,EAAwD;IACjG,IAAIC,KAAK,GAAGF,SAAS,CAACE,KAAtB;;IAEA,IAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;MAChC,OAAO,IAAP;IACD;;IAED,IAAIA,KAAK,CAAC,CAAD,CAAL,IAAY,CAAC1B,SAAS,CAAC0B,KAAK,CAAC,CAAD,CAAN,EAAWD,SAAS,CAACC,KAAV,CAAgB,CAAhB,CAAX,CAAtB,IAAwDA,KAAK,CAAC,CAAD,CAAL,IAAY,CAAC1B,SAAS,CAAC0B,KAAK,CAAC,CAAD,CAAN,EAAWD,SAAS,CAACC,KAAV,CAAgB,CAAhB,CAAX,CAAlF,EAAkH;MAChH,OAAO;QACLA,KAAK,EAAEA,KADF;QAELC,WAAW,EAAED,KAFR;QAGLE,YAAY,EAAEnB,eAAe,CAACiB,KAAD;MAHxB,CAAP;IAKD;;IAED,OAAO,IAAP;EACD,CAhBD;;EAkBA,SAASL,eAAT,CAAyBQ,KAAzB,EAAgC;IAC9B,IAAIC,KAAJ;;IAEAA,KAAK,GAAGR,gBAAgB,CAACS,IAAjB,CAAsB,IAAtB,EAA4BF,KAA5B,KAAsC,IAA9C;IACAC,KAAK,CAACE,gBAAN,GAAyB,KAAK,CAA9B;IACAF,KAAK,CAACG,UAAN,GAAmB,KAAK,CAAxB;;IAEAH,KAAK,CAACI,QAAN,GAAiB,YAAY;MAC3B,IAAIR,KAAK,GAAGI,KAAK,CAACD,KAAN,CAAYH,KAAxB;;MAEA,IAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;QAChC,OAAOA,KAAP;MACD;;MAED,OAAOI,KAAK,CAACK,KAAN,CAAYT,KAAZ,IAAqB,EAA5B;IACD,CARD;;IAUAI,KAAK,CAACM,iBAAN,GAA0B,UAAUC,IAAV,EAAgB;MACxC,IAAIC,OAAO,GAAGR,KAAK,CAACD,KAAN,CAAYS,OAA1B;;MAEA,IAAIA,OAAJ,EAAa;QACX;QACA,OAAO,CAACzC,cAAc,CAACwC,IAAD,CAAf,EAAuBzC,YAAY,CAACyC,IAAD,CAAnC,CAAP;MACD;;MAED,OAAO,CAAC1C,WAAW,CAAC0C,IAAD,CAAZ,EAAoB3C,SAAS,CAAC2C,IAAD,CAA7B,CAAP;IACD,CATD;;IAWAP,KAAK,CAACS,kBAAN,GAA2B,UAAUF,IAAV,EAAgB;MACzC,OAAO,CAAC5C,YAAY,CAAC4C,IAAD,CAAb,EAAqB7C,UAAU,CAAC6C,IAAD,CAA/B,CAAP;IACD,CAFD;;IAIAP,KAAK,CAACU,wBAAN,GAAiC,UAAUC,KAAV,EAAiBJ,IAAjB,EAAuB;MACtD,IAAIT,YAAY,GAAGE,KAAK,CAACK,KAAN,CAAYP,YAA/B;MACAA,YAAY,CAACa,KAAD,CAAZ,GAAsBJ,IAAtB;;MAEAP,KAAK,CAACY,QAAN,CAAe;QACbd,YAAY,EAAEA;MADD,CAAf;IAGD,CAPD;;IASAE,KAAK,CAACa,mBAAN,GAA4B,YAAY;MACtC,IAAIC,qBAAJ,EAA2BC,sBAA3B;;MAEA,CAACD,qBAAqB,GAAGd,KAAK,CAACG,UAAN,CAAiBa,OAA1C,MAAuD,IAAvD,IAA+DF,qBAAqB,KAAK,KAAK,CAA9F,GAAkG,KAAK,CAAvG,GAA2G,CAACC,sBAAsB,GAAGD,qBAAqB,CAACG,IAAhD,MAA0D,IAA1D,IAAkEF,sBAAsB,KAAK,KAAK,CAAlG,GAAsG,KAAK,CAA3G,GAA+GA,sBAAsB,CAACd,IAAvB,CAA4Ba,qBAA5B,CAA1N;IACD,CAJD;;IAMAd,KAAK,CAACkB,kBAAN,GAA2B,YAAY;MACrC,IAAIC,sBAAJ,EAA4BC,sBAA5B;;MAEA,CAACD,sBAAsB,GAAGnB,KAAK,CAACG,UAAN,CAAiBa,OAA3C,MAAwD,IAAxD,IAAgEG,sBAAsB,KAAK,KAAK,CAAhG,GAAoG,KAAK,CAAzG,GAA6G,CAACC,sBAAsB,GAAGD,sBAAsB,CAACE,IAAjD,MAA2D,IAA3D,IAAmED,sBAAsB,KAAK,KAAK,CAAnG,GAAuG,KAAK,CAA5G,GAAgHA,sBAAsB,CAACnB,IAAvB,CAA4BkB,sBAA5B,CAA7N;IACD,CAJD;;IAMAnB,KAAK,CAACsB,IAAN,GAAa,YAAY;MACvB,IAAIC,qBAAJ,EAA2BC,MAA3B;;MAEA,CAACD,qBAAqB,GAAG,CAACC,MAAM,GAAGxB,KAAV,EAAiBkB,kBAA1C,MAAkE,IAAlE,IAA0EK,qBAAqB,KAAK,KAAK,CAAzG,GAA6G,KAAK,CAAlH,GAAsHA,qBAAqB,CAACtB,IAAtB,CAA2BuB,MAA3B,CAAtH;IACD,CAJD;;IAMAxB,KAAK,CAACyB,KAAN,GAAc,YAAY;MACxB,IAAIC,qBAAJ,EAA2BC,MAA3B;;MAEA,CAACD,qBAAqB,GAAG,CAACC,MAAM,GAAG3B,KAAV,EAAiBa,mBAA1C,MAAmE,IAAnE,IAA2Ea,qBAAqB,KAAK,KAAK,CAA1G,GAA8G,KAAK,CAAnH,GAAuHA,qBAAqB,CAACzB,IAAtB,CAA2B0B,MAA3B,CAAvH;IACD,CAJD;;IAMA3B,KAAK,CAAC4B,sBAAN,GAA+B,UAAUhC,KAAV,EAAiBiC,YAAjB,EAA+BC,KAA/B,EAAsC;MACnE9B,KAAK,CAAC+B,WAAN,CAAkBD,KAAlB,EAAyBlC,KAAzB,EAAgCiC,YAAhC;IACD,CAFD;;IAIA7B,KAAK,CAACgC,QAAN,GAAiB,UAAUF,KAAV,EAAiB;MAChC,IAAIG,gBAAJ,EAAsBC,WAAtB;;MAEAlC,KAAK,CAAC+B,WAAN,CAAkBD,KAAlB;;MAEA,CAACG,gBAAgB,GAAG,CAACC,WAAW,GAAGlC,KAAK,CAACD,KAArB,EAA4BoC,IAAhD,MAA0D,IAA1D,IAAkEF,gBAAgB,KAAK,KAAK,CAA5F,GAAgG,KAAK,CAArG,GAAyGA,gBAAgB,CAAChC,IAAjB,CAAsBiC,WAAtB,EAAmClC,KAAK,CAACK,KAAN,CAAYR,WAA/C,EAA4DiC,KAA5D,CAAzG;IACD,CAND;;IAQA9B,KAAK,CAACoC,uBAAN,GAAgC,UAAU7B,IAAV,EAAgBuB,KAAhB,EAAuB;MACrD,IAAIO,WAAW,GAAGrC,KAAK,CAACK,KAAxB;MAAA,IACIR,WAAW,GAAGwC,WAAW,CAACxC,WAD9B;MAAA,IAEIyC,YAAY,GAAGD,WAAW,CAACC,YAF/B;MAGA,IAAIC,YAAY,GAAGvC,KAAK,CAACD,KAAzB;MAAA,IACIyC,QAAQ,GAAGD,YAAY,CAACC,QAD5B;MAAA,IAEIC,MAAM,GAAGF,YAAY,CAACE,MAF1B;MAGA,IAAIC,SAAS,GAAG,EAAhB;;MAEA,IAAIC,cAAc,GAAG3C,KAAK,CAAC4C,aAAN,CAAoBrC,IAApB,CAArB;;MAEA,IAAI+B,YAAJ,EAAkB;QAChB,IAAIK,cAAc,CAACE,MAAnB,EAA2B;UACzBH,SAAS,GAAG,CAACC,cAAc,CAAC,CAAD,CAAf,EAAoBA,cAAc,CAAC,CAAD,CAAlC,EAAuCpC,IAAvC,CAAZ;UACAoC,cAAc,GAAG,CAACA,cAAc,CAAC,CAAD,CAAf,EAAoBA,cAAc,CAAC,CAAD,CAAlC,EAAuCpC,IAAvC,CAAjB;QACD,CAHD,MAGO;UACLmC,SAAS,GAAG,CAACnC,IAAD,EAAOuC,SAAP,EAAkBvC,IAAlB,CAAZ;QACD;MACF,CAPD,MAOO;QACL,IAAIoC,cAAc,CAACE,MAAnB,EAA2B;UACzBH,SAAS,GAAG,CAAC7C,WAAW,CAAC,CAAD,CAAZ,EAAiBA,WAAW,CAAC,CAAD,CAA5B,CAAZ;QACD,CAFD,MAEO;UACL6C,SAAS,GAAG,CAAC7C,WAAW,CAAC,CAAD,CAAZ,EAAiBU,IAAjB,CAAZ;QACD;;QAED,IAAIpC,OAAO,CAACuE,SAAS,CAAC,CAAD,CAAV,EAAeA,SAAS,CAAC,CAAD,CAAxB,CAAX,EAAyC;UACvCA,SAAS,CAACK,OAAV;QACD;;QAEDL,SAAS,CAAC,CAAD,CAAT,GAAehE,eAAe,CAACgE,SAAS,CAAC,CAAD,CAAV,CAA9B;QACAA,SAAS,CAAC,CAAD,CAAT,GAAehE,eAAe,CAACgE,SAAS,CAAC,CAAD,CAAV,CAA9B;;QAEA1C,KAAK,CAACY,QAAN,CAAe;UACbd,YAAY,EAAEnB,eAAe,CAAC+D,SAAD;QADhB,CAAf;MAGD;;MAED,IAAIM,SAAS,GAAG;QACdV,YAAY,EAAE,CAACA,YADD;QAEdzC,WAAW,EAAE6C,SAFC;QAGdO,UAAU,EAAEN;MAHE,CAAhB;MAKAb,KAAK,CAACoB,OAAN;;MAEAlD,KAAK,CAACY,QAAN,CAAeoC,SAAf,EAA0B,YAAY;QACpC;QACA,IAAIP,MAAM,IAAI,CAACzC,KAAK,CAACK,KAAN,CAAYiC,YAA3B,EAAyC;UACvCtC,KAAK,CAACoC,uBAAN,CAA8B7B,IAA9B,EAAoCuB,KAApC;QACD,CAJmC,CAIlC;;;QAGF,IAAIW,MAAM,IAAIzC,KAAK,CAACK,KAAN,CAAYiC,YAA1B,EAAwC;UACtCtC,KAAK,CAAC+B,WAAN,CAAkBD,KAAlB;QACD;;QAEDU,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACjC,IAAD,EAAOuB,KAAP,CAA5D;MACD,CAZD;IAaD,CAzDD;;IA2DA9B,KAAK,CAACmD,0BAAN,GAAmC,UAAU5C,IAAV,EAAgB;MACjD,IAAI6C,YAAY,GAAGpD,KAAK,CAACK,KAAzB;MAAA,IACIiC,YAAY,GAAGc,YAAY,CAACd,YADhC;MAAA,IAEIzC,WAAW,GAAGuD,YAAY,CAACvD,WAF/B;MAAA,IAGIoD,UAAU,GAAGG,YAAY,CAACH,UAH9B;MAAA,IAIII,gBAAgB,GAAGD,YAAY,CAACC,gBAJpC;MAKA,IAAIC,UAAU,GAAGtD,KAAK,CAACD,KAAN,CAAYuD,UAA7B;;MAEA,IAAID,gBAAgB,IAAInF,SAAS,CAACqC,IAAD,EAAO8C,gBAAP,CAAjC,EAA2D;QACzD;MACD;;MAED,IAAIV,cAAc,GAAG3C,KAAK,CAAC4C,aAAN,CAAoBrC,IAApB,CAArB;;MAEA,IAAI+B,YAAY,IAAI,CAACjF,YAAY,CAACiG,UAAD,CAAjC,EAA+C;QAC7CtD,KAAK,CAACY,QAAN,CAAe;UACbyC,gBAAgB,EAAE9C,IADL;UAEb0C,UAAU,EAAEN;QAFC,CAAf;;QAKA;MACD,CAPD,MAOO,IAAIL,YAAJ,EAAkB;QACvB;MACD;;MAED,IAAII,SAAS,GAAG7C,WAAhB;;MAEA,IAAI,CAAC8C,cAAc,CAACE,MAApB,EAA4B;QAC1BH,SAAS,CAAC,CAAD,CAAT,GAAenC,IAAf;MACD,CAFD,MAEO,IAAI0C,UAAJ,EAAgB;QACrBP,SAAS,GAAG,CAACtE,QAAQ,CAACuE,cAAc,CAAC,CAAD,CAAf,EAAoBM,UAAU,CAAC,CAAD,CAA9B,CAAR,GAA6CN,cAAc,CAAC,CAAD,CAA3D,GAAiEM,UAAU,CAAC,CAAD,CAA5E,EAAiF9E,OAAO,CAACwE,cAAc,CAAC,CAAD,CAAf,EAAoBM,UAAU,CAAC,CAAD,CAA9B,CAAP,GAA4CN,cAAc,CAAC,CAAD,CAA1D,GAAgEM,UAAU,CAAC,CAAD,CAA3J,EAAgKP,SAAS,CAAC,CAAD,CAAzK,CAAZ;MACD,CA/BgD,CA+B/C;;;MAGF,IAAIvE,OAAO,CAACuE,SAAS,CAAC,CAAD,CAAV,EAAeA,SAAS,CAAC,CAAD,CAAxB,CAAX,EAAyC;QACvCA,SAAS,CAACK,OAAV;MACD;;MAED/C,KAAK,CAACY,QAAN,CAAe;QACbyC,gBAAgB,EAAE9C,IADL;QAEbV,WAAW,EAAE6C;MAFA,CAAf;IAID,CA1CD;;IA4CA1C,KAAK,CAACuD,WAAN,GAAoB,UAAUzB,KAAV,EAAiB;MACnC9B,KAAK,CAACY,QAAN,CAAe;QACbd,YAAY,EAAEnB,eAAe;MADhB,CAAf;;MAIAqB,KAAK,CAAC+B,WAAN,CAAkBD,KAAlB,EAAyB,EAAzB;IACD,CAND;;IAQA9B,KAAK,CAACwD,WAAN,GAAoB,YAAY;MAC9B,IAAI5D,KAAK,GAAGI,KAAK,CAACI,QAAN,EAAZ;;MAEA,IAAIN,YAAJ;;MAEA,IAAIF,KAAK,IAAIA,KAAK,CAACiD,MAAnB,EAA2B;QACzB,IAAIY,SAAS,GAAG7D,KAAK,CAAC,CAAD,CAArB;QAAA,IACI8D,OAAO,GAAG9D,KAAK,CAAC,CAAD,CADnB;QAEAE,YAAY,GAAG,CAAC2D,SAAD,EAAYxF,WAAW,CAACwF,SAAD,EAAYC,OAAZ,CAAX,GAAkC1F,SAAS,CAAC0F,OAAD,EAAU,CAAV,CAA3C,GAA0DA,OAAtE,CAAf;MACD,CAJD,MAIO;QACL5D,YAAY,GAAGnB,eAAe,CAACqB,KAAK,CAACD,KAAN,CAAY4D,oBAAb,CAA9B;MACD;;MAED3D,KAAK,CAACY,QAAN,CAAe;QACbf,WAAW,EAAED,KADA;QAEbE,YAAY,EAAEA,YAFD;QAGb8D,MAAM,EAAE;MAHK,CAAf;IAKD,CAlBD;;IAoBA5D,KAAK,CAAC6D,aAAN,GAAsB,YAAY;MAChC,IAAIC,kBAAJ,EAAwBC,YAAxB;;MAEA,CAACD,kBAAkB,GAAG,CAACC,YAAY,GAAG/D,KAAK,CAACD,KAAtB,EAA6BiE,MAAnD,MAA+D,IAA/D,IAAuEF,kBAAkB,KAAK,KAAK,CAAnG,GAAuG,KAAK,CAA5G,GAAgHA,kBAAkB,CAAC7D,IAAnB,CAAwB8D,YAAxB,CAAhH;IACD,CAJD;;IAMA/D,KAAK,CAACiE,UAAN,GAAmB,YAAY;MAC7B,IAAIC,mBAAJ,EAAyBC,YAAzB;;MAEAnE,KAAK,CAACY,QAAN,CAAe;QACbgD,MAAM,EAAE,KADK;QAEbtB,YAAY,EAAE;MAFD,CAAf;;MAKA,CAAC4B,mBAAmB,GAAG,CAACC,YAAY,GAAGnE,KAAK,CAACD,KAAtB,EAA6BqE,OAApD,MAAiE,IAAjE,IAAyEF,mBAAmB,KAAK,KAAK,CAAtG,GAA0G,KAAK,CAA/G,GAAmHA,mBAAmB,CAACjE,IAApB,CAAyBkE,YAAzB,CAAnH;IACD,CATD;;IAWAnE,KAAK,CAACqE,gBAAN,GAAyB,YAAY;MACnC,IAAIC,YAAY,GAAGtE,KAAK,CAACK,KAAzB;MAAA,IACIR,WAAW,GAAGyE,YAAY,CAACzE,WAD/B;MAAA,IAEIyC,YAAY,GAAGgC,YAAY,CAAChC,YAFhC;;MAIA,IAAI,CAACzC,WAAW,CAAC,CAAD,CAAZ,IAAmB,CAACA,WAAW,CAAC,CAAD,CAA/B,IAAsC,CAACyC,YAA3C,EAAyD;QACvD,OAAO,IAAP;MACD;;MAED,OAAOtC,KAAK,CAACuE,iBAAN,CAAwB1E,WAAW,CAAC,CAAD,CAAnC,EAAwCA,WAAW,CAAC,CAAD,CAAnD,EAAwDT,yBAAyB,CAACoF,iBAAlF,CAAP;IACD,CAVD;;IAYAxE,KAAK,CAACyE,sBAAN,GAA+B,UAAU7E,KAAV,EAAiB;MAC9C,IAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;QACpBA,KAAK,GAAG,EAAR;MACD;;MAED,IAAI,CAACA,KAAK,CAAC,CAAD,CAAN,IAAa,CAACA,KAAK,CAAC,CAAD,CAAvB,EAA4B;QAC1B,OAAO,IAAP;MACD;;MAED,OAAOI,KAAK,CAACuE,iBAAN,CAAwB3E,KAAK,CAAC,CAAD,CAA7B,EAAkCA,KAAK,CAAC,CAAD,CAAvC,EAA4CR,yBAAyB,CAACsF,gBAAtE,CAAP;IACD,CAVD;;IAYA1E,KAAK,CAAC2E,kBAAN,GAA2B,UAAUpE,IAAV,EAAgBqE,MAAhB,EAAwBC,IAAxB,EAA8B;MACvD,IAAIC,YAAY,GAAG9E,KAAK,CAACD,KAAN,CAAY+E,YAA/B;MACA,IAAIxC,YAAY,GAAGtC,KAAK,CAACK,KAAN,CAAYiC,YAA/B;;MAEA,IAAIwC,YAAJ,EAAkB;QAChB,OAAOA,YAAY,CAACvE,IAAD,EAAOqE,MAAP,EAAetC,YAAf,EAA6BuC,IAA7B,CAAnB;MACD;;MAED,OAAO,KAAP;IACD,CATD;;IAWA7E,KAAK,CAAC+E,SAAN,GAAkB,UAAUC,IAAV,EAAgB;MAChC,OAAOlG,MAAM,CAACkB,KAAK,CAACD,KAAN,CAAYkF,WAAb,CAAN,CAAgCD,IAAhC,CAAP;IACD,CAFD;;IAIA,IAAIE,YAAY,GAAGnF,KAAK,CAACmF,YAAzB;IAAA,IACIC,MAAM,GAAGpF,KAAK,CAACH,KADnB;IAAA,IAEI+D,oBAAoB,GAAG5D,KAAK,CAAC4D,oBAFjC;IAGA,IAAIyB,WAAW,GAAGD,MAAM,IAAID,YAAV,IAA0B,EAA5C;;IAEA,IAAIG,aAAa,GAAG1G,eAAe,CAACwG,MAAM,IAAIxB,oBAAX,CAAnC;;IAEA3D,KAAK,CAACK,KAAN,GAAc;MACZT,KAAK,EAAEwF,WADK;MAEZvF,WAAW,EAAEuF,WAFD;MAGZ9C,YAAY,EAAE,IAHF;MAIZxC,YAAY,EAAEuF,aAJF;MAKZpC,UAAU,EAAE,EALA;MAMZI,gBAAgB,EAAE;IANN,CAAd,CA/Q8B,CAsR3B;;IAEHrD,KAAK,CAACE,gBAAN,GAAyB5C,KAAK,CAACgI,SAAN,EAAzB;IACAtF,KAAK,CAACG,UAAN,GAAmB7C,KAAK,CAACgI,SAAN,EAAnB;IACA,OAAOtF,KAAP;EACD;;EAED,IAAIuF,MAAM,GAAGhG,eAAe,CAACiG,SAA7B;;EAEAD,MAAM,CAACE,aAAP,GAAuB,SAASA,aAAT,CAAuB7F,KAAvB,EAA8B;IACnD,IAAI8F,YAAY,GAAG,KAAK3F,KAAxB;IAAA,IACI4F,WAAW,GAAGD,YAAY,CAACC,WAD/B;IAAA,IAEIC,UAAU,GAAGF,YAAY,CAACG,MAF9B;IAAA,IAGIC,WAAW,GAAGJ,YAAY,CAACI,WAH/B;IAIA,IAAIpD,SAAS,GAAG9C,KAAK,IAAI,KAAKQ,QAAL,EAAzB;IACA,IAAIqD,SAAS,GAAGf,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAAC,CAAD,CAA/E;IACA,IAAIqD,OAAO,GAAGrD,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAAC,CAAD,CAA7E;;IAEA,IAAIe,SAAS,IAAIsC,OAAjB,EAA0B;MACxB,IAAIC,YAAY,GAAG,CAACvC,SAAD,EAAYsC,OAAZ,EAAqBE,IAArB,CAA0BxI,UAA1B,CAAnB;MACA,OAAOqI,WAAW,GAAGA,WAAW,CAACE,YAAD,EAAeJ,UAAf,CAAd,GAA2CtI,KAAK,CAAC4I,aAAN,CAAoB5I,KAAK,CAAC6I,QAA1B,EAAoC,IAApC,EAA0C7I,KAAK,CAAC4I,aAAN,CAAoB3H,aAApB,EAAmC;QACxIgC,IAAI,EAAEyF,YAAY,CAAC,CAAD,CADsH;QAExII,SAAS,EAAER;MAF6H,CAAnC,CAA1C,EAGzD,IAHyD,EAGnD,GAHmD,EAG9CtI,KAAK,CAAC4I,aAAN,CAAoB3H,aAApB,EAAmC;QAChDgC,IAAI,EAAEyF,YAAY,CAAC,CAAD,CAD8B;QAEhDI,SAAS,EAAER;MAFqC,CAAnC,CAH8C,CAA7D;IAOD;;IAED,OAAOD,WAAW,IAAIC,UAAU,GAAG,KAAb,GAAqBA,UAA3C;EACD,CArBD,CAqBE;EArBF;;EAwBAL,MAAM,CAAC3C,aAAP,GAAuB,SAASA,aAAT,CAAuBrC,IAAvB,EAA6B;IAClD,IAAI+C,UAAU,GAAG,KAAKvD,KAAL,CAAWuD,UAA5B;;IAEA,IAAI,CAACA,UAAL,EAAiB;MACf,OAAO,EAAP;IACD;;IAED,IAAI+C,cAAc,GAAG/C,UAArB;;IAEA,IAAIA,UAAU,KAAK,MAAnB,EAA2B;MACzB+C,cAAc,GAAG,KAAK/F,iBAAtB;IACD;;IAED,IAAI+F,cAAc,KAAK,OAAvB,EAAgC;MAC9BA,cAAc,GAAG,KAAK5F,kBAAtB;IACD;;IAED,IAAI,OAAO4F,cAAP,KAA0B,UAA9B,EAA0C;MACxC,OAAO,EAAP;IACD;;IAED,IAAIC,WAAW,GAAGD,cAAc,CAAC9F,IAAD,CAAhC;IACA,IAAIgG,iBAAiB,GAAGD,WAAW,YAAYE,KAAvB,IAAgCF,WAAW,CAACzD,MAAZ,KAAuB,CAA/E;;IAEA,IAAI,CAAC0D,iBAAL,EAAwB;MACtB,OAAO,EAAP;IACD;;IAED,IAAIpI,OAAO,CAACmI,WAAW,CAAC,CAAD,CAAZ,EAAiBA,WAAW,CAAC,CAAD,CAA5B,CAAX,EAA6C;MAC3CA,WAAW,CAACvD,OAAZ;IACD;;IAED,OAAOuD,WAAP;EACD,CAjCD;;EAmCAf,MAAM,CAACkB,aAAP,GAAuB,SAASA,aAAT,GAAyB;IAC9C,IAAI5G,WAAW,GAAG,KAAKO,QAAL,EAAlB;IACA,IAAIN,YAAY,GAAGnB,eAAe,CAACkB,WAAD,CAAlC;IACA,KAAKe,QAAL,CAAc;MACZf,WAAW,EAAEA,WADD;MAEZC,YAAY,EAAEA;IAFF,CAAd;EAID;EACD;AACF;AACA;EAVE;;EAaAyF,MAAM,CAACxD,WAAP,GAAqB,SAASA,WAAT,CAAqBD,KAArB,EAA4B4E,eAA5B,EAA6C7E,YAA7C,EAA2D;IAC9E,IAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;MAC3BA,YAAY,GAAG,IAAf;IACD;;IAED,IAAI8E,YAAY,GAAG,KAAKtG,KAAxB;IAAA,IACIT,KAAK,GAAG+G,YAAY,CAAC/G,KADzB;IAAA,IAEIC,WAAW,GAAG8G,YAAY,CAAC9G,WAF/B;IAGA,IAAI+G,QAAQ,GAAG,KAAK7G,KAAL,CAAW6G,QAA1B;IACA,IAAIlE,SAAS,GAAG,CAACrF,YAAY,CAACqJ,eAAD,CAAb,GAAiCA,eAAjC,GAAmD7G,WAAnE;IACA,KAAKe,QAAL,CAAc;MACZf,WAAW,EAAE6C,SAAS,IAAI,EADd;MAEZ9C,KAAK,EAAE8C;IAFK,CAAd;;IAKA,IAAIkE,QAAQ,KAAK,CAAC1I,SAAS,CAACwE,SAAS,CAAC,CAAD,CAAV,EAAe9C,KAAK,CAAC,CAAD,CAApB,CAAV,IAAsC,CAAC1B,SAAS,CAACwE,SAAS,CAAC,CAAD,CAAV,EAAe9C,KAAK,CAAC,CAAD,CAApB,CAArD,CAAZ,EAA4F;MAC1FgH,QAAQ,CAAClE,SAAD,EAAYZ,KAAZ,CAAR;IACD,CAjB6E,CAiB5E;;;IAGF,IAAID,YAAY,KAAK,KAArB,EAA4B;MAC1B,KAAKhB,mBAAL;IACD;EACF,CAvBD;;EAyBA0E,MAAM,CAAChB,iBAAP,GAA2B,SAASA,iBAAT,CAA2BsC,KAA3B,EAAkCC,GAAlC,EAAuCjC,IAAvC,EAA6C;IACtE,IAAIC,YAAY,GAAG,KAAK/E,KAAL,CAAW+E,YAA9B;IACA,IAAIiC,YAAY,GAAG,KAAK1G,KAAxB;IAAA,IACIR,WAAW,GAAGkH,YAAY,CAAClH,WAD/B;IAAA,IAEIyC,YAAY,GAAGyE,YAAY,CAACzE,YAFhC;IAGA,IAAI0E,eAAe,GAAGnH,WAAW,CAAC,CAAD,CAAjC;IACA,IAAIoH,aAAa,GAAGpH,WAAW,CAAC,CAAD,CAA/B;IACA,IAAI6G,eAAe,GAAG,CAACM,eAAD,EAAkBC,aAAlB,CAAtB,CAPsE,CAOd;IACxD;;IAEA,OAAO7I,QAAQ,CAACyI,KAAD,EAAQC,GAAR,CAAR,IAAwB5I,SAAS,CAAC2I,KAAD,EAAQC,GAAR,CAAxC,EAAsD;MACpD,IAAIhC,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,YAAY,CAAC+B,KAAD,EAAQH,eAAR,EAAyBpE,YAAzB,EAAuCuC,IAAvC,CAA5E,EAA0H;QACxH,OAAO,IAAP;MACD;;MAEDgC,KAAK,GAAGxI,OAAO,CAACwI,KAAD,EAAQ,CAAR,CAAf;IACD;;IAED,OAAO,KAAP;EACD,CAnBD;;EAqBAtB,MAAM,CAAC2B,kBAAP,GAA4B,SAASA,kBAAT,GAA8B;IACxD,IAAIC,WAAJ;;IAEA,IAAIC,YAAY,GAAG,KAAKrH,KAAxB;IAAA,IACIsH,aAAa,GAAGD,YAAY,CAACC,aADjC;IAAA,IAEIC,MAAM,GAAGF,YAAY,CAACE,MAF1B;IAAA,IAGI9G,OAAO,GAAG4G,YAAY,CAAC5G,OAH3B;IAAA,IAII+G,YAAY,GAAGH,YAAY,CAACG,YAJhC;IAAA,IAKI9E,MAAM,GAAG2E,YAAY,CAAC3E,MAL1B;IAAA,IAMI+E,eAAe,GAAGJ,YAAY,CAACI,eANnC;IAAA,IAOIC,eAAe,GAAGL,YAAY,CAACK,eAPnC;IAQA,IAAIC,YAAY,GAAG,KAAKrH,KAAxB;IAAA,IACIP,YAAY,GAAG4H,YAAY,CAAC5H,YADhC;IAAA,IAEID,WAAW,GAAG6H,YAAY,CAAC7H,WAF/B;IAAA,IAGIoD,UAAU,GAAGyE,YAAY,CAACzE,UAH9B;IAAA,IAIIX,YAAY,GAAGoF,YAAY,CAACpF,YAJhC;IAKA,IAAIqF,OAAO,GAAGnK,UAAU,CAAC,KAAKuH,SAAL,CAAe,gBAAf,CAAD,EAAmCsC,aAAnC,CAAxB;IACA,IAAIO,YAAY,GAAGpK,UAAU,CAAC,KAAKuH,SAAL,CAAe,iBAAf,CAAD,GAAqCoC,WAAW,GAAG,EAAd,EAAkBA,WAAW,CAAC,KAAKpC,SAAL,CAAe,mCAAf,CAAD,CAAX,GAAmE0C,eAArF,EAAsGN,WAA3I,EAA7B;IACA,IAAIU,WAAW,GAAG;MAChBrH,OAAO,EAAEA,OADO;MAEhB8B,YAAY,EAAEA,YAFE;MAGhBW,UAAU,EAAEA,UAHI;MAIhBnD,YAAY,EAAEA,YAJE;MAKhByH,YAAY,EAAEA,YALE;MAMhBC,eAAe,EAAEA,eAND;MAOhB5H,KAAK,EAAEC,WAPS;MAQhBiF,YAAY,EAAE,KAAKH,kBARH;MAShBnC,QAAQ,EAAE,KAAKJ,uBATC;MAUhB0F,WAAW,EAAE,KAAK3E,0BAVF;MAWhB4E,oBAAoB,EAAE,KAAKrH,wBAXX;MAYhB+G,eAAe,EAAEA;IAZD,CAAlB;IAcA,OAAOnK,KAAK,CAAC4I,aAAN,CAAoBjH,WAApB,EAAiC;MACtC+I,SAAS,EAAEL,OAD2B;MAEtCM,GAAG,EAAE,KAAK/H;IAF4B,CAAjC,EAGJ5C,KAAK,CAAC4I,aAAN,CAAoB,KAApB,EAA2B;MAC5B8B,SAAS,EAAEJ;IADiB,CAA3B,EAEAtK,KAAK,CAAC4I,aAAN,CAAoB,KAApB,EAA2B;MAC5B8B,SAAS,EAAE,KAAKjD,SAAL,CAAe,mBAAf;IADiB,CAA3B,EAEAzH,KAAK,CAAC4I,aAAN,CAAoB,KAApB,EAA2B;MAC5B8B,SAAS,EAAE,KAAKjD,SAAL,CAAe,kBAAf;IADiB,CAA3B,EAEA,KAAKU,aAAL,CAAmB5F,WAAnB,CAFA,CAFA,EAIkCvC,KAAK,CAAC4I,aAAN,CAAoB,KAApB,EAA2B;MAC9D8B,SAAS,EAAE,KAAKjD,SAAL,CAAe,yBAAyB0C,eAAe,GAAG,QAAH,GAAc,OAAtD,CAAf;IADmD,CAA3B,EAElCnK,KAAK,CAAC4I,aAAN,CAAoBzH,UAApB,EAAgCtB,QAAQ,CAAC;MAC1CwD,KAAK,EAAE;IADmC,CAAD,EAExCkH,WAFwC,CAAxC,CAFkC,EAInB,CAACJ,eAAD,IAAoBnK,KAAK,CAAC4I,aAAN,CAAoBzH,UAApB,EAAgCtB,QAAQ,CAAC;MAC7EwD,KAAK,EAAE;IADsE,CAAD,EAE3EkH,WAF2E,CAAxC,CAJD,CAJlC,CAFA,EAYiBvK,KAAK,CAAC4I,aAAN,CAAoB1H,OAApB,EAA6B;MAC/C8I,MAAM,EAAEA,MADuC;MAE/CzH,WAAW,EAAEA,WAFkC;MAG/CwE,gBAAgB,EAAE,KAAKA,gBAHwB;MAI/CI,sBAAsB,EAAE,KAAKA,sBAJkB;MAK/CyD,UAAU,EAAE,KAAKtG,sBAL8B;MAM/CO,IAAI,EAAE,KAAKH,QANoC;MAO/CmG,YAAY,EAAE1F;IAPiC,CAA7B,CAZjB,CAHI,CAAP;EAwBD,CAxDD;;EA0DA8C,MAAM,CAAC6C,MAAP,GAAgB,SAASA,MAAT,GAAkB;IAChC,IAAIC,YAAY,GAAG,KAAKtI,KAAxB;IAAA,IACIuI,QAAQ,GAAGD,YAAY,CAACC,QAD5B;IAAA,IAEIC,SAAS,GAAGF,YAAY,CAACE,SAF7B;IAAA,IAGIC,MAAM,GAAGH,YAAY,CAACG,MAH1B;IAAA,IAIIC,oBAAoB,GAAGJ,YAAY,CAACI,oBAJxC;IAAA,IAKIC,KAAK,GAAGL,YAAY,CAACK,KALzB;IAAA,IAMIC,SAAS,GAAGN,YAAY,CAACM,SAN7B;IAAA,IAOIC,OAAO,GAAGP,YAAY,CAACO,OAP3B;IAAA,IAQIC,QAAQ,GAAGR,YAAY,CAACQ,QAR5B;IAAA,IASIC,OAAO,GAAGT,YAAY,CAACS,OAT3B;IAAA,IAUIC,IAAI,GAAG7L,6BAA6B,CAACmL,YAAD,EAAe,CAAC,UAAD,EAAa,WAAb,EAA0B,QAA1B,EAAoC,sBAApC,EAA4D,OAA5D,EAAqE,WAArE,EAAkF,SAAlF,EAA6F,UAA7F,EAAyG,SAAzG,CAAf,CAVxC;;IAYA,IAAIzI,KAAK,GAAG,KAAKQ,QAAL,EAAZ;IACA,IAAI4I,SAAS,GAAGnK,iBAAiB,CAACU,eAAD,EAAkBwJ,IAAlB,CAAjC;IACA,IAAIE,QAAQ,GAAGrJ,KAAK,IAAIA,KAAK,CAACiD,MAAN,GAAe,CAAvC;IACA,IAAI8E,OAAO,GAAGxI,yBAAyB,CAAC,WAAD,EAAc,KAAK4F,SAAnB,EAA8B,KAAKhF,KAAnC,EAA0CkJ,QAA1C,CAAvC;IACA,OAAO3L,KAAK,CAAC4I,aAAN,CAAoB5H,WAAW,CAAC4K,QAAhC,EAA0C;MAC/CtJ,KAAK,EAAE4I;IADwC,CAA1C,EAEJlL,KAAK,CAAC4I,aAAN,CAAoB,KAApB,EAA2B;MAC5B8B,SAAS,EAAEL,OADiB;MAE5Be,KAAK,EAAEA;IAFqB,CAA3B,EAGApL,KAAK,CAAC4I,aAAN,CAAoBhH,mBAApB,EAAyC;MAC1C2I,WAAW,EAAE,KAAK9H,KADwB;MAE1CkI,GAAG,EAAE,KAAK9H,UAFgC;MAG1CyI,OAAO,EAAE7J,qBAAqB,CAAC,KAAKyE,WAAN,EAAmBoF,OAAnB,CAHY;MAI1CD,SAAS,EAAE5J,qBAAqB,CAAC,KAAK8E,aAAN,EAAqB8E,SAArB,CAJU;MAK1CE,QAAQ,EAAE9J,qBAAqB,CAAC,KAAKkF,UAAN,EAAkB4E,QAAlB,CALW;MAM1CM,OAAO,EAAE,KAAKjC,kBAAL;IANiC,CAAzC,EAOA5J,KAAK,CAAC4I,aAAN,CAAoBlH,YAApB,EAAkC7B,QAAQ,CAAC,EAAD,EAAK6L,SAAL,EAAgB;MAC3DI,cAAc,EAAEX,oBAD2C;MAE3DK,OAAO,EAAE/J,qBAAqB,CAAC,KAAKwE,WAAN,EAAmBuF,OAAnB,CAF6B;MAG3DP,SAAS,EAAEA,SAAS,IAAI,CAACD,QAHkC;MAI3DW,QAAQ,EAAEA,QAJiD;MAK3DrF,MAAM,EAAE,KAAKvD,KAAL,CAAWuD,MALwC;MAM3D,iBAAiB0E;IAN0C,CAAhB,CAA1C,EAOC,KAAK7C,aAAL,EAPD,CAPA,CAHA,CAFI,CAAP;EAoBD,CArCD;;EAuCA,OAAOlG,eAAP;AACD,CA5gBD,CA4gBEjC,KAAK,CAAC+L,SA5gBR,CAFA;;AAghBA9J,eAAe,CAAC+J,SAAhB,GAA4BnM,QAAQ,CAAC,EAAD,EAAKkC,eAAL,EAAsB;EACxDiI,MAAM,EAAE/J,SAAS,CAACgM,KADsC;EAExD3J,KAAK,EAAErC,SAAS,CAACiM,OAAV,CAAkBjM,SAAS,CAACkM,UAAV,CAAqBC,IAArB,CAAlB,CAFiD;EAGxDxE,YAAY,EAAE3H,SAAS,CAACiM,OAAV,CAAkBjM,SAAS,CAACkM,UAAV,CAAqBC,IAArB,CAAlB,CAH0C;EAIxD/F,oBAAoB,EAAEpG,SAAS,CAACiM,OAAV,CAAkBjM,SAAS,CAACkM,UAAV,CAAqBC,IAArB,CAAlB,CAJkC;EAKxDpG,UAAU,EAAE/F,SAAS,CAACoM,SAAV,CAAoB,CAACpM,SAAS,CAACqM,KAAV,CAAgB,CAAC,MAAD,EAAS,OAAT,CAAhB,CAAD,EAAqCrM,SAAS,CAACsM,IAA/C,CAApB,CAL4C;EAMxDhE,MAAM,EAAEtI,SAAS,CAACuM,MANsC;EAOxDtJ,OAAO,EAAEjD,SAAS,CAACwM,IAPqC;EAQxDtH,MAAM,EAAElF,SAAS,CAACwM,IARsC;EASxDxC,YAAY,EAAEhK,SAAS,CAACyM,MATgC;EAUxDxC,eAAe,EAAEjK,SAAS,CAACwM,IAV6B;EAWxDnD,QAAQ,EAAErJ,SAAS,CAACsM,IAXoC;EAYxD1H,IAAI,EAAE5E,SAAS,CAACsM,IAZwC;EAaxD/E,YAAY,EAAEvH,SAAS,CAACsM,IAbgC;EAcxDrH,QAAQ,EAAEjF,SAAS,CAACsM,IAdoC;EAexDpC,eAAe,EAAElK,SAAS,CAACwM;AAf6B,CAAtB,CAApC;AAiBAxK,eAAe,CAACX,YAAhB,GAA+BzB,QAAQ,CAAC,EAAD,EAAKmC,kBAAL,EAAyB;EAC9DiI,YAAY,EAAE,IADgD;EAE9D1B,MAAM,EAAE,YAFsD;EAG9DF,WAAW,EAAE,EAHiD;EAI9D8B,eAAe,EAAE,KAJ6C;EAK9De,MAAM,EAAE;IACNyB,MAAM,EAAE,IADF;IAENC,MAAM,EAAE,IAFF;IAGNC,OAAO,EAAE,IAHH;IAINC,SAAS,EAAE,IAJL;IAKNC,QAAQ,EAAE,IALJ;IAMNC,MAAM,EAAE,IANF;IAONC,QAAQ,EAAE,IAPJ;IAQNC,EAAE,EAAE,IARE;IASNC,KAAK,EAAE,OATD;IAUNC,SAAS,EAAE,WAVL;IAWNC,SAAS,EAAE,aAXL;IAYNC,KAAK,EAAE,OAZD;IAaNC,OAAO,EAAE,SAbH;IAcNC,OAAO,EAAE;EAdH;AALsD,CAAzB,CAAvC;AAsBA,eAAelM,YAAY,CAAC;EAC1BqG,WAAW,EAAE;AADa,CAAD,CAAZ,CAEZ1F,eAFY,CAAf"},"metadata":{},"sourceType":"module"}