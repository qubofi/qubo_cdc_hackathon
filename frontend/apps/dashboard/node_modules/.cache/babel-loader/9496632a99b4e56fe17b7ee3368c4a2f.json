{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SchemaModel = exports.Schema = void 0;\n\nvar _StringType = _interopRequireDefault(require(\"./StringType\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar Schema = /*#__PURE__*/function () {\n  function Schema(schema) {\n    this.schema = schema;\n  }\n\n  var _proto = Schema.prototype;\n\n  _proto.getFieldType = function getFieldType(fieldName) {\n    return this.schema[fieldName] || new _StringType[\"default\"]();\n  };\n\n  _proto.getKeys = function getKeys() {\n    return Object.keys(this.schema);\n  };\n\n  _proto.checkForField = function checkForField(fieldName, fieldValue, data) {\n    var fieldChecker = this.schema[fieldName];\n\n    if (!fieldChecker) {\n      // fieldValue can be anything if no schema defined\n      return {\n        hasError: false\n      };\n    }\n\n    return fieldChecker.check(fieldValue, data);\n  };\n\n  _proto.check = function check(data) {\n    var _this = this;\n\n    var checkResult = {};\n    Object.keys(this.schema).forEach(function (key) {\n      checkResult[key] = _this.checkForField(key, data[key], data);\n    });\n    return checkResult;\n  };\n\n  _proto.checkForFieldAsync = function checkForFieldAsync(fieldName, fieldValue, data) {\n    var fieldChecker = this.schema[fieldName];\n\n    if (!fieldChecker) {\n      // fieldValue can be anything if no schema defined\n      return Promise.resolve({\n        hasError: false\n      });\n    }\n\n    return fieldChecker.checkAsync(fieldValue, data);\n  };\n\n  _proto.checkAsync = function checkAsync(data) {\n    var _this2 = this;\n\n    var checkResult = {};\n    var promises = [];\n    var keys = [];\n    Object.keys(this.schema).forEach(function (key) {\n      keys.push(key);\n      promises.push(_this2.checkForFieldAsync(key, data[key], data));\n    });\n    return Promise.all(promises).then(function (values) {\n      for (var i = 0; i < values.length; i += 1) {\n        checkResult[keys[i]] = values[i];\n      }\n\n      return checkResult;\n    });\n  };\n\n  return Schema;\n}();\n\nexports.Schema = Schema;\n\nvar SchemaModel = function SchemaModel(o) {\n  return new Schema(o);\n};\n\nexports.SchemaModel = SchemaModel;\n\nSchemaModel.combine = function () {\n  for (var _len = arguments.length, models = new Array(_len), _key = 0; _key < _len; _key++) {\n    models[_key] = arguments[_key];\n  }\n\n  return new Schema(models.map(function (model) {\n    return model.schema;\n  }).reduce(function (accumulator, currentValue) {\n    return Object.assign(accumulator, currentValue);\n  }, {}));\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","SchemaModel","Schema","_StringType","_interopRequireDefault","require","obj","__esModule","schema","_proto","prototype","getFieldType","fieldName","getKeys","keys","checkForField","fieldValue","data","fieldChecker","hasError","check","_this","checkResult","forEach","key","checkForFieldAsync","Promise","resolve","checkAsync","_this2","promises","push","all","then","values","i","length","o","combine","_len","arguments","models","Array","_key","map","model","reduce","accumulator","currentValue","assign"],"sources":["/Users/lixupeng/Local-Work/frontend/node_modules/schema-typed/es/Schema.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SchemaModel = exports.Schema = void 0;\n\nvar _StringType = _interopRequireDefault(require(\"./StringType\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Schema = /*#__PURE__*/function () {\n  function Schema(schema) {\n    this.schema = schema;\n  }\n\n  var _proto = Schema.prototype;\n\n  _proto.getFieldType = function getFieldType(fieldName) {\n    return this.schema[fieldName] || new _StringType[\"default\"]();\n  };\n\n  _proto.getKeys = function getKeys() {\n    return Object.keys(this.schema);\n  };\n\n  _proto.checkForField = function checkForField(fieldName, fieldValue, data) {\n    var fieldChecker = this.schema[fieldName];\n\n    if (!fieldChecker) {\n      // fieldValue can be anything if no schema defined\n      return {\n        hasError: false\n      };\n    }\n\n    return fieldChecker.check(fieldValue, data);\n  };\n\n  _proto.check = function check(data) {\n    var _this = this;\n\n    var checkResult = {};\n    Object.keys(this.schema).forEach(function (key) {\n      checkResult[key] = _this.checkForField(key, data[key], data);\n    });\n    return checkResult;\n  };\n\n  _proto.checkForFieldAsync = function checkForFieldAsync(fieldName, fieldValue, data) {\n    var fieldChecker = this.schema[fieldName];\n\n    if (!fieldChecker) {\n      // fieldValue can be anything if no schema defined\n      return Promise.resolve({\n        hasError: false\n      });\n    }\n\n    return fieldChecker.checkAsync(fieldValue, data);\n  };\n\n  _proto.checkAsync = function checkAsync(data) {\n    var _this2 = this;\n\n    var checkResult = {};\n    var promises = [];\n    var keys = [];\n    Object.keys(this.schema).forEach(function (key) {\n      keys.push(key);\n      promises.push(_this2.checkForFieldAsync(key, data[key], data));\n    });\n    return Promise.all(promises).then(function (values) {\n      for (var i = 0; i < values.length; i += 1) {\n        checkResult[keys[i]] = values[i];\n      }\n\n      return checkResult;\n    });\n  };\n\n  return Schema;\n}();\n\nexports.Schema = Schema;\n\nvar SchemaModel = function SchemaModel(o) {\n  return new Schema(o);\n};\n\nexports.SchemaModel = SchemaModel;\n\nSchemaModel.combine = function () {\n  for (var _len = arguments.length, models = new Array(_len), _key = 0; _key < _len; _key++) {\n    models[_key] = arguments[_key];\n  }\n\n  return new Schema(models.map(function (model) {\n    return model.schema;\n  }).reduce(function (accumulator, currentValue) {\n    return Object.assign(accumulator, currentValue);\n  }, {}));\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}